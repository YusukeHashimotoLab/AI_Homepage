<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Á¨¨5Á´†Ôºö„ÇØ„É©„Ç¶„ÉâHPCÊ¥ªÁî®„Å®ÊúÄÈÅ©Âåñ - AI Terakoya</title>

    <style>
        :root {
            --color-primary: #2c3e50;
            --color-primary-dark: #1a252f;
            --color-accent: #7b2cbf;
            --color-accent-light: #9d4edd;
            --color-text: #2d3748;
            --color-text-light: #4a5568;
            --color-bg: #ffffff;
            --color-bg-alt: #f7fafc;
            --color-border: #e2e8f0;
            --color-code-bg: #f8f9fa;
            --color-link: #3182ce;
            --color-link-hover: #2c5aa0;

            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 3rem;

            --font-body: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            --font-mono: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;

            --border-radius: 8px;
            --box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            line-height: 1.7;
            color: var(--color-text);
            background-color: var(--color-bg);
            font-size: 16px;
        }

        header {
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
            color: white;
            padding: var(--spacing-xl) var(--spacing-md);
            margin-bottom: var(--spacing-xl);
            box-shadow: var(--box-shadow);
        }

        .header-content {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: var(--spacing-sm);
            line-height: 1.2;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.95;
            font-weight: 400;
            margin-bottom: var(--spacing-md);
        }

        .meta {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-md);
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 var(--spacing-md) var(--spacing-xl);
        }

        h2 {
            font-size: 1.75rem;
            color: var(--color-primary);
            margin-top: var(--spacing-xl);
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-xs);
            border-bottom: 3px solid var(--color-accent);
        }

        h3 {
            font-size: 1.4rem;
            color: var(--color-primary);
            margin-top: var(--spacing-lg);
            margin-bottom: var(--spacing-sm);
        }

        h4 {
            font-size: 1.1rem;
            color: var(--color-primary-dark);
            margin-top: var(--spacing-md);
            margin-bottom: var(--spacing-sm);
        }

        p {
            margin-bottom: var(--spacing-md);
            color: var(--color-text);
        }

        a {
            color: var(--color-link);
            text-decoration: none;
            transition: color 0.2s;
        }

        a:hover {
            color: var(--color-link-hover);
            text-decoration: underline;
        }

        ul, ol {
            margin-left: var(--spacing-lg);
            margin-bottom: var(--spacing-md);
        }

        li {
            margin-bottom: var(--spacing-xs);
            color: var(--color-text);
        }

        pre {
            background-color: var(--color-code-bg);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            padding: var(--spacing-md);
            overflow-x: auto;
            margin-bottom: var(--spacing-md);
            font-family: var(--font-mono);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        code {
            font-family: var(--font-mono);
            font-size: 0.9em;
            background-color: var(--color-code-bg);
            padding: 0.2em 0.4em;
            border-radius: 3px;
        }

        pre code {
            background-color: transparent;
            padding: 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: var(--spacing-md);
            font-size: 0.95rem;
        }

        th, td {
            border: 1px solid var(--color-border);
            padding: var(--spacing-sm);
            text-align: left;
        }

        th {
            background-color: var(--color-bg-alt);
            font-weight: 600;
            color: var(--color-primary);
        }

        blockquote {
            border-left: 4px solid var(--color-accent);
            padding-left: var(--spacing-md);
            margin: var(--spacing-md) 0;
            color: var(--color-text-light);
            font-style: italic;
            background-color: var(--color-bg-alt);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        .mermaid {
            text-align: center;
            margin: var(--spacing-lg) 0;
            background-color: var(--color-bg-alt);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        details {
            background-color: var(--color-bg-alt);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        summary {
            cursor: pointer;
            font-weight: 600;
            color: var(--color-primary);
            user-select: none;
            padding: var(--spacing-xs);
            margin: calc(-1 * var(--spacing-md));
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        summary:hover {
            background-color: rgba(123, 44, 191, 0.1);
        }

        details[open] summary {
            margin-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--color-border);
        }

        .learning-objectives {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: var(--spacing-lg);
            border-radius: var(--border-radius);
            border-left: 4px solid var(--color-accent);
            margin-bottom: var(--spacing-xl);
        }

        .learning-objectives h2 {
            margin-top: 0;
            border-bottom: none;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            gap: var(--spacing-md);
            margin: var(--spacing-xl) 0;
            padding-top: var(--spacing-lg);
            border-top: 2px solid var(--color-border);
        }

        .nav-button {
            flex: 1;
            padding: var(--spacing-md);
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
            color: white;
            border-radius: var(--border-radius);
            text-align: center;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: var(--box-shadow);
        }

        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            text-decoration: none;
        }

        footer {
            margin-top: var(--spacing-xl);
            padding: var(--spacing-lg) var(--spacing-md);
            background-color: var(--color-bg-alt);
            border-top: 1px solid var(--color-border);
            text-align: center;
            font-size: 0.9rem;
            color: var(--color-text-light);
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.5rem;
            }

            h2 {
                font-size: 1.4rem;
            }

            h3 {
                font-size: 1.2rem;
            }

            .meta {
                font-size: 0.85rem;
            }

            .navigation {
                flex-direction: column;
            }

            table {
                font-size: 0.85rem;
            }

            th, td {
                padding: var(--spacing-xs);
            }
        }
    </style>

    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>

    <!-- MathJax for LaTeX equation rendering -->
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\(', '\)']],
                displayMath: [['$$', '$$'], ['\[', '\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script" async></script>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>Á¨¨5Á´†Ôºö„ÇØ„É©„Ç¶„ÉâHPCÊ¥ªÁî®„Å®ÊúÄÈÅ©Âåñ</h1>
            <p class="subtitle"></p>
            <div class="meta">
                <span class="meta-item">üìñ Ë™≠‰∫ÜÊôÇÈñì: 15-20ÂàÜ</span>
                <span class="meta-item">üìä Èõ£ÊòìÂ∫¶: ‰∏≠Á¥ö„Äú‰∏äÁ¥ö</span>
                <span class="meta-item">üíª „Ç≥„Éº„Éâ‰æã: 5ÂÄã</span>
                <span class="meta-item">üìù ÊºîÁøíÂïèÈ°å: 0Âïè</span>
            </div>
        </div>
    </header>

    <main class="container">

<h1>Á¨¨5Á´†Ôºö„ÇØ„É©„Ç¶„ÉâHPCÊ¥ªÁî®„Å®ÊúÄÈÅ©Âåñ</h1>

<h2>Â≠¶ÁøíÁõÆÊ®ô</h2>

„Åì„ÅÆÁ´†„ÇíË™≠„ÇÄ„Åì„Å®„Åß„ÄÅ‰ª•‰∏ã„ÇíÁøíÂæó„Åß„Åç„Åæ„ÅôÔºö

- ‚úÖ AWS Parallel Cluster„ÇíÊßãÁØâ„Åß„Åç„Çã
- ‚úÖ „Çπ„Éù„ÉÉ„Éà„Ç§„É≥„Çπ„Çø„É≥„Çπ„Åß„Ç≥„Çπ„Éà„Çí50%ÂâäÊ∏õ„Åß„Åç„Çã
- ‚úÖ Docker„ÅßË®àÁÆóÁí∞Â¢É„ÇíÂÆåÂÖ®ÂÜçÁèæ„Åß„Åç„Çã
- ‚úÖ 10,000ÊùêÊñôË¶èÊ®°„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíË®≠Ë®à„ÉªÂÆüË°å„Åß„Åç„Çã
- ‚úÖ „Çª„Ç≠„É•„É™„ÉÜ„Ç£„Å®„Ç≥„É≥„Éó„É©„Ç§„Ç¢„É≥„Çπ„ÇíÁêÜËß£„Åó„Å¶„ÅÑ„Çã

---

<h2>5.1 „ÇØ„É©„Ç¶„ÉâHPC„ÅÆÈÅ∏ÊäûËÇ¢</h2>

<h3>‰∏ªË¶Å„ÇØ„É©„Ç¶„Éâ„Éó„É≠„Éê„Ç§„ÉÄ„ÉºÊØîËºÉ</h3>

| „Çµ„Éº„Éì„Çπ | „Éó„É≠„Éê„Ç§„ÉÄ„Éº | ÁâπÂæ¥ | ÂàùÊúüË≤ªÁî® | Êé®Â•®Áî®ÈÄî |
|---------|-----------|------|---------|---------|
| <strong>AWS Parallel Cluster</strong> | Amazon | ÊúÄÂ§ßË¶èÊ®°„ÄÅË±äÂØå„Å™ÂÆüÁ∏æ | $0 | Â§ßË¶èÊ®°HPC |
| <strong>Google Cloud HPC Toolkit</strong> | Google | AI/MLÁµ±Âêà„ÅåÂº∑Âäõ | $0 | Ê©üÊ¢∞Â≠¶ÁøíÈÄ£Êê∫ |
| <strong>Azure CycleCloud</strong> | Microsoft | WindowsÁµ±Âêà | $0 | „Ç®„É≥„Çø„Éº„Éó„É©„Ç§„Ç∫ |
| <strong>TSUBAME</strong> | Êù±Â∑•Â§ß | ÂõΩÂÜÖ„Éà„ÉÉ„Éó„ÄÅÂ≠¶Ë°ìÂà©Áî® | Áî≥Ë´ãÂà∂ | Â≠¶Ë°ìÁ†îÁ©∂ |
| <strong>ÂØåÂ≤≥</strong> | ÁêÜÁ†î | ‰∏ñÁïå„Éà„ÉÉ„Éó500 | Áî≥Ë´ãÂà∂ | Ë∂ÖÂ§ßË¶èÊ®°Ë®àÁÆó |

<h3>„Ç≥„Çπ„ÉàÊØîËºÉÔºà10,000ÊùêÊñô„ÄÅ1ÊùêÊñô=12 CPUÊôÇÈñì„ÄÅ48„Ç≥„Ç¢Ôºâ</h3>

| „Ç™„Éó„Ç∑„Éß„É≥ | Ë®àÁÆóÊôÇÈñì | „Ç≥„Çπ„Éà | „É°„É™„ÉÉ„Éà | „Éá„É°„É™„ÉÉ„Éà |
|----------|---------|-------|---------|---------|
| „Ç™„É≥„Éó„É¨HPC | 5,760,000 CPUÊôÇÈñì | $0ÔºàÊó¢Â≠òË®≠ÂÇôÔºâ | ÁÑ°ÊñôÔºàÂà©Áî®Êû†ÂÜÖÔºâ | ÂæÖ„Å°ÊôÇÈñì„ÄÅÂà∂Èôê |
| AWS „Ç™„É≥„Éá„Éû„É≥„Éâ | Âêå‰∏ä | $4,000-6,000 | Âç≥ÊôÇÂà©Áî®ÂèØËÉΩ | È´ò„Ç≥„Çπ„Éà |
| AWS „Çπ„Éù„ÉÉ„Éà | Âêå‰∏ä | $800-1,500 | 70%„Ç≥„Çπ„ÉàÂâäÊ∏õ | ‰∏≠Êñ≠„É™„Çπ„ÇØ |
| Google Cloud Preemptible | Âêå‰∏ä | $900-1,600 | ÂÆâ‰æ° | 24ÊôÇÈñìÂà∂Èôê |

---

<h2>5.2 AWS Parallel Cluster„Çª„ÉÉ„Éà„Ç¢„ÉÉ„Éó</h2>

<h3>ÂâçÊèêÊù°‰ª∂</h3>

<pre><code class="language-bash"><h1>AWS CLI„Ç§„É≥„Çπ„Éà„Éº„É´</h1>
pip install awscli

<h1>AWSË®≠ÂÆö</h1>
aws configure
<h1>AWS Access Key ID: [YOUR_KEY]</h1>
<h1>AWS Secret Access Key: [YOUR_SECRET]</h1>
<h1>Default region: us-east-1</h1>
<h1>Default output format: json</h1>

<h1>Parallel Cluster CLI„Ç§„É≥„Çπ„Éà„Éº„É´</h1>
pip install aws-parallelcluster</code></pre>

<h3>„ÇØ„É©„Çπ„ÇøË®≠ÂÆö„Éï„Ç°„Ç§„É´</h3>

<strong>config.yaml</strong>:

<pre><code class="language-yaml">Region: us-east-1
Image:
  Os: alinux2

HeadNode:
  InstanceType: c5.2xlarge  # 8 vCPU, 16 GB RAM
  Networking:
    SubnetId: subnet-12345678
  Ssh:
    KeyName: my-key-pair

Scheduling:
  Scheduler: slurm
  SlurmQueues:
    - Name: compute
      ComputeResources:
        - Name: c5-48xlarge
          InstanceType: c5.24xlarge  # 96 vCPU
          MinCount: 0
          MaxCount: 100  # ÊúÄÂ§ß100„Éé„Éº„Éâ
          DisableSimultaneousMultithreading: true
          Efa:
            Enabled: true  # È´òÈÄü„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ
      Networking:
        SubnetIds:
          - subnet-12345678
        PlacementGroup:
          Enabled: true  # ‰Ωé„É¨„Ç§„ÉÜ„É≥„Ç∑ÈÖçÁΩÆ

SharedStorage:
  - MountDir: /shared
    Name: ebs-shared
    StorageType: Ebs
    EbsSettings:
      VolumeType: gp3
      Size: 1000  # 1 TB
      Encrypted: true

  - MountDir: /fsx
    Name: lustre-fs
    StorageType: FsxLustre
    FsxLustreSettings:
      StorageCapacity: 1200  # 1.2 TB
      DeploymentType: SCRATCH_2</code></pre>

<h3>„ÇØ„É©„Çπ„Çø‰ΩúÊàê</h3>

<pre><code class="language-bash"><h1>„ÇØ„É©„Çπ„Çø‰ΩúÊàê</h1>
pcluster create-cluster \
  --cluster-name vasp-cluster \
  --cluster-configuration config.yaml

<h1>‰ΩúÊàêÁä∂ÊÖãÁ¢∫Ë™ç</h1>
pcluster describe-cluster --cluster-name vasp-cluster

<h1>SSHÊé•Á∂ö</h1>
pcluster ssh --cluster-name vasp-cluster -i ~/.ssh/my-key-pair.pem</code></pre>

<h3>VASPÁí∞Â¢É„Çª„ÉÉ„Éà„Ç¢„ÉÉ„Éó</h3>

<pre><code class="language-bash"><h1>„ÇØ„É©„Çπ„Çø„Å´SSHÊé•Á∂öÂæå</h1>

<h1>Intel OneAPI ToolkitÔºàVASP„Ç≥„É≥„Éë„Ç§„É´„Å´ÂøÖË¶ÅÔºâ</h1>
wget https://registrationcenter-download.intel.com/...
bash l_BaseKit_p_2023.0.0.25537_offline.sh

<h1>VASP„Ç≥„É≥„Éë„Ç§„É´Ôºà„É©„Ç§„Çª„É≥„Çπ„ÅåÂøÖË¶ÅÔºâ</h1>
cd /shared
tar -xzf vasp.6.3.0.tar.gz
cd vasp.6.3.0

<h1>makefile.includeÁ∑®ÈõÜÔºàIntel compilerÁî®Ôºâ</h1>
cp arch/makefile.include.intel makefile.include

<h1>„Ç≥„É≥„Éë„Ç§„É´</h1>
make all

<h1>ÂÆüË°å„Éï„Ç°„Ç§„É´„ÇíÂÖ±Êúâ„Éá„Ç£„É¨„ÇØ„Éà„É™„Å´ÈÖçÁΩÆ</h1>
cp bin/vasp_std /shared/bin/</code></pre>

---

<h2>5.3 „Ç≥„Çπ„ÉàÊúÄÈÅ©Âåñ</h2>

<h3>„Çπ„Éù„ÉÉ„Éà„Ç§„É≥„Çπ„Çø„É≥„Çπ„ÅÆÊ¥ªÁî®</h3>

<strong>„Çπ„Éù„ÉÉ„Éà„Ç§„É≥„Çπ„Çø„É≥„Çπ</strong>„ÅØ„ÄÅ„Ç™„É≥„Éá„Éû„É≥„Éâ„ÅÆ60-90%Ââ≤Âºï„ÅßÂà©Áî®„Åß„Åç„Çã‰ΩôÂâ∞Ë®àÁÆó„É™„ÇΩ„Éº„Çπ„Åß„Åô„ÄÇ

<strong>config.yamlÔºà„Çπ„Éù„ÉÉ„ÉàË®≠ÂÆöÔºâ</strong>:

<pre><code class="language-yaml">Scheduling:
  Scheduler: slurm
  SlurmQueues:
    - Name: spot-queue
      CapacityType: SPOT  # „Çπ„Éù„ÉÉ„Éà„Ç§„É≥„Çπ„Çø„É≥„Çπ
      ComputeResources:
        - Name: c5-spot
          InstanceType: c5.24xlarge
          MinCount: 0
          MaxCount: 200
          SpotPrice: 2.50  # ÊúÄÂ§ßÂÖ•Êú≠‰æ°Ê†ºÔºà$/ÊôÇÔºâ
      Networking:
        SubnetIds:
          - subnet-12345678</code></pre>

<strong>„Çπ„Éù„ÉÉ„Éà„Ç§„É≥„Çπ„Çø„É≥„Çπ„ÅÆ„Éô„Çπ„Éà„Éó„É©„ÇØ„ÉÜ„Ç£„Çπ</strong>:

1. <strong>„ÉÅ„Çß„ÉÉ„ÇØ„Éù„Ç§„É≥„Éà</strong>: Ë®àÁÆó„ÇíÂÆöÊúüÁöÑ„Å´‰øùÂ≠ò
2. <strong>Ë§áÊï∞„Ç§„É≥„Çπ„Çø„É≥„Çπ„Çø„Ç§„Éó</strong>: ‰ª£Êõø„Çø„Ç§„Éó„ÇíÊåáÂÆö
3. <strong>„É™„Éà„É©„Ç§Ë®≠ÂÆö</strong>: ‰∏≠Êñ≠ÊôÇ„ÅÆËá™Âãï„É™„Çπ„Çø„Éº„Éà

<h3>Ëá™Âãï„Çπ„Ç±„Éº„É™„É≥„Ç∞</h3>

<pre><code class="language-yaml">Scheduling:
  SlurmSettings:
    ScaledownIdletime: 5  # 5ÂàÜ„Ç¢„Ç§„Éâ„É´„ÅßÁµÇ‰∫Ü
  SlurmQueues:
    - Name: compute
      ComputeResources:
        - Name: c5-instances
          MinCount: 0      # „Ç¢„Ç§„Éâ„É´ÊôÇ„ÅØ0„Éé„Éº„Éâ
          MaxCount: 100    # ÊúÄÂ§ß100„Éé„Éº„Éâ</code></pre>

<h3>„Ç≥„Çπ„ÉàÁõ£Ë¶ñ</h3>

<pre><code class="language-python">import boto3
from datetime import datetime, timedelta

def get_cluster_cost(cluster_name, days=7):
    """
    „ÇØ„É©„Çπ„Çø„ÅÆ„Ç≥„Çπ„Éà„ÇíÂèñÂæó

    Parameters:
    -----------
    cluster_name : str
        „ÇØ„É©„Çπ„ÇøÂêç
    days : int
        ÈÅéÂéª‰ΩïÊó•ÂàÜ

    Returns:
    --------
    cost : float
        Á∑è„Ç≥„Çπ„ÉàÔºàUSDÔºâ
    """
    ce_client = boto3.client('ce', region_name='us-east-1')

    # ÊúüÈñìË®≠ÂÆö
    end_date = datetime.now().date()
    start_date = end_date - timedelta(days=days)

    # Cost Explorer API
    response = ce_client.get_cost_and_usage(
        TimePeriod={
            'Start': start_date.strftime('%Y-%m-%d'),
            'End': end_date.strftime('%Y-%m-%d')
        },
        Granularity='DAILY',
        Metrics=['UnblendedCost'],
        Filter={
            'Tags': {
                'Key': 'parallelcluster:cluster-name',
                'Values': [cluster_name]
            }
        }
    )

    total_cost = 0
    for result in response['ResultsByTime']:
        cost = float(result['Total']['UnblendedCost']['Amount'])
        total_cost += cost
        print(f"{result['TimePeriod']['Start']}: ${cost:.2f}")

    print(f"\nÁ∑è„Ç≥„Çπ„ÉàÔºà{days}Êó•ÈñìÔºâ: ${total_cost:.2f}")
    return total_cost

<h1>‰ΩøÁî®‰æã</h1>
get_cluster_cost('vasp-cluster', days=7)</code></pre>

---

<h2>5.4 Docker/Singularity„Å´„Çà„Çã„Ç≥„É≥„ÉÜ„ÉäÂåñ</h2>

<h3>Dockerfile„ÅÆ‰ΩúÊàê</h3>

<strong>Dockerfile</strong>:

<pre><code class="language-dockerfile">FROM ubuntu:20.04

<h1>Âü∫Êú¨„Éë„ÉÉ„Ç±„Éº„Ç∏</h1>
RUN apt-get update && apt-get install -y \
    build-essential \
    gfortran \
    openmpi-bin \
    libopenmpi-dev \
    python3 \
    python3-pip \
    wget \
    && rm -rf /var/lib/apt/lists/*

<h1>PythonÁí∞Â¢É</h1>
RUN pip3 install --upgrade pip && \
    pip3 install numpy scipy matplotlib \
    ase pymatgen fireworks

<h1>Intel MKLÔºàÊï∞ÂÄ§Ë®àÁÆó„É©„Ç§„Éñ„É©„É™Ôºâ</h1>
RUN wget https://apt.repos.intel.com/intel-gpg-keys/GPG-PUB-KEY-INTEL-SW-PRODUCTS.PUB && \
    apt-key add GPG-PUB-KEY-INTEL-SW-PRODUCTS.PUB && \
    echo "deb https://apt.repos.intel.com/oneapi all main" > /etc/apt/sources.list.d/oneAPI.list && \
    apt-get update && \
    apt-get install -y intel-oneapi-mkl

<h1>VASPÔºà„É©„Ç§„Çª„É≥„Çπ‰øùÊåÅËÄÖ„ÅÆ„ÅøÔºâ</h1>
<h1>COPY vasp.6.3.0.tar.gz /tmp/</h1>
<h1>RUN cd /tmp && tar -xzf vasp.6.3.0.tar.gz && \</h1>
<h1>    cd vasp.6.3.0 && make all && \</h1>
<h1>    cp bin/vasp_std /usr/local/bin/</h1>

<h1>‰ΩúÊ•≠„Éá„Ç£„É¨„ÇØ„Éà„É™</h1>
WORKDIR /calculations

<h1>„Éá„Éï„Ç©„É´„Éà„Ç≥„Éû„É≥„Éâ</h1>
CMD ["/bin/bash"]</code></pre>

<h3>Docker „Ç§„É°„Éº„Ç∏„ÅÆ„Éì„É´„Éâ„Å®„Éó„ÉÉ„Ç∑„É•</h3>

<pre><code class="language-bash"><h1>„Ç§„É°„Éº„Ç∏„Éì„É´„Éâ</h1>
docker build -t my-vasp-env:latest .

<h1>Docker Hub„Å´„Éó„ÉÉ„Ç∑„É•ÔºàÂÖ±ÊúâÁî®Ôºâ</h1>
docker tag my-vasp-env:latest username/my-vasp-env:latest
docker push username/my-vasp-env:latest

<h1>Amazon ECR„Å´„Éó„ÉÉ„Ç∑„É•ÔºàAWSÁî®Ôºâ</h1>
aws ecr get-login-password --region us-east-1 | docker login --username AWS --password-stdin 123456789012.dkr.ecr.us-east-1.amazonaws.com

docker tag my-vasp-env:latest 123456789012.dkr.ecr.us-east-1.amazonaws.com/my-vasp-env:latest
docker push 123456789012.dkr.ecr.us-east-1.amazonaws.com/my-vasp-env:latest</code></pre>

<h3>Singularity„ÅßHPCÂÆüË°å</h3>

HPC„Ç∑„Çπ„ÉÜ„É†„Åß„ÅØDocker„ÅÆ‰ª£„Çè„Çä„Å´Singularity„Çí‰ΩøÁî®„Åó„Åæ„Åô„ÄÇ

<pre><code class="language-bash"><h1>Docker„Ç§„É°„Éº„Ç∏„Åã„ÇâSingularity„Ç§„É°„Éº„Ç∏„Çí‰ΩúÊàê</h1>
singularity build vasp-env.sif docker://username/my-vasp-env:latest

<h1>Singularity„Ç≥„É≥„ÉÜ„Éä„ÅßÂÆüË°å</h1>
singularity exec vasp-env.sif mpirun -np 48 vasp_std</code></pre>

<strong>SLURM„Çπ„ÇØ„É™„Éó„ÉàÔºàSingularity‰ΩøÁî®Ôºâ</strong>:

<pre><code class="language-bash">#!/bin/bash
#SBATCH --job-name=vasp-singularity
#SBATCH --nodes=1
#SBATCH --ntasks-per-node=48
#SBATCH --time=24:00:00

<h1>Singularity„Ç§„É°„Éº„Ç∏</h1>
IMAGE=/shared/containers/vasp-env.sif

<h1>„Ç≥„É≥„ÉÜ„ÉäÂÜÖ„ÅßVASPÂÆüË°å</h1>
singularity exec $IMAGE mpirun -np 48 vasp_std</code></pre>

---

<h2>5.5 „Çª„Ç≠„É•„É™„ÉÜ„Ç£„Å®„Ç≥„É≥„Éó„É©„Ç§„Ç¢„É≥„Çπ</h2>

<h3>„Ç¢„ÇØ„Çª„ÇπÂà∂Âæ°ÔºàIAMÔºâ</h3>

<strong>ÊúÄÂ∞èÊ®©Èôê„ÅÆÂéüÂâá</strong>:

<pre><code class="language-json">{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "ec2:DescribeInstances",
        "ec2:DescribeVolumes",
        "ec2:RunInstances",
        "ec2:TerminateInstances"
      ],
      "Resource": "*",
      "Condition": {
        "StringEquals": {
          "aws:RequestedRegion": "us-east-1"
        }
      }
    },
    {
      "Effect": "Allow",
      "Action": [
        "s3:GetObject",
        "s3:PutObject"
      ],
      "Resource": "arn:aws:s3:::my-vasp-bucket/*"
    }
  ]
}</code></pre>

<h3>„Éá„Éº„ÇøÊöóÂè∑Âåñ</h3>

<pre><code class="language-yaml"><h1>config.yamlÔºàÊöóÂè∑ÂåñË®≠ÂÆöÔºâ</h1>
SharedStorage:
  - MountDir: /shared
    Name: ebs-encrypted
    StorageType: Ebs
    EbsSettings:
      VolumeType: gp3
      Size: 1000
      Encrypted: true  # ÊöóÂè∑ÂåñÊúâÂäπ
      KmsKeyId: arn:aws:kms:us-east-1:123456789012:key/12345678-1234-1234-1234-123456789012</code></pre>

<h3>Â≠¶Ë°ì„É©„Ç§„Çª„É≥„ÇπÈÅµÂÆà</h3>

<strong>VASP</strong>Á≠â„ÅÆÂïÜÁî®„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢„Çí„ÇØ„É©„Ç¶„Éâ„Åß‰ΩøÁî®„Åô„ÇãÂ†¥Âêà„ÅÆÊ≥®ÊÑèÁÇπÔºö

1. <strong>„É©„Ç§„Çª„É≥„ÇπÁ¢∫Ë™ç</strong>: „ÇØ„É©„Ç¶„Éâ‰ΩøÁî®„ÅåË®±ÂèØ„Åï„Çå„Å¶„ÅÑ„Çã„Åã
2. <strong>„Éé„Éº„Éâ„É≠„ÉÉ„ÇØ</strong>: ÁâπÂÆö„Éé„Éº„Éâ„Åß„ÅÆÂÆüË°åÂà∂Èôê
3. <strong>ÂêåÊôÇÂÆüË°åÊï∞</strong>: „É©„Ç§„Çª„É≥„ÇπÊï∞„ÅÆÂà∂Èôê
4. <strong>Áõ£Êüª„É≠„Ç∞</strong>: ‰ΩøÁî®Â±•Ê≠¥„ÅÆË®òÈå≤

---

<h2>5.6 „Ç±„Éº„Çπ„Çπ„Çø„Éá„Ç£: 10,000ÊùêÊñô„Çπ„ÇØ„É™„Éº„Éã„É≥„Ç∞</h2>

<h3>Ë¶Å‰ª∂ÂÆöÁæ©</h3>

<strong>ÁõÆÊ®ô</strong>: 10,000ÂÄã„ÅÆÈÖ∏ÂåñÁâ©ÊùêÊñô„ÅÆ„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„Éó„Çí6„É∂Êúà‰ª•ÂÜÖ„Å´Ë®àÁÆó

<strong>Âà∂Á¥Ñ</strong>:
- ‰∫àÁÆó: $5,000
- 1ÊùêÊñô„ÅÇ„Åü„ÇäË®àÁÆóÊôÇÈñì: 12ÊôÇÈñìÔºà48„Ç≥„Ç¢Ôºâ
- Á∑èCPUÊôÇÈñì: 5,760,000 CPUÊôÇÈñì

<h3>„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£Ë®≠Ë®à</h3>

<div class="mermaid">graph TD
    A[ÊùêÊñô„É™„Çπ„Éà<br/>10,000ÂÄã] --> B[„Éê„ÉÉ„ÉÅÂàÜÂâ≤<br/>100„Éê„ÉÉ„ÉÅ √ó 100ÊùêÊñô]
    B --> C[AWS Parallel Cluster<br/>„Çπ„Éù„ÉÉ„Éà„Ç§„É≥„Çπ„Çø„É≥„Çπ]
    C --> D[SLURM „Ç¢„É¨„Ç§„Ç∏„Éß„Éñ<br/>ÂêåÊôÇ20„Éé„Éº„Éâ]
    D --> E[FireWorks<br/>„ÉØ„Éº„ÇØ„Éï„É≠„ÉºÁÆ°ÁêÜ]
    E --> F[MongoDB<br/>ÁµêÊûú‰øùÂ≠ò]
    F --> G[S3<br/>Èï∑Êúü‰øùÂ≠ò]
    G --> H[ÂàÜÊûê„ÉªÂèØË¶ñÂåñ]</div>

<h3>ÂÆüË£Ö</h3>

<strong>1. „ÇØ„É©„Çπ„ÇøË®≠ÂÆö</strong>

<pre><code class="language-yaml"><h1>config-10k-materials.yaml</h1>
Scheduling:
  Scheduler: slurm
  SlurmQueues:
    - Name: spot-compute
      CapacityType: SPOT
      ComputeResources:
        - Name: c5-24xlarge-spot
          InstanceType: c5.24xlarge  # 96 vCPU
          MinCount: 0
          MaxCount: 50  # ÂêåÊôÇ50„Éé„Éº„Éâ = 4,800„Ç≥„Ç¢
          SpotPrice: 2.00</code></pre>

<strong>2. „Ç∏„Éß„ÉñÊäïÂÖ•„Çπ„ÇØ„É™„Éó„Éà</strong>

<pre><code class="language-python">def run_10k_project():
    """10,000ÊùêÊñô„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂÆüË°å"""

    # ÊùêÊñô„É™„Çπ„ÉàË™≠„ÅøËæº„Åø
    with open('oxide_materials_10k.txt', 'r') as f:
        materials = [line.strip() for line in f]

    print(f"Á∑èÊùêÊñôÊï∞: {len(materials)}")

    # 100„Éê„ÉÉ„ÉÅ„Å´ÂàÜÂâ≤
    batch_size = 100
    n_batches = len(materials) // batch_size

    manager = SLURMJobManager()

    for batch_id in range(n_batches):
        start = batch_id * batch_size
        end = (batch_id + 1) * batch_size
        batch_materials = materials[start:end]

        # „Éê„ÉÉ„ÉÅÁî®ÊùêÊñô„É™„Çπ„Éà
        list_file = f'batch_{batch_id:03d}.txt'
        with open(list_file, 'w') as f:
            for mat in batch_materials:
                f.write(f"{mat}\n")

        # „Ç¢„É¨„Ç§„Ç∏„Éß„ÉñÊäïÂÖ•Ôºà100ÊùêÊñô„ÄÅÂêåÊôÇ20„Éé„Éº„ÉâÔºâ
        job_id = manager.submit_array_job(
            'vasp_bandgap.sh',
            n_tasks=100,
            max_concurrent=20
        )

        print(f"„Éê„ÉÉ„ÉÅ {batch_id+1}/{n_batches} ÊäïÂÖ•: „Ç∏„Éß„ÉñID {job_id}")

        # „É¨„Éº„ÉàÂà∂ÈôêÔºàAWS APIÂà∂ÈôêÂØæÁ≠ñÔºâ
        time.sleep(1)

run_10k_project()</code></pre>

<strong>3. „Ç≥„Çπ„ÉàÂàÜÊûê</strong>

<pre><code class="language-python">def estimate_project_cost():
    """„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Ç≥„Çπ„ÉàË¶ãÁ©ç„ÇÇ„Çä"""

    # „Éë„É©„É°„Éº„Çø
    n_materials = 10000
    cpu_hours_per_material = 12
    cores_per_job = 48

    total_cpu_hours = n_materials * cpu_hours_per_material

    # c5.24xlarge: 96 vCPU, $4.08/ÊôÇÔºà„Ç™„É≥„Éá„Éû„É≥„ÉâÔºâ
    ondemand_cost = total_cpu_hours * (4.08 / 96)
    print(f"„Ç™„É≥„Éá„Éû„É≥„Éâ: ${ondemand_cost:,.0f}")

    # „Çπ„Éù„ÉÉ„Éà: 70%Ââ≤Âºï
    spot_cost = ondemand_cost * 0.3
    print(f"„Çπ„Éù„ÉÉ„Éà: ${spot_cost:,.0f}")

    # „Çπ„Éà„É¨„Éº„Ç∏: EBS 1TB √ó 6„É∂Êúà
    storage_cost = 0.10 * 1000 * 6  # $0.10/GB/Êúà
    print(f"„Çπ„Éà„É¨„Éº„Ç∏: ${storage_cost:,.0f}")

    # „Éá„Éº„ÇøËª¢ÈÄÅ: 500GB
    transfer_cost = 500 * 0.09
    print(f"„Éá„Éº„ÇøËª¢ÈÄÅ: ${transfer_cost:,.0f}")

    total_cost = spot_cost + storage_cost + transfer_cost
    print(f"\nÁ∑è„Ç≥„Çπ„Éà: ${total_cost:,.0f}")

    return total_cost

estimate_project_cost()</code></pre>

<strong>Âá∫Âäõ</strong>:
<pre><code>„Ç™„É≥„Éá„Éû„É≥„Éâ: $5,100
„Çπ„Éù„ÉÉ„Éà: $1,530
„Çπ„Éà„É¨„Éº„Ç∏: $600
„Éá„Éº„ÇøËª¢ÈÄÅ: $45

Á∑è„Ç≥„Çπ„Éà: $2,175</code></pre>

---

<h2>5.7 ÊºîÁøíÂïèÈ°å</h2>

<h3>ÂïèÈ°å1ÔºàÈõ£ÊòìÂ∫¶: mediumÔºâ</h3>

<strong>ÂïèÈ°å</strong>: AWS Parallel Cluster„ÅÆ„Ç≥„Çπ„ÉàÂâäÊ∏õÁ≠ñ„Çí3„Å§Êåô„Åí„ÄÅ„Åù„Çå„Åû„Çå„ÅÆÂâäÊ∏õÁéá„ÇíË¶ãÁ©ç„ÇÇ„Å£„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ

<details>
<summary>Ëß£Á≠î‰æã</summary>

<strong>1. „Çπ„Éù„ÉÉ„Éà„Ç§„É≥„Çπ„Çø„É≥„Çπ‰ΩøÁî®</strong>
- ÂâäÊ∏õÁéá: 70%
- „É™„Çπ„ÇØ: ‰∏≠Êñ≠„ÅÆÂèØËÉΩÊÄß

<strong>2. Ëá™Âãï„Çπ„Ç±„Éº„É´„ÉÄ„Ç¶„É≥Ôºà5ÂàÜ„Ç¢„Ç§„Éâ„É´Ôºâ</strong>
- ÂâäÊ∏õÁéá: 20-30%Ôºà„Ç¢„Ç§„Éâ„É´ÊôÇÈñì„Å´„Çà„ÇãÔºâ
- „É™„Çπ„ÇØ: „Å™„Åó

<strong>3. „É™„Ç∂„Éº„Éñ„Éâ„Ç§„É≥„Çπ„Çø„É≥„ÇπÔºà1Âπ¥Â•ëÁ¥ÑÔºâ</strong>
- ÂâäÊ∏õÁéá: 40%
- „É™„Çπ„ÇØ: Èï∑Êúü„Ç≥„Éü„ÉÉ„Éà„É°„É≥„Éà

<strong>Á∑èÂêàÂâäÊ∏õÁéá</strong>: ÊúÄÂ§ß85%Ôºà„Çπ„Éù„ÉÉ„Éà + Ëá™Âãï„Çπ„Ç±„Éº„É´Ôºâ

</details>

<h3>ÂïèÈ°å2ÔºàÈõ£ÊòìÂ∫¶: hardÔºâ</h3>

<strong>ÂïèÈ°å</strong>: 5,000ÊùêÊñô„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Åß„ÄÅ‰∫àÁÆó$1,000„ÄÅÊúüÈñì3„É∂Êúà„ÅÆÂà∂Á¥Ñ‰∏ã„ÅßÊúÄÈÅ©„Å™ÂÆüË°åË®àÁîª„ÇíÁ´ã„Å¶„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ

<details>
<summary>Ëß£Á≠î‰æã</summary>

<strong>„Éë„É©„É°„Éº„Çø</strong>:
- ÊùêÊñôÊï∞: 5,000
- CPUÊôÇÈñì: 5,000 √ó 12ÊôÇÈñì = 60,000ÊôÇÈñì
- ‰∫àÁÆó: $1,000
- ÊúüÈñì: 3„É∂Êúà = 90Êó•

<strong>Âà∂Á¥Ñ„Åã„ÇâÈÄÜÁÆó</strong>:

„Ç≥„Çπ„ÉàÂà∂Á¥Ñ:
<pre><code>$1,000 = Ë®àÁÆó„Ç≥„Çπ„Éà + „Çπ„Éà„É¨„Éº„Ç∏„Ç≥„Çπ„Éà + Ëª¢ÈÄÅ„Ç≥„Çπ„Éà
$1,000 ‚âà $800ÔºàË®àÁÆóÔºâ + $150Ôºà„Çπ„Éà„É¨„Éº„Ç∏Ôºâ + $50ÔºàËª¢ÈÄÅÔºâ</code></pre>

c5.24xlarge „Çπ„Éù„ÉÉ„Éà: $1.22/ÊôÇ
<pre><code>‰ΩøÁî®ÂèØËÉΩÊôÇÈñì = $800 / $1.22 = 656ÊôÇÈñì
ÂêåÊôÇ„Éé„Éº„ÉâÊï∞ = 60,000 / 656 / 24 = 3.8 ‚âà 4„Éé„Éº„Éâ</code></pre>

<strong>ÂÆüË°åË®àÁîª</strong>:
1. „Çπ„Éù„ÉÉ„Éà„Ç§„É≥„Çπ„Çø„É≥„Çπ: c5.24xlarge √ó 4„Éé„Éº„Éâ
2. ÂêåÊôÇÂÆüË°å: 16ÊùêÊñôÔºàÂêÑ48„Ç≥„Ç¢Ôºâ
3. 1Êó•„ÅÇ„Åü„Çä: 16ÊùêÊñô √ó 2„Éê„ÉÉ„ÉÅ = 32ÊùêÊñô
4. ÂÆå‰∫ÜÊúüÈñì: 5,000 / 32 = 156Êó•

<strong>ÂïèÈ°å</strong>: ÊúüÈñì„Åå3„É∂ÊúàÔºà90Êó•Ôºâ„ÇíË∂ÖÈÅé

<strong>Ëß£Ê±∫Á≠ñ</strong>:
- ÂêåÊôÇ„Éé„Éº„ÉâÊï∞„Çí8„Å´Â¢óÂä† ‚Üí „Ç≥„Çπ„Éà$1,600Ôºà‰∫àÁÆóË∂ÖÈÅéÔºâ
- „Åæ„Åü„ÅØ„ÄÅ1ÊùêÊñô„ÅÇ„Åü„ÇäCPUÊôÇÈñì„Çí8ÊôÇÈñì„Å´ÂâäÊ∏õÔºàÁ≤æÂ∫¶„Å®„Éà„É¨„Éº„Éâ„Ç™„ÉïÔºâ

</details>

---

<h2>5.8 „Åæ„Å®„ÇÅ</h2>

„Åì„ÅÆÁ´†„Åß„ÅØ„ÄÅ„ÇØ„É©„Ç¶„ÉâHPC„ÅÆÊ¥ªÁî®„Å®„Ç≥„Çπ„ÉàÊúÄÈÅ©Âåñ„ÇíÂ≠¶„Å≥„Åæ„Åó„Åü„ÄÇ

<strong>„Ç≠„Éº„Éù„Ç§„É≥„Éà</strong>:

1. <strong>AWS Parallel Cluster</strong>: Â§ßË¶èÊ®°HPCÁí∞Â¢É„ÇíÁ∞°Âçò„Å´ÊßãÁØâ
2. <strong>„Çπ„Éù„ÉÉ„Éà„Ç§„É≥„Çπ„Çø„É≥„Çπ</strong>: 70%„ÅÆ„Ç≥„Çπ„ÉàÂâäÊ∏õ
3. <strong>Docker/Singularity</strong>: Áí∞Â¢É„ÅÆÂÆåÂÖ®ÂÜçÁèæ
4. <strong>„Ç≥„Çπ„ÉàÁÆ°ÁêÜ</strong>: Ë¶ãÁ©ç„ÇÇ„Çä„Å®Áõ£Ë¶ñ
5. <strong>„Çª„Ç≠„É•„É™„ÉÜ„Ç£</strong>: ÊöóÂè∑Âåñ„Å®„Ç¢„ÇØ„Çª„ÇπÂà∂Âæ°

<strong>„Ç∑„É™„Éº„Ç∫ÂÆå‰∫Ü„Åä„ÇÅ„Åß„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„ÅôÔºÅ</strong>

„Åì„Çå„Åß„ÄÅ„Éè„Ç§„Çπ„É´„Éº„Éó„ÉÉ„ÉàË®àÁÆó„ÅÆÂÖ®5Á´†„ÇíÂÆå‰∫Ü„Åó„Åæ„Åó„Åü„ÄÇÁ¨¨1Á´†„ÅÆÂü∫Á§éÊ¶ÇÂøµ„Åã„ÇâÁ¨¨5Á´†„ÅÆ„ÇØ„É©„Ç¶„ÉâÂÆüË£Ö„Åæ„Åß„ÄÅÂÆüË∑µÁöÑ„Å™„Çπ„Ç≠„É´„ÇíÁøíÂæó„Åß„Åç„Åü„ÅØ„Åö„Åß„Åô„ÄÇ

<strong>Ê¨°„ÅÆ„Çπ„ÉÜ„ÉÉ„Éó</strong>:

1. Â∞èË¶èÊ®°„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÔºà100-1000ÊùêÊñôÔºâ„ÇíÂÆüË°å
2. „Ç≥„Çπ„Éà„ÇíÊ∏¨ÂÆö„ÉªÊúÄÈÅ©Âåñ
3. ÁµêÊûú„ÇíNOMAD„Å´ÂÖ¨Èñã
4. Ë´ñÊñáÂü∑Á≠Ü„ÉªÂ≠¶‰ºöÁô∫Ë°®

<strong>[„Ç∑„É™„Éº„Ç∫„Éà„ÉÉ„Éó„Å´Êàª„Çã](./index.md)</strong>

---

<h2>ÂèÇËÄÉÊñáÁåÆ</h2>

1. Amazon Web Services (2023). "AWS Parallel Cluster User Guide." https://docs.aws.amazon.com/parallelcluster/

2. Kurtzer, G. M., et al. (2017). "Singularity: Scientific containers for mobility of compute." *PLOS ONE*, 12(5), e0177459.

3. Merkel, D. (2014). "Docker: lightweight Linux containers for consistent development and deployment." *Linux Journal*, 2014(239), 2.

4. NOMAD Laboratory (2023). "NOMAD Repository - FAIR Data Sharing." https://nomad-lab.eu/

5. Jain, A., et al. (2015). "FireWorks: a dynamic workflow system designed for high-throughput applications." *Concurrency and Computation: Practice and Experience*, 27(17), 5037-5059.

---

<strong>„É©„Ç§„Çª„É≥„Çπ</strong>: CC BY 4.0
<strong>‰ΩúÊàêÊó•</strong>: 2025-10-17
<strong>‰ΩúÊàêËÄÖ</strong>: Dr. Yusuke Hashimoto, Tohoku University

---

<strong>„Éè„Ç§„Çπ„É´„Éº„Éó„ÉÉ„ÉàË®àÁÆóÂÖ•ÈñÄ„Ç∑„É™„Éº„Ç∫„ÇíÂÆå‰∫Ü„Åó„Åæ„Åó„ÅüÔºÅ</strong>

ÊùêÊñôÊé¢Á¥¢„ÅÆÂä†ÈÄüÂåñ„ÇíÂÆüÁèæ„Åó„ÄÅ‰∏ñÁïå„Å´Ë≤¢ÁåÆ„Åô„ÇãÁ†îÁ©∂„ÇíÊúüÂæÖ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ
<div class="navigation">
    <a href="chapter-4.html" class="nav-button">‚Üê Á¨¨4Á´†</a>
    <a href="index.html" class="nav-button">„Ç∑„É™„Éº„Ç∫ÁõÆÊ¨°„Å´Êàª„Çã</a>
</div>
    </main>

    <footer>
        <p><strong>‰ΩúÊàêËÄÖ</strong>: AI Terakoya Content Team</p>
        <p><strong>Áõ£‰øÆ</strong>: Dr. Yusuke HashimotoÔºàÊù±ÂåóÂ§ßÂ≠¶Ôºâ</p>
        <p><strong>„Éê„Éº„Ç∏„Éß„É≥</strong>: 1.0 | <strong>‰ΩúÊàêÊó•</strong>: 2025-10-17</p>
        <p><strong>„É©„Ç§„Çª„É≥„Çπ</strong>: Creative Commons BY 4.0</p>
        <p>¬© 2025 AI Terakoya. All rights reserved.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const mermaidCodeBlocks = document.querySelectorAll('pre.codehilite code.language-mermaid, pre code.language-mermaid');

            mermaidCodeBlocks.forEach(function(codeBlock) {
                const pre = codeBlock.parentElement;
                const mermaidCode = codeBlock.textContent;

                const mermaidDiv = document.createElement('div');
                mermaidDiv.className = 'mermaid';
                mermaidDiv.textContent = mermaidCode.trim();

                pre.parentNode.replaceChild(mermaidDiv, pre);
            });

            if (typeof mermaid !== 'undefined') {
                mermaid.initialize({
                    startOnLoad: true,
                    theme: 'default'
                });
                mermaid.init(undefined, document.querySelectorAll('.mermaid'));
            }
        });
    </script>
</body>
</html>
