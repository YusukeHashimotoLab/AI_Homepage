<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬4ç« ï¼šç‹¬è‡ªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹ç¯‰ - AI Terakoya</title>
    <style>
        :root {
            --color-primary-900: #1a252f;
            --color-primary-700: #2c3e50;
            --color-primary-500: #34495e;
            --color-primary-300: #4a5f7a;
            --color-accent: #7b2cbf;
            --color-accent-light: #9d4edd;
            --color-bg: #ffffff;
            --color-bg-secondary: #f8f9fa;
            --color-text: #2c3e50;
            --color-text-light: #6c757d;
            --color-border: #e9ecef;
            --color-code-bg: #f8f9fa;
            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 3rem;
            --font-base: 1rem;
            --font-sm: 0.875rem;
            --font-lg: 1.125rem;
            --font-xl: 1.5rem;
            --font-2xl: 2rem;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans JP", sans-serif;
            line-height: 1.7;
            color: var(--color-text);
            background: var(--color-bg);
        }

        header {
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
            color: white;
            padding: var(--spacing-xl) var(--spacing-md);
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            max-width: 800px;
            margin: 0 auto;
        }

        header h1 {
            font-size: var(--font-2xl);
            margin-bottom: var(--spacing-sm);
            font-weight: 700;
        }

        .subtitle {
            font-size: var(--font-lg);
            opacity: 0.95;
            margin-bottom: var(--spacing-md);
        }

        .meta {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-md);
            justify-content: center;
            font-size: var(--font-sm);
            opacity: 0.9;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: var(--spacing-xl) var(--spacing-md);
        }

        h2 {
            font-size: var(--font-xl);
            color: var(--color-accent);
            margin: var(--spacing-lg) 0 var(--spacing-md) 0;
            padding-bottom: var(--spacing-xs);
            border-bottom: 2px solid var(--color-accent-light);
        }

        h3 {
            font-size: var(--font-lg);
            color: var(--color-primary-700);
            margin: var(--spacing-md) 0 var(--spacing-sm) 0;
        }

        h4 {
            font-size: var(--font-base);
            color: var(--color-primary-500);
            margin: var(--spacing-sm) 0;
        }

        p {
            margin-bottom: var(--spacing-md);
            line-height: 1.8;
        }

        ul, ol {
            margin: var(--spacing-md) 0;
            padding-left: var(--spacing-lg);
        }

        li {
            margin-bottom: var(--spacing-xs);
        }

        code {
            background: var(--color-code-bg);
            padding: 0.2em 0.4em;
            border-radius: 3px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9em;
            color: var(--color-accent);
        }

        pre {
            background: var(--color-code-bg);
            border-left: 4px solid var(--color-accent);
            padding: var(--spacing-md);
            overflow-x: auto;
            border-radius: 4px;
            margin: var(--spacing-md) 0;
        }

        pre code {
            background: none;
            padding: 0;
            color: var(--color-text);
        }

        .mermaid {
            background: white;
            padding: var(--spacing-md);
            border-radius: 8px;
            margin: var(--spacing-md) 0;
            text-align: center;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: var(--spacing-md) 0;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        th, td {
            padding: var(--spacing-sm);
            text-align: left;
            border-bottom: 1px solid var(--color-border);
        }

        th {
            background: var(--color-accent);
            color: white;
            font-weight: 600;
        }

        tr:hover {
            background: var(--color-bg-secondary);
        }

        details {
            background: var(--color-bg-secondary);
            padding: var(--spacing-md);
            border-radius: 8px;
            margin: var(--spacing-md) 0;
            border: 1px solid var(--color-border);
        }

        summary {
            cursor: pointer;
            font-weight: 600;
            color: var(--color-accent);
            padding: var(--spacing-sm);
            margin: calc(-1 * var(--spacing-md));
            margin-bottom: var(--spacing-md);
            background: white;
            border-radius: 8px 8px 0 0;
        }

        summary:hover {
            background: var(--color-bg-secondary);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            gap: var(--spacing-md);
            margin: var(--spacing-xl) 0;
            padding-top: var(--spacing-lg);
            border-top: 1px solid var(--color-border);
        }

        .btn {
            display: inline-block;
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: 6px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s;
            min-height: 44px;
            display: flex;
            align-items: center;
        }

        .btn-primary {
            background: var(--color-accent);
            color: white;
        }

        .btn-secondary {
            background: var(--color-primary-500);
            color: white;
        }

        @media (hover: hover) and (pointer: fine) {
            .btn-primary:hover {
                background: var(--color-accent-light);
                transform: translateY(-2px);
                box-shadow: 0 4px 8px rgba(123, 44, 191, 0.3);
            }

            .btn-secondary:hover {
                background: var(--color-primary-700);
                transform: translateY(-2px);
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            }
        }

        footer {
            background: var(--color-primary-900);
            color: white;
            padding: var(--spacing-lg);
            text-align: center;
            margin-top: var(--spacing-xl);
        }

        footer a {
            color: var(--color-accent-light);
            text-decoration: none;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: var(--font-xl);
            }

            .subtitle {
                font-size: var(--font-base);
            }

            .meta {
                font-size: 0.8rem;
            }

            .navigation {
                flex-direction: column;
            }
        }
    </style>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>ç¬¬4ç« ï¼šç‹¬è‡ªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹ç¯‰</h1>
            <p class="subtitle"></p>
            <div class="meta">
                <span class="meta-item">ğŸ“– èª­äº†æ™‚é–“: 15-20åˆ†</span>
                <span class="meta-item">ğŸ“Š é›£æ˜“åº¦: åˆç´šã€œä¸­ç´š</span>
                <span class="meta-item">ğŸ’» ã‚³ãƒ¼ãƒ‰ä¾‹: 10</span>
                <span class="meta-item">ğŸ“ æ¼”ç¿’å•é¡Œ: 3</span>
            </div>
        </div>
    </header>

    <main class="container">
        <p>
<h1>ç¬¬4ç« ï¼šç‹¬è‡ªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹ç¯‰</h1>
</p>
<p>
<strong>SQLiteã‹ã‚‰PostgreSQLã¾ã§ - å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ã®æ§‹é€ åŒ–ã¨å…¬é–‹</strong>
</p>
<p>
<h2>å­¦ç¿’ç›®æ¨™</h2>
</p>
<p>
ã“ã®ç« ã‚’èª­ã‚€ã“ã¨ã§ã€ä»¥ä¸‹ã‚’ç¿’å¾—ã§ãã¾ã™ï¼š
</p>
<p>
<ul><li>âœ… ææ–™ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’è¨­è¨ˆã§ãã‚‹</li>
<li>âœ… SQLiteã§å®Ÿç”¨çš„ãªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æ§‹ç¯‰ã§ãã‚‹</li>
<li>âœ… PostgreSQLã§å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã‚’ç®¡ç†ã§ãã‚‹</li>
<li>âœ… ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãŒã§ãã‚‹</li>
<li>âœ… ãƒ‡ãƒ¼ã‚¿ã‚’å…¬é–‹ã—ã€DOIã‚’å–å¾—ã§ãã‚‹</li>
</p>
<p>
<strong>èª­äº†æ™‚é–“</strong>: 15-20åˆ†
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹</strong>: 10å€‹
<strong>æ¼”ç¿’å•é¡Œ</strong>: 3å•
</p>
<p>
---
</p>
<p>
<h2>4.1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆã®åŸºç¤</h2>
</p>
<p>
<h3>4.1.1 ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆã®åŸå‰‡</h3>
</p>
<p>
ææ–™ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆã§ã¯ã€ä»¥ä¸‹ã®3ã¤ã®ä¸»è¦ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å®šç¾©ã—ã¾ã™ï¼š
</p>
<p>
1. <strong>Materialsï¼ˆææ–™ï¼‰</strong>: ææ–™ã®åŸºæœ¬æƒ…å ±
2. <strong>Propertiesï¼ˆç‰¹æ€§ï¼‰</strong>: æ¸¬å®šã•ã‚ŒãŸç‰¹æ€§ãƒ‡ãƒ¼ã‚¿
3. <strong>Experimentsï¼ˆå®Ÿé¨“ï¼‰</strong>: å®Ÿé¨“æ¡ä»¶ã¨ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
</p>
<p>
<strong>ERå›³ï¼ˆEntity-Relationship Diagramï¼‰</strong>:
</p>
<p>
<pre><code class="language-mermaid">erDiagram
    Materials ||--o{ Properties : has
    Materials ||--o{ Experiments : tested_in
    Experiments ||--o{ Properties : produces
</p>
<p>
    Materials {
        int material_id PK
        string formula
        string structure_type
        float density
        datetime created_at
    }
</p>
<p>
    Properties {
        int property_id PK
        int material_id FK
        int experiment_id FK
        string property_type
        float value
        float uncertainty
        string unit
    }
</p>
<p>
    Experiments {
        int experiment_id PK
        string experiment_type
        datetime date
        string operator
        string conditions
    }
</code></pre>
</p>
<p>
<h3>4.1.2 æ­£è¦åŒ–</h3>
</p>
<p>
<strong>ç¬¬1æ­£è¦å½¢ï¼ˆ1NFï¼‰</strong>: å„åˆ—ã¯åŸå­çš„ãªå€¤
<strong>ç¬¬2æ­£è¦å½¢ï¼ˆ2NFï¼‰</strong>: éƒ¨åˆ†é–¢æ•°å¾“å±æ€§ã‚’æ’é™¤
<strong>ç¬¬3æ­£è¦å½¢ï¼ˆ3NFï¼‰</strong>: æ¨ç§»çš„é–¢æ•°å¾“å±æ€§ã‚’æ’é™¤
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹1: ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ï¼ˆSQLiteï¼‰</strong>
</p>
<p>
<pre><code class="language-python">import sqlite3
</p>
<p>
<h1>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š</h1>
conn = sqlite3.connect('materials.db')
cursor = conn.cursor()
</p>
<p>
<h1>Materialsãƒ†ãƒ¼ãƒ–ãƒ«</h1>
cursor.execute('''
CREATE TABLE IF NOT EXISTS materials (
    material_id INTEGER PRIMARY KEY AUTOINCREMENT,
    formula TEXT NOT NULL,
    structure_type TEXT,
    density REAL,
    space_group INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    notes TEXT
)
''')
</p>
<p>
<h1>Propertiesãƒ†ãƒ¼ãƒ–ãƒ«</h1>
cursor.execute('''
CREATE TABLE IF NOT EXISTS properties (
    property_id INTEGER PRIMARY KEY AUTOINCREMENT,
    material_id INTEGER NOT NULL,
    experiment_id INTEGER,
    property_type TEXT NOT NULL,
    value REAL NOT NULL,
    uncertainty REAL,
    unit TEXT,
    measured_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (material_id) REFERENCES materials(material_id),
    FOREIGN KEY (experiment_id) REFERENCES experiments(experiment_id)
)
''')
</p>
<p>
<h1>Experimentsãƒ†ãƒ¼ãƒ–ãƒ«</h1>
cursor.execute('''
CREATE TABLE IF NOT EXISTS experiments (
    experiment_id INTEGER PRIMARY KEY AUTOINCREMENT,
    experiment_type TEXT NOT NULL,
    date DATE,
    operator TEXT,
    temperature REAL,
    pressure REAL,
    conditions TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
''')
</p>
<p>
<h1>ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆï¼ˆæ¤œç´¢é«˜é€ŸåŒ–ï¼‰</h1>
cursor.execute('''
CREATE INDEX IF NOT EXISTS idx_formula
ON materials(formula)
''')
</p>
<p>
cursor.execute('''
CREATE INDEX IF NOT EXISTS idx_property_type
ON properties(property_type)
''')
</p>
<p>
conn.commit()
print("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒä½œæˆå®Œäº†")
</code></pre>
</p>
<p>
---
</p>
<p>
<h2>4.2 SQLiteã«ã‚ˆã‚‹ãƒ­ãƒ¼ã‚«ãƒ«DB</h2>
</p>
<p>
<h3>4.2.1 CRUDæ“ä½œ</h3>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹2: Createï¼ˆãƒ‡ãƒ¼ã‚¿æŒ¿å…¥ï¼‰</strong>
</p>
<p>
<pre><code class="language-python">import sqlite3
from datetime import datetime
</p>
<p>
conn = sqlite3.connect('materials.db')
cursor = conn.cursor()
</p>
<p>
def insert_material(formula, structure_type, density):
    """ææ–™ãƒ‡ãƒ¼ã‚¿ã®æŒ¿å…¥"""
    cursor.execute('''
    INSERT INTO materials (formula, structure_type, density)
    VALUES (?, ?, ?)
    ''', (formula, structure_type, density))
</p>
<p>
    conn.commit()
    material_id = cursor.lastrowid
    print(f"ææ–™è¿½åŠ : ID={material_id}, {formula}")
    return material_id
</p>
<p>
def insert_property(
    material_id,
    property_type,
    value,
    uncertainty=None,
    unit=None
):
    """ç‰¹æ€§ãƒ‡ãƒ¼ã‚¿ã®æŒ¿å…¥"""
    cursor.execute('''
    INSERT INTO properties
    (material_id, property_type, value, uncertainty, unit)
    VALUES (?, ?, ?, ?, ?)
    ''', (material_id, property_type, value, uncertainty, unit))
</p>
<p>
    conn.commit()
    print(f"ç‰¹æ€§è¿½åŠ : {property_type}={value} {unit}")
</p>
<p>
<h1>ä½¿ç”¨ä¾‹</h1>
mat_id = insert_material("TiO2", "rutile", 4.23)
insert_property(mat_id, "band_gap", 3.0, 0.1, "eV")
insert_property(mat_id, "refractive_index", 2.61, 0.02, "")
</code></pre>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹3: Readï¼ˆãƒ‡ãƒ¼ã‚¿å–å¾—ï¼‰</strong>
</p>
<p>
<pre><code class="language-python">def query_materials(formula_pattern=None):
    """ææ–™æ¤œç´¢"""
    if formula_pattern:
        cursor.execute('''
        SELECT * FROM materials
        WHERE formula LIKE ?
        ''', (f"%{formula_pattern}%",))
    else:
        cursor.execute('SELECT * FROM materials')
</p>
<p>
    results = cursor.fetchall()
</p>
<p>
    print(f"æ¤œç´¢çµæœ: {len(results)}ä»¶")
    for row in results:
        print(f"ID: {row[0]}, Formula: {row[1]}, "
              f"Type: {row[2]}, Density: {row[3]}")
</p>
<p>
    return results
</p>
<p>
def query_properties(material_id):
    """ç‰¹æ€§ãƒ‡ãƒ¼ã‚¿å–å¾—"""
    cursor.execute('''
    SELECT p.property_type, p.value, p.uncertainty, p.unit
    FROM properties p
    WHERE p.material_id = ?
    ''', (material_id,))
</p>
<p>
    results = cursor.fetchall()
</p>
<p>
    print(f"\nææ–™ID {material_id} ã®ç‰¹æ€§:")
    for row in results:
        prop_type, value, unc, unit = row
        if unc:
            print(f"- {prop_type}: {value} Â± {unc} {unit}")
        else:
            print(f"- {prop_type}: {value} {unit}")
</p>
<p>
    return results
</p>
<p>
<h1>ä½¿ç”¨ä¾‹</h1>
query_materials("TiO2")
query_properties(1)
</code></pre>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹4: Updateï¼ˆãƒ‡ãƒ¼ã‚¿æ›´æ–°ï¼‰</strong>
</p>
<p>
<pre><code class="language-python">def update_material(material_id, **kwargs):
    """ææ–™ãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°"""
    set_clause = ", ".join(
        [f"{key} = ?" for key in kwargs.keys()]
    )
    values = list(kwargs.values()) + [material_id]
</p>
<p>
    cursor.execute(f'''
    UPDATE materials
    SET {set_clause}
    WHERE material_id = ?
    ''', values)
</p>
<p>
    conn.commit()
    print(f"ææ–™ID {material_id} ã‚’æ›´æ–°ã—ã¾ã—ãŸ")
</p>
<p>
<h1>ä½¿ç”¨ä¾‹</h1>
update_material(1, density=4.24, notes="Updated density")
</code></pre>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹5: Deleteï¼ˆãƒ‡ãƒ¼ã‚¿å‰Šé™¤ï¼‰</strong>
</p>
<p>
<pre><code class="language-python">def delete_material(material_id):
    """ææ–™ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤ï¼ˆã‚«ã‚¹ã‚±ãƒ¼ãƒ‰ï¼‰"""
    # é–¢é€£ã™ã‚‹ç‰¹æ€§ãƒ‡ãƒ¼ã‚¿ã‚‚å‰Šé™¤
    cursor.execute('''
    DELETE FROM properties WHERE material_id = ?
    ''', (material_id,))
</p>
<p>
    cursor.execute('''
    DELETE FROM materials WHERE material_id = ?
    ''', (material_id,))
</p>
<p>
    conn.commit()
    print(f"ææ–™ID {material_id} ã‚’å‰Šé™¤ã—ã¾ã—ãŸ")
</p>
<p>
<h1>ä½¿ç”¨ä¾‹ï¼ˆæ…é‡ã«ä½¿ç”¨ï¼‰</h1>
<h1>delete_material(1)</h1>
</code></pre>
</p>
<p>
---
</p>
<p>
<h2>4.3 PostgreSQL/MySQLã§ã®å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ç®¡ç†</h2>
</p>
<p>
<h3>4.3.1 PostgreSQLæ¥ç¶š</h3>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹6: PostgreSQLæ¥ç¶šã¨ã‚¹ã‚­ãƒ¼ãƒä½œæˆ</strong>
</p>
<p>
<pre><code class="language-python">import psycopg2
from psycopg2 import sql
</p>
<p>
<h1>PostgreSQLæ¥ç¶š</h1>
conn = psycopg2.connect(
    host="localhost",
    database="materials_db",
    user="your_username",
    password="your_password"
)
</p>
<p>
cursor = conn.cursor()
</p>
<p>
<h1>ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆï¼ˆPostgreSQLç‰ˆï¼‰</h1>
cursor.execute('''
CREATE TABLE IF NOT EXISTS materials (
    material_id SERIAL PRIMARY KEY,
    formula VARCHAR(100) NOT NULL,
    structure_type VARCHAR(50),
    density REAL,
    space_group INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    notes TEXT,
    UNIQUE(formula)
)
''')
</p>
<p>
cursor.execute('''
CREATE TABLE IF NOT EXISTS properties (
    property_id SERIAL PRIMARY KEY,
    material_id INTEGER NOT NULL,
    experiment_id INTEGER,
    property_type VARCHAR(50) NOT NULL,
    value REAL NOT NULL,
    uncertainty REAL,
    unit VARCHAR(20),
    measured_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (material_id)
        REFERENCES materials(material_id)
        ON DELETE CASCADE,
    FOREIGN KEY (experiment_id)
        REFERENCES experiments(experiment_id)
        ON DELETE SET NULL
)
''')
</p>
<p>
<h1>GINã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆå…¨æ–‡æ¤œç´¢ç”¨ï¼‰</h1>
cursor.execute('''
CREATE INDEX IF NOT EXISTS idx_formula_gin
ON materials USING GIN (to_tsvector('english', formula))
''')
</p>
<p>
conn.commit()
print("PostgreSQLã‚¹ã‚­ãƒ¼ãƒä½œæˆå®Œäº†")
</code></pre>
</p>
<p>
<h3>4.3.2 ãƒãƒ«ã‚¯ã‚¤ãƒ³ã‚µãƒ¼ãƒˆ</h3>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹7: å¤§é‡ãƒ‡ãƒ¼ã‚¿ã®åŠ¹ç‡çš„æŒ¿å…¥</strong>
</p>
<p>
<pre><code class="language-python">import pandas as pd
from psycopg2.extras import execute_batch
</p>
<p>
def bulk_insert_materials(df):
    """DataFrameã‹ã‚‰ä¸€æ‹¬æŒ¿å…¥"""
    data = [
        (
            row['formula'],
            row['structure_type'],
            row['density']
        )
        for _, row in df.iterrows()
    ]
</p>
<p>
    insert_query = '''
    INSERT INTO materials (formula, structure_type, density)
    VALUES (%s, %s, %s)
    ON CONFLICT (formula) DO NOTHING
    '''
</p>
<p>
    execute_batch(cursor, insert_query, data, page_size=1000)
    conn.commit()
</p>
<p>
    print(f"{len(data)}ä»¶ã®ãƒ‡ãƒ¼ã‚¿ã‚’æŒ¿å…¥ã—ã¾ã—ãŸ")
</p>
<p>
<h1>ä½¿ç”¨ä¾‹</h1>
df = pd.DataFrame({
    'formula': ['TiO2', 'ZnO', 'GaN', 'SiC'],
    'structure_type': ['rutile', 'wurtzite', 'wurtzite', 'zincblende'],
    'density': [4.23, 5.61, 6.15, 3.21]
})
</p>
<p>
bulk_insert_materials(df)
</code></pre>
</p>
<p>
---
</p>
<p>
<h2>4.4 ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆ¦ç•¥</h2>
</p>
<p>
<h3>4.4.1 å®šæœŸãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—</h3>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹8: è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ</strong>
</p>
<p>
<pre><code class="language-python">import sqlite3
import shutil
from datetime import datetime
import os
</p>
<p>
class DatabaseBackup:
    """ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç®¡ç†"""
</p>
<p>
    def __init__(self, db_path, backup_dir="backups"):
        self.db_path = db_path
        self.backup_dir = backup_dir
        os.makedirs(backup_dir, exist_ok=True)
</p>
<p>
    def create_backup(self):
        """ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ"""
        timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
        backup_name = f"materials_db_{timestamp}.db"
        backup_path = os.path.join(
            self.backup_dir, backup_name
        )
</p>
<p>
        # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ã‚³ãƒ”ãƒ¼
        shutil.copy2(self.db_path, backup_path)
</p>
<p>
        # åœ§ç¸®ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
        import gzip
        with open(backup_path, 'rb') as f_in:
            with gzip.open(f"{backup_path}.gz", 'wb') as f_out:
                shutil.copyfileobj(f_in, f_out)
</p>
<p>
        os.remove(backup_path)  # éåœ§ç¸®ç‰ˆã‚’å‰Šé™¤
</p>
<p>
        print(f"ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ: {backup_path}.gz")
        return f"{backup_path}.gz"
</p>
<p>
    def restore_backup(self, backup_file):
        """ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©å…ƒ"""
        import gzip
</p>
<p>
        # è§£å‡
        temp_db = "temp_restored.db"
        with gzip.open(backup_file, 'rb') as f_in:
            with open(temp_db, 'wb') as f_out:
                shutil.copyfileobj(f_in, f_out)
</p>
<p>
        # ç¾åœ¨ã®DBã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
        self.create_backup()
</p>
<p>
        # å¾©å…ƒ
        shutil.move(temp_db, self.db_path)
        print(f"ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å¾©å…ƒå®Œäº†: {backup_file}")
</p>
<p>
    def list_backups(self):
        """ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä¸€è¦§"""
        backups = sorted(
            [f for f in os.listdir(self.backup_dir)
             if f.endswith('.gz')]
        )
</p>
<p>
        print("=== ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä¸€è¦§ ===")
        for i, backup in enumerate(backups, 1):
            size = os.path.getsize(
                os.path.join(self.backup_dir, backup)
            ) / 1024  # KB
            print(f"{i}. {backup} ({size:.1f} KB)")
</p>
<p>
        return backups
</p>
<p>
<h1>ä½¿ç”¨ä¾‹</h1>
backup_mgr = DatabaseBackup('materials.db')
backup_mgr.create_backup()
backup_mgr.list_backups()
</code></pre>
</p>
<p>
<h3>4.4.2 ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ï¼ˆGit LFSï¼‰</h3>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹9: Git LFSã§ãƒ‡ãƒ¼ã‚¿ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†</strong>
</p>
<p>
<pre><code class="language-bash"># Git LFSã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
git lfs install
</p>
<p>
<h1>å¤§å®¹é‡ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½è·¡</h1>
git lfs track "*.db"
git lfs track "*.db.gz"
</p>
<p>
<h1>.gitattributesã«è‡ªå‹•è¿½åŠ ã•ã‚Œã‚‹</h1>
cat .gitattributes
<h1>*.db filter=lfs diff=lfs merge=lfs -text</h1>
<h1>*.db.gz filter=lfs diff=lfs merge=lfs -text</h1>
</p>
<p>
<h1>ã‚³ãƒŸãƒƒãƒˆ</h1>
git add materials.db .gitattributes
git commit -m "Add materials database"
git push origin main
</code></pre>
</p>
<p>
---
</p>
<p>
<h2>4.5 ãƒ‡ãƒ¼ã‚¿å…¬é–‹ã¨DOIå–å¾—</h2>
</p>
<p>
<h3>4.5.1 Zenodoã¸ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</h3>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹10: Zenodo APIã§ãƒ‡ãƒ¼ã‚¿å…¬é–‹</strong>
</p>
<p>
<pre><code class="language-python">import requests
import json
</p>
<p>
ZENODO_TOKEN = "your_zenodo_token"
ZENODO_URL = "https://zenodo.org/api/deposit/depositions"
</p>
<p>
def create_zenodo_deposit(
    title,
    description,
    creators,
    keywords
):
    """Zenodoã«ãƒ‡ãƒã‚¸ãƒƒãƒˆä½œæˆ"""
</p>
<p>
    headers = {
        "Content-Type": "application/json"
    }
    params = {"access_token": ZENODO_TOKEN}
</p>
<p>
    # ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
    data = {
        "metadata": {
            "title": title,
            "upload_type": "dataset",
            "description": description,
            "creators": creators,
            "keywords": keywords,
            "access_right": "open",
            "license": "cc-by-4.0"
        }
    }
</p>
<p>
    # ãƒ‡ãƒã‚¸ãƒƒãƒˆä½œæˆ
    response = requests.post(
        ZENODO_URL,
        params=params,
        json=data,
        headers=headers
    )
</p>
<p>
    if response.status_code == 201:
        deposition = response.json()
        deposition_id = deposition['id']
        bucket_url = deposition['links']['bucket']
</p>
<p>
        print(f"ãƒ‡ãƒã‚¸ãƒƒãƒˆä½œæˆæˆåŠŸ: ID={deposition_id}")
        return deposition_id, bucket_url
    else:
        print(f"ã‚¨ãƒ©ãƒ¼: {response.status_code}")
        print(response.text)
        return None, None
</p>
<p>
def upload_file_to_zenodo(bucket_url, file_path):
    """ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰"""
    params = {"access_token": ZENODO_TOKEN}
</p>
<p>
    with open(file_path, 'rb') as f:
        response = requests.put(
            f"{bucket_url}/{os.path.basename(file_path)}",
            params=params,
            data=f
        )
</p>
<p>
    if response.status_code == 200:
        print(f"ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æˆåŠŸ: {file_path}")
        return True
    else:
        print(f"ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼: {response.status_code}")
        return False
</p>
<p>
def publish_zenodo_deposit(deposition_id):
    """ãƒ‡ãƒã‚¸ãƒƒãƒˆå…¬é–‹ï¼ˆDOIå–å¾—ï¼‰"""
    params = {"access_token": ZENODO_TOKEN}
    url = f"{ZENODO_URL}/{deposition_id}/actions/publish"
</p>
<p>
    response = requests.post(url, params=params)
</p>
<p>
    if response.status_code == 202:
        result = response.json()
        doi = result['doi']
        print(f"å…¬é–‹æˆåŠŸï¼ DOI: {doi}")
        return doi
    else:
        print(f"å…¬é–‹ã‚¨ãƒ©ãƒ¼: {response.status_code}")
        return None
</p>
<p>
<h1>ä½¿ç”¨ä¾‹</h1>
deposition_id, bucket_url = create_zenodo_deposit(
    title="Materials Database - Experimental Data",
    description="Experimental materials properties dataset",
    creators=[
        {"name": "Hashimoto, Yusuke",
         "affiliation": "Tohoku University"}
    ],
    keywords=["materials science", "database",
              "properties"]
)
</p>
<p>
if deposition_id:
    # ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
    upload_file_to_zenodo(bucket_url, "materials.db.gz")
</p>
<p>
    # å…¬é–‹ï¼ˆDOIå–å¾—ï¼‰
    doi = publish_zenodo_deposit(deposition_id)
    print(f"\nDOI: https://doi.org/{doi}")
</code></pre>
</p>
<p>
---
</p>
<p>
<h2>4.6 å®Ÿè·µãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</h2>
</p>
<p>
<h3>4.6.1 å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ã®æ§‹é€ åŒ–</h3>
</p>
<p>
<pre><code class="language-mermaid">flowchart LR
    A[å®Ÿé¨“ãƒãƒ¼ãƒˆ] --> B[Excelãƒ‡ãƒ¼ã‚¿]
    B --> C[pandas DataFrame]
    C --> D[ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°]
    D --> E[SQLiteã«æŒ¿å…¥]
    E --> F[å“è³ªãƒã‚§ãƒƒã‚¯]
    F --> G[PostgreSQLã«ç§»è¡Œ]
    G --> H[Zenodoã«å…¬é–‹]
    H --> I[DOIå–å¾—]
</p>
<p>
    style A fill:#e3f2fd
    style I fill:#e8f5e9
</code></pre>
</p>
<p>
---
</p>
<p>
<h2>4.7 æœ¬ç« ã®ã¾ã¨ã‚</h2>
</p>
<p>
<h3>å­¦ã‚“ã ã“ã¨</h3>
</p>
<p>
1. <strong>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ</strong>
   - ERå›³ã«ã‚ˆã‚‹ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆ
   - æ­£è¦åŒ–ï¼ˆ1NFã€2NFã€3NFï¼‰
   - ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æˆ¦ç•¥
</p>
<p>
2. <strong>SQLiteå®Ÿè£…</strong>
   - CRUDæ“ä½œï¼ˆCreateã€Readã€Updateã€Deleteï¼‰
   - ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†
   - ã‚¯ã‚¨ãƒªæœ€é©åŒ–
</p>
<p>
3. <strong>PostgreSQL</strong>
   - å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿å¯¾å¿œ
   - ãƒãƒ«ã‚¯ã‚¤ãƒ³ã‚µãƒ¼ãƒˆ
   - å…¨æ–‡æ¤œç´¢ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
</p>
<p>
4. <strong>ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—</strong>
   - å®šæœŸãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è‡ªå‹•åŒ–
   - åœ§ç¸®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
   - Git LFSã«ã‚ˆã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
</p>
<p>
5. <strong>ãƒ‡ãƒ¼ã‚¿å…¬é–‹</strong>
   - Zenodo APIã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
   - DOIå–å¾—
   - ã‚ªãƒ¼ãƒ—ãƒ³ãƒ©ã‚¤ã‚»ãƒ³ã‚¹é¸æŠ
</p>
<p>
<h3>é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ</h3>
</p>
<p>
<li>âœ… ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆã¯æœ€åˆãŒè‚å¿ƒ</li>
<li>âœ… SQLiteã¯å°ã€œä¸­è¦æ¨¡ã«æœ€é©</li>
<li>âœ… PostgreSQLã¯å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã«å¯¾å¿œ</li>
<li>âœ… ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¯å¿…é ˆï¼ˆ3-2-1ãƒ«ãƒ¼ãƒ«ï¼‰</li>
<li>âœ… ãƒ‡ãƒ¼ã‚¿å…¬é–‹ã§DOIå–å¾—ã€å¼•ç”¨å¯èƒ½ã«</li>
</p>
<p>
<h3>ã‚·ãƒªãƒ¼ã‚ºå®Œäº†ï¼</h3>
</p>
<p>
ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼ææ–™ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ´»ç”¨å…¥é–€ã‚·ãƒªãƒ¼ã‚ºã‚’å®Œäº†ã—ã¾ã—ãŸã€‚
</p>
<p>
<strong>ç¿’å¾—ã—ãŸã‚¹ã‚­ãƒ«</strong>:
<li>4å¤§ææ–™ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ´»ç”¨</li>
<li>Materials Project APIã®å®Œå…¨ãƒã‚¹ã‚¿ãƒ¼</li>
<li>è¤‡æ•°DBã®çµ±åˆã¨ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°</li>
<li>ç‹¬è‡ªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ§‹ç¯‰ã¨å…¬é–‹</li>
</p>
<p>
<strong>æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</strong>:
<li><a href="../mi-introduction/index.md">MIå…¥é–€ã‚·ãƒªãƒ¼ã‚º</a>ã§æ©Ÿæ¢°å­¦ç¿’ã‚’å­¦ã¶</li>
<li><a href="../bayesian-optimization/index.md">ãƒ™ã‚¤ã‚ºæœ€é©åŒ–å…¥é–€</a>ã§åŠ¹ç‡çš„æ¢ç´¢</li>
<li>ç‹¬è‡ªã®ç ”ç©¶ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¿œç”¨</li>
</p>
<p>
<strong><a href="./index.md">â† ã‚·ãƒªãƒ¼ã‚ºç›®æ¬¡ã«æˆ»ã‚‹</a></strong>
</p>
<p>
---
</p>
<p>
<h2>æ¼”ç¿’å•é¡Œ</h2>
</p>
<p>
<h3>å•é¡Œ1ï¼ˆé›£æ˜“åº¦ï¼šeasyï¼‰</h3>
</p>
<p>
SQLiteã§ææ–™ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’æŒ¿å…¥ã—ã¦ãã ã•ã„ã€‚
</p>
<p>
<strong>ãƒ‡ãƒ¼ã‚¿</strong>:
<li>TiO2: rutile, å¯†åº¦4.23 g/cmÂ³, ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—3.0 eV</li>
<li>ZnO: wurtzite, å¯†åº¦5.61 g/cmÂ³, ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—3.4 eV</li></ul>
</p>
<p>
<strong>è¦æ±‚äº‹é …</strong>:
1. materialsã€propertiesãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
2. ãƒ‡ãƒ¼ã‚¿æŒ¿å…¥
3. å…¨ãƒ‡ãƒ¼ã‚¿å–å¾—ã—ã¦è¡¨ç¤º
</p>
<p>
<details>
<summary>è§£ç­”ä¾‹</summary>
</p>
<p>
<pre><code class="language-python">import sqlite3
</p>
<p>
conn = sqlite3.connect('materials_practice.db')
cursor = conn.cursor()
</p>
<p>
<h1>ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ</h1>
cursor.execute('''
CREATE TABLE materials (
    material_id INTEGER PRIMARY KEY,
    formula TEXT,
    structure_type TEXT,
    density REAL
)
''')
</p>
<p>
cursor.execute('''
CREATE TABLE properties (
    property_id INTEGER PRIMARY KEY,
    material_id INTEGER,
    property_type TEXT,
    value REAL,
    unit TEXT,
    FOREIGN KEY (material_id) REFERENCES materials(material_id)
)
''')
</p>
<p>
<h1>ãƒ‡ãƒ¼ã‚¿æŒ¿å…¥</h1>
materials_data = [
    ('TiO2', 'rutile', 4.23),
    ('ZnO', 'wurtzite', 5.61)
]
</p>
<p>
for formula, struct, density in materials_data:
    cursor.execute('''
    INSERT INTO materials (formula, structure_type, density)
    VALUES (?, ?, ?)
    ''', (formula, struct, density))
</p>
<p>
<h1>ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—è¿½åŠ </h1>
cursor.execute('''
INSERT INTO properties (material_id, property_type, value, unit)
VALUES (1, 'band_gap', 3.0, 'eV')
''')
</p>
<p>
cursor.execute('''
INSERT INTO properties (material_id, property_type, value, unit)
VALUES (2, 'band_gap', 3.4, 'eV')
''')
</p>
<p>
conn.commit()
</p>
<p>
<h1>ãƒ‡ãƒ¼ã‚¿å–å¾—</h1>
cursor.execute('''
SELECT m.formula, m.structure_type, m.density, p.value
FROM materials m
JOIN properties p ON m.material_id = p.material_id
WHERE p.property_type = 'band_gap'
''')
</p>
<p>
print("=== ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å†…å®¹ ===")
for row in cursor.fetchall():
    print(f"{row[0]}: {row[1]}, {row[2]} g/cmÂ³, "
          f"Eg={row[3]} eV")
</p>
<p>
conn.close()
</code></pre>
</p>
<p>
</details>
</p>
<p>
---
</p>
<p>
<h3>å•é¡Œ2ï¼ˆé›£æ˜“åº¦ï¼šmediumï¼‰</h3>
</p>
<p>
ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã—ã¦ãã ã•ã„ã€‚
</p>
<p>
<strong>è¦æ±‚äº‹é …</strong>:
1. æ—¥æ¬¡ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ˆåœ§ç¸®ï¼‰
2. æœ€æ–°5ä¸–ä»£ã®ã¿ä¿æŒ
3. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä¸€è¦§è¡¨ç¤ºæ©Ÿèƒ½
</p>
<p>
<details>
<summary>è§£ç­”ä¾‹</summary>
</p>
<p>
<pre><code class="language-python">import os
import shutil
import gzip
from datetime import datetime
</p>
<p>
class BackupManager:
    def __init__(self, db_path, backup_dir="backups",
                 max_backups=5):
        self.db_path = db_path
        self.backup_dir = backup_dir
        self.max_backups = max_backups
        os.makedirs(backup_dir, exist_ok=True)
</p>
<p>
    def create_backup(self):
        """ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ"""
        timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
        backup_name = f"backup_{timestamp}.db.gz"
        backup_path = os.path.join(self.backup_dir,
                                   backup_name)
</p>
<p>
        # åœ§ç¸®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
        with open(self.db_path, 'rb') as f_in:
            with gzip.open(backup_path, 'wb') as f_out:
                shutil.copyfileobj(f_in, f_out)
</p>
<p>
        print(f"ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ: {backup_name}")
</p>
<p>
        # å¤ã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å‰Šé™¤
        self.cleanup_old_backups()
</p>
<p>
    def cleanup_old_backups(self):
        """å¤ã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å‰Šé™¤"""
        backups = sorted(
            [f for f in os.listdir(self.backup_dir)
             if f.endswith('.db.gz')]
        )
</p>
<p>
        if len(backups) > self.max_backups:
            to_delete = backups[:-self.max_backups]
            for backup in to_delete:
                os.remove(
                    os.path.join(self.backup_dir, backup)
                )
                print(f"å‰Šé™¤: {backup}")
</p>
<p>
    def list_backups(self):
        """ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä¸€è¦§"""
        backups = sorted(
            [f for f in os.listdir(self.backup_dir)
             if f.endswith('.db.gz')]
        )
</p>
<p>
        print("=== ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä¸€è¦§ ===")
        for backup in backups:
            size = os.path.getsize(
                os.path.join(self.backup_dir, backup)
            ) / 1024
            print(f"{backup} ({size:.1f} KB)")
</p>
<p>
<h1>ä½¿ç”¨ä¾‹</h1>
backup_mgr = BackupManager('materials_practice.db',
                           max_backups=5)
backup_mgr.create_backup()
backup_mgr.list_backups()
</code></pre>
</p>
<p>
</details>
</p>
<p>
---
</p>
<p>
<h3>å•é¡Œ3ï¼ˆé›£æ˜“åº¦ï¼šhardï¼‰</h3>
</p>
<p>
å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ã‚’SQLiteã«æ ¼ç´ã—ã€Zenodoã«å…¬é–‹ã™ã‚‹å®Œå…¨ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æ§‹ç¯‰ã—ã¦ãã ã•ã„ã€‚
</p>
<p>
<strong>è¦æ±‚äº‹é …</strong>:
1. Excelãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
2. SQLiteã«æ ¼ç´
3. ãƒ‡ãƒ¼ã‚¿å“è³ªãƒã‚§ãƒƒã‚¯
4. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ
5. Zenodoãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æº–å‚™ï¼ˆå…¬é–‹ã¯ä»»æ„ï¼‰
</p>
<p>
<details>
<summary>è§£ç­”ä¾‹</summary>
</p>
<p>
<pre><code class="language-python">import pandas as pd
import sqlite3
import json
from datetime import datetime
</p>
<p>
class ExperimentalDataPipeline:
    """å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿å…¬é–‹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³"""
</p>
<p>
    def __init__(self, db_path='experimental_data.db'):
        self.db_path = db_path
        self.conn = sqlite3.connect(db_path)
        self.setup_database()
</p>
<p>
    def setup_database(self):
        """ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–"""
        cursor = self.conn.cursor()
</p>
<p>
        cursor.execute('''
        CREATE TABLE IF NOT EXISTS experiments (
            experiment_id INTEGER PRIMARY KEY,
            material_formula TEXT,
            experiment_type TEXT,
            date DATE,
            operator TEXT
        )
        ''')
</p>
<p>
        cursor.execute('''
        CREATE TABLE IF NOT EXISTS measurements (
            measurement_id INTEGER PRIMARY KEY,
            experiment_id INTEGER,
            property_type TEXT,
            value REAL,
            uncertainty REAL,
            unit TEXT,
            FOREIGN KEY (experiment_id)
                REFERENCES experiments(experiment_id)
        )
        ''')
</p>
<p>
        self.conn.commit()
</p>
<p>
    def load_excel_data(self, file_path):
        """Excelã‹ã‚‰ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿"""
        df = pd.read_excel(file_path)
        print(f"ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿: {len(df)}ä»¶")
        return df
</p>
<p>
    def insert_data(self, df):
        """ãƒ‡ãƒ¼ã‚¿æŒ¿å…¥"""
        cursor = self.conn.cursor()
</p>
<p>
        for _, row in df.iterrows():
            # å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿æŒ¿å…¥
            cursor.execute('''
            INSERT INTO experiments
            (material_formula, experiment_type, date, operator)
            VALUES (?, ?, ?, ?)
            ''', (
                row['formula'],
                row['experiment_type'],
                row['date'],
                row['operator']
            ))
</p>
<p>
            exp_id = cursor.lastrowid
</p>
<p>
            # æ¸¬å®šå€¤æŒ¿å…¥
            cursor.execute('''
            INSERT INTO measurements
            (experiment_id, property_type, value,
             uncertainty, unit)
            VALUES (?, ?, ?, ?, ?)
            ''', (
                exp_id,
                row['property'],
                row['value'],
                row.get('uncertainty'),
                row['unit']
            ))
</p>
<p>
        self.conn.commit()
        print(f"{len(df)}ä»¶ã®ãƒ‡ãƒ¼ã‚¿ã‚’æŒ¿å…¥")
</p>
<p>
    def quality_check(self):
        """å“è³ªãƒã‚§ãƒƒã‚¯"""
        cursor = self.conn.cursor()
</p>
<p>
        # ãƒ‡ãƒ¼ã‚¿ä»¶æ•°
        cursor.execute('SELECT COUNT(*) FROM experiments')
        exp_count = cursor.fetchone()[0]
</p>
<p>
        cursor.execute('SELECT COUNT(*) FROM measurements')
        meas_count = cursor.fetchone()[0]
</p>
<p>
        # æ¬ æå€¤ãƒã‚§ãƒƒã‚¯
        cursor.execute('''
        SELECT COUNT(*) FROM measurements
        WHERE uncertainty IS NULL
        ''')
        missing_unc = cursor.fetchone()[0]
</p>
<p>
        print("=== å“è³ªãƒ¬ãƒãƒ¼ãƒˆ ===")
        print(f"å®Ÿé¨“æ•°: {exp_count}")
        print(f"æ¸¬å®šæ•°: {meas_count}")
        print(f"ä¸ç¢ºã‹ã•æ¬ æ: {missing_unc}ä»¶")
</p>
<p>
    def prepare_zenodo_metadata(self, output_file='zenodo_metadata.json'):
        """Zenodoãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æº–å‚™"""
        metadata = {
            "title": "Experimental Materials Database",
            "upload_type": "dataset",
            "description": "Experimental data from lab measurements",
            "creators": [
                {
                    "name": "Your Name",
                    "affiliation": "Your Institution"
                }
            ],
            "keywords": [
                "materials science",
                "experimental data",
                "properties"
            ],
            "access_right": "open",
            "license": "cc-by-4.0",
            "version": "1.0",
            "publication_date": datetime.now().strftime("%Y-%m-%d")
        }
</p>
<p>
        with open(output_file, 'w') as f:
            json.dump(metadata, f, indent=2)
</p>
<p>
        print(f"ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä¿å­˜: {output_file}")
</p>
<p>
    def run(self, excel_file):
        """ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å®Ÿè¡Œ"""
        print("=== å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿å…¬é–‹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ ===")
</p>
<p>
        # ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
        df = self.load_excel_data(excel_file)
</p>
<p>
        # ãƒ‡ãƒ¼ã‚¿æŒ¿å…¥
        self.insert_data(df)
</p>
<p>
        # å“è³ªãƒã‚§ãƒƒã‚¯
        self.quality_check()
</p>
<p>
        # ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
        backup_mgr = BackupManager(self.db_path)
        backup_mgr.create_backup()
</p>
<p>
        # Zenodoãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æº–å‚™
        self.prepare_zenodo_metadata()
</p>
<p>
        print("\n=== å®Œäº† ===")
        print("æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:")
        print("1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç¢ºèª")
        print("2. Zenodoã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰")
        print("3. DOIå–å¾—")
</p>
<p>
<h1>ä½¿ç”¨ä¾‹ï¼ˆExcelãƒ•ã‚¡ã‚¤ãƒ«ãŒå¿…è¦ï¼‰</h1>
<h1>pipeline = ExperimentalDataPipeline()</h1>
<h1>pipeline.run('experimental_data.xlsx')</h1>
</code></pre>
</p>
<p>
</details>
</p>
<p>
---
</p>
<p>
<h2>å‚è€ƒæ–‡çŒ®</h2>
</p>
<p>
1. Wilkinson, M. D. et al. (2016). "The FAIR Guiding Principles." <em>Scientific Data</em>, 3, 160018.
   DOI: <a href="https://doi.org/10.1038/sdata.2016.18">10.1038/sdata.2016.18</a>
</p>
<p>
2. Zenodo Documentation. "Developers." URL: <a href="https://developers.zenodo.org">developers.zenodo.org</a>
</p>
<p>
3. SQLite Documentation. URL: <a href="https://sqlite.org/docs.html">sqlite.org/docs</a>
</p>
<p>
4. PostgreSQL Documentation. URL: <a href="https://www.postgresql.org/docs/">postgresql.org/docs</a>
</p>
<p>
---
</p>
<p>
<h2>ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³</h2>
</p>
<p>
<h3>å‰ã®ç« </h3>
<strong><a href="./chapter-3.md">ç¬¬3ç« ï¼šãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆã¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ â†</a></strong>
</p>
<p>
<h3>ã‚·ãƒªãƒ¼ã‚ºç›®æ¬¡</h3>
<strong><a href="./index.md">â† ã‚·ãƒªãƒ¼ã‚ºç›®æ¬¡ã«æˆ»ã‚‹</a></strong>
</p>
<p>
---
</p>
<p>
<h2>è‘—è€…æƒ…å ±</h2>
</p>
<p>
<strong>ä½œæˆè€…</strong>: AI Terakoya Content Team
<strong>ç›£ä¿®</strong>: Dr. Yusuke Hashimotoï¼ˆæ±åŒ—å¤§å­¦ï¼‰
<strong>ä½œæˆæ—¥</strong>: 2025-10-17
<strong>ãƒãƒ¼ã‚¸ãƒ§ãƒ³</strong>: 1.0
</p>
<p>
<strong>ãƒ©ã‚¤ã‚»ãƒ³ã‚¹</strong>: Creative Commons BY 4.0
</p>
<p>
---
</p>
<p>
<strong>ææ–™ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ´»ç”¨å…¥é–€ã‚·ãƒªãƒ¼ã‚ºã‚’å®Œäº†ã—ã¾ã—ãŸï¼ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼</strong>
</p>
<p>
<strong>æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</strong>: <a href="../mi-introduction/index.md">MIå…¥é–€ã‚·ãƒªãƒ¼ã‚º</a>ã§æ©Ÿæ¢°å­¦ç¿’ã®ä¸–ç•Œã¸

</p>

        <div class="navigation">
            <div>
                <a href="chapter-3.html" class="btn btn-secondary">â† å‰ã¸</a>
                <a href="index.html" class="btn btn-secondary">ç›®æ¬¡ã¸</a>
            </div>
            <div>
                
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 AI Terakoya - Tohoku University. All rights reserved.</p>
        <p><a href="https://ai.tohoku.ac.jp">AI Terakoya Home</a></p>
    </footer>
</body>
</html>