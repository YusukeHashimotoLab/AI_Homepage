<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Á¨¨2Á´†ÔºöMaterials ProjectÂÆåÂÖ®„Ç¨„Ç§„Éâ - AI Terakoya</title>

    <style>
        :root {
            --color-primary: #2c3e50;
            --color-primary-dark: #1a252f;
            --color-accent: #7b2cbf;
            --color-accent-light: #9d4edd;
            --color-text: #2d3748;
            --color-text-light: #4a5568;
            --color-bg: #ffffff;
            --color-bg-alt: #f7fafc;
            --color-border: #e2e8f0;
            --color-code-bg: #f8f9fa;
            --color-link: #3182ce;
            --color-link-hover: #2c5aa0;

            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 3rem;

            --font-body: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            --font-mono: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;

            --border-radius: 8px;
            --box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            line-height: 1.7;
            color: var(--color-text);
            background-color: var(--color-bg);
            font-size: 16px;
        }

        header {
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
            color: white;
            padding: var(--spacing-xl) var(--spacing-md);
            margin-bottom: var(--spacing-xl);
            box-shadow: var(--box-shadow);
        }

        .header-content {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: var(--spacing-sm);
            line-height: 1.2;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.95;
            font-weight: 400;
            margin-bottom: var(--spacing-md);
        }

        .meta {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-md);
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 var(--spacing-md) var(--spacing-xl);
        }

        h2 {
            font-size: 1.75rem;
            color: var(--color-primary);
            margin-top: var(--spacing-xl);
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-xs);
            border-bottom: 3px solid var(--color-accent);
        }

        h3 {
            font-size: 1.4rem;
            color: var(--color-primary);
            margin-top: var(--spacing-lg);
            margin-bottom: var(--spacing-sm);
        }

        h4 {
            font-size: 1.1rem;
            color: var(--color-primary-dark);
            margin-top: var(--spacing-md);
            margin-bottom: var(--spacing-sm);
        }

        p {
            margin-bottom: var(--spacing-md);
            color: var(--color-text);
        }

        a {
            color: var(--color-link);
            text-decoration: none;
            transition: color 0.2s;
        }

        a:hover {
            color: var(--color-link-hover);
            text-decoration: underline;
        }

        ul, ol {
            margin-left: var(--spacing-lg);
            margin-bottom: var(--spacing-md);
        }

        li {
            margin-bottom: var(--spacing-xs);
            color: var(--color-text);
        }

        pre {
            background-color: var(--color-code-bg);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            padding: var(--spacing-md);
            overflow-x: auto;
            margin-bottom: var(--spacing-md);
            font-family: var(--font-mono);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        code {
            font-family: var(--font-mono);
            font-size: 0.9em;
            background-color: var(--color-code-bg);
            padding: 0.2em 0.4em;
            border-radius: 3px;
        }

        pre code {
            background-color: transparent;
            padding: 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: var(--spacing-md);
            font-size: 0.95rem;
        }

        th, td {
            border: 1px solid var(--color-border);
            padding: var(--spacing-sm);
            text-align: left;
        }

        th {
            background-color: var(--color-bg-alt);
            font-weight: 600;
            color: var(--color-primary);
        }

        blockquote {
            border-left: 4px solid var(--color-accent);
            padding-left: var(--spacing-md);
            margin: var(--spacing-md) 0;
            color: var(--color-text-light);
            font-style: italic;
            background-color: var(--color-bg-alt);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        .mermaid {
            text-align: center;
            margin: var(--spacing-lg) 0;
            background-color: var(--color-bg-alt);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        details {
            background-color: var(--color-bg-alt);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        summary {
            cursor: pointer;
            font-weight: 600;
            color: var(--color-primary);
            user-select: none;
            padding: var(--spacing-xs);
            margin: calc(-1 * var(--spacing-md));
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        summary:hover {
            background-color: rgba(123, 44, 191, 0.1);
        }

        details[open] summary {
            margin-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--color-border);
        }

        .learning-objectives {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: var(--spacing-lg);
            border-radius: var(--border-radius);
            border-left: 4px solid var(--color-accent);
            margin-bottom: var(--spacing-xl);
        }

        .learning-objectives h2 {
            margin-top: 0;
            border-bottom: none;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            gap: var(--spacing-md);
            margin: var(--spacing-xl) 0;
            padding-top: var(--spacing-lg);
            border-top: 2px solid var(--color-border);
        }

        .nav-button {
            flex: 1;
            padding: var(--spacing-md);
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
            color: white;
            border-radius: var(--border-radius);
            text-align: center;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: var(--box-shadow);
        }

        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            text-decoration: none;
        }

        footer {
            margin-top: var(--spacing-xl);
            padding: var(--spacing-lg) var(--spacing-md);
            background-color: var(--color-bg-alt);
            border-top: 1px solid var(--color-border);
            text-align: center;
            font-size: 0.9rem;
            color: var(--color-text-light);
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.5rem;
            }

            h2 {
                font-size: 1.4rem;
            }

            h3 {
                font-size: 1.2rem;
            }

            .meta {
                font-size: 0.85rem;
            }

            .navigation {
                flex-direction: column;
            }

            table {
                font-size: 0.85rem;
            }

            th, td {
                padding: var(--spacing-xs);
            }
        }
    </style>

    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>

    <!-- MathJax for LaTeX equation rendering -->
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\(', '\)']],
                displayMath: [['$$', '$$'], ['\[', '\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script" async></script>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>Á¨¨2Á´†ÔºöMaterials ProjectÂÆåÂÖ®„Ç¨„Ç§„Éâ</h1>
            <p class="subtitle">pymatgen„Å®MPRester API„ÅÆÂÆåÂÖ®„Éû„Çπ„Çø„Éº</p>
            <div class="meta">
                <span class="meta-item">üìñ Ë™≠‰∫ÜÊôÇÈñì: 30-35ÂàÜ</span>
                <span class="meta-item">üìä Èõ£ÊòìÂ∫¶: ÂÖ•ÈñÄ„ÄúÂàùÁ¥ö</span>
                <span class="meta-item">üíª „Ç≥„Éº„Éâ‰æã: 18ÂÄã</span>
                <span class="meta-item">üìù ÊºîÁøíÂïèÈ°å: 3Âïè</span>
            </div>
        </div>
    </header>

    <main class="container">

<h1>Á¨¨2Á´†ÔºöMaterials ProjectÂÆåÂÖ®„Ç¨„Ç§„Éâ</h1>

<strong>pymatgen„Å®MPRester API„ÅÆÂÆåÂÖ®„Éû„Çπ„Çø„Éº</strong>

<h2>Â≠¶ÁøíÁõÆÊ®ô</h2>

„Åì„ÅÆÁ´†„ÇíË™≠„ÇÄ„Åì„Å®„Åß„ÄÅ‰ª•‰∏ã„ÇíÁøíÂæó„Åß„Åç„Åæ„ÅôÔºö

- ‚úÖ pymatgen„ÇíÁî®„ÅÑ„ÅüÁµêÊô∂ÊßãÈÄ†„ÅÆË™≠„ÅøËæº„Åø„ÉªÊìç‰Ωú„Åå„Åß„Åç„Çã
- ‚úÖ MPRester API„ÅßË§áÈõë„Å™„ÇØ„Ç®„É™„ÇíÊßãÁØâ„Åß„Åç„Çã
- ‚úÖ 10,000‰ª∂‰ª•‰∏ä„ÅÆ„Éá„Éº„Çø„ÇíÂäπÁéáÁöÑ„Å´„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Åß„Åç„Çã
- ‚úÖ „Éê„É≥„ÉâÊßãÈÄ†„ÄÅÁä∂ÊÖãÂõ≥„ÇíÂèñÂæó„ÅóÂèØË¶ñÂåñ„Åß„Åç„Çã
- ‚úÖ APIÂà∂Èôê„ÇíËÄÉÊÖÆ„Åó„ÅüÂÆüË∑µÁöÑ„Å™„Ç≥„Éº„Éâ„ÇíÊõ∏„Åë„Çã

<strong>Ë™≠‰∫ÜÊôÇÈñì</strong>: 30-35ÂàÜ
<strong>„Ç≥„Éº„Éâ‰æã</strong>: 18ÂÄã
<strong>ÊºîÁøíÂïèÈ°å</strong>: 3Âïè

---

<h2>2.1 pymatgenÂü∫Á§é</h2>

pymatgen (Python Materials Genomics) „ÅØ„ÄÅMaterials Project„ÅÆÂÖ¨ÂºèPython„É©„Ç§„Éñ„É©„É™„Åß„Åô„ÄÇÁµêÊô∂ÊßãÈÄ†„ÅÆÊìç‰Ωú„ÄÅË®àÁÆó„Éá„Éº„Çø„ÅÆËß£Êûê„ÄÅÂèØË¶ñÂåñ„Å™„Å©„ÄÅÊùêÊñôÁßëÂ≠¶„Å´ÁâπÂåñ„Åó„ÅüÂº∑Âäõ„Å™Ê©üËÉΩ„ÇíÊèê‰æõ„Åó„Åæ„Åô„ÄÇ

<h3>2.1.1 Structure„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà</h3>

<strong>„Ç≥„Éº„Éâ‰æã1: Structure„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„ÅÆ‰ΩúÊàê„Å®Âü∫Êú¨Êìç‰Ωú</strong>

<pre><code class="language-python">from pymatgen.core import Structure, Lattice

<h1>Ê†ºÂ≠ê„Éô„ÇØ„Éà„É´„ÇíÂÆöÁæ©ÔºàSi, diamond structureÔºâ</h1>
lattice = Lattice.cubic(5.43)  # √Ö

<h1>ÂéüÂ≠êÂ∫ßÊ®ô„ÇíÂÆöÁæ©Ôºàfractional coordinatesÔºâ</h1>
species = ["Si", "Si"]
coords = [[0, 0, 0], [0.25, 0.25, 0.25]]

<h1>Structure„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„Çí‰ΩúÊàê</h1>
structure = Structure(lattice, species, coords)

<h1>Âü∫Êú¨ÊÉÖÂ†±„ÇíË°®Á§∫</h1>
print(f"ÂåñÂ≠¶Âºè: {structure.composition}")
print(f"Ê†ºÂ≠êÂÆöÊï∞: {structure.lattice.abc}")
print(f"‰ΩìÁ©ç: {structure.volume:.2f} ≈≤")
print(f"ÂØÜÂ∫¶: {structure.density:.2f} g/cm¬≥")
print(f"ÂéüÂ≠êÊï∞: {len(structure)}")</code></pre>

<strong>Âá∫Âäõ</strong>:
<pre><code>ÂåñÂ≠¶Âºè: Si2
Ê†ºÂ≠êÂÆöÊï∞: (5.43, 5.43, 5.43)
‰ΩìÁ©ç: 160.10 ≈≤
ÂØÜÂ∫¶: 2.33 g/cm¬≥
ÂéüÂ≠êÊï∞: 2</code></pre>

<strong>„Ç≥„Éº„Éâ‰æã2: ÁµêÊô∂ÊßãÈÄ†„ÅÆÂèØË¶ñÂåñ</strong>

<pre><code class="language-python">from pymatgen.core import Structure
from pymatgen.io.cif import CifWriter

<h1>Si„ÅÆÁµêÊô∂ÊßãÈÄ†„Çí‰ΩúÊàê</h1>
lattice = Lattice.cubic(5.43)
species = ["Si"] * 8
coords = [
    [0, 0, 0], [0.5, 0.5, 0], [0.5, 0, 0.5], [0, 0.5, 0.5],
    [0.25, 0.25, 0.25], [0.75, 0.75, 0.25],
    [0.75, 0.25, 0.75], [0.25, 0.75, 0.75]
]
structure = Structure(lattice, species, coords)

<h1>CIF„Éï„Ç°„Ç§„É´„Å´‰øùÂ≠ò</h1>
cif_writer = CifWriter(structure)
cif_writer.write_file("Si_diamond.cif")
print("CIF„Éï„Ç°„Ç§„É´„Çí‰øùÂ≠ò„Åó„Åæ„Åó„Åü: Si_diamond.cif")

<h1>ÂØæÁß∞ÊÄßÊÉÖÂ†±„ÇíÂèñÂæó</h1>
from pymatgen.symmetry.analyzer import SpacegroupAnalyzer
sga = SpacegroupAnalyzer(structure)

print(f"Á©∫ÈñìÁæ§: {sga.get_space_group_symbol()}")
print(f"Á©∫ÈñìÁæ§Áï™Âè∑: {sga.get_space_group_number()}")
print(f"ÁµêÊô∂Á≥ª: {sga.get_crystal_system()}")</code></pre>

<strong>Âá∫Âäõ</strong>:
<pre><code>CIF„Éï„Ç°„Ç§„É´„Çí‰øùÂ≠ò„Åó„Åæ„Åó„Åü: Si_diamond.cif
Á©∫ÈñìÁæ§: Fd-3m
Á©∫ÈñìÁæ§Áï™Âè∑: 227
ÁµêÊô∂Á≥ª: cubic</code></pre>

---

<h2>2.2 MPRester APIË©≥Á¥∞</h2>

<h3>2.2.1 Âü∫Êú¨ÁöÑ„Å™„ÇØ„Ç®„É™</h3>

<strong>„Ç≥„Éº„Éâ‰æã3: material_id„Å´„Çà„Çã„Éá„Éº„ÇøÂèñÂæó</strong>

<pre><code class="language-python">from mp_api.client import MPRester

API_KEY = "your_api_key_here"

<h1>Âçò‰∏ÄÊùêÊñô„ÅÆË©≥Á¥∞„Éá„Éº„Çø„ÇíÂèñÂæó</h1>
with MPRester(API_KEY) as mpr:
    # mp-149ÔºàSiÔºâ„ÅÆ„Éá„Éº„ÇøÂèñÂæó
    doc = mpr.materials.summary.get_data_by_id("mp-149")

    print(f"Material ID: {doc.material_id}")
    print(f"ÂåñÂ≠¶Âºè: {doc.formula_pretty}")
    print(f"„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„Éó: {doc.band_gap} eV")
    print(f"ÂΩ¢Êàê„Ç®„Éç„É´„ÇÆ„Éº: {doc.formation_energy_per_atom} eV/atom")
    print(f"ÂØæÁß∞ÊÄß: {doc.symmetry}")</code></pre>

<strong>Âá∫Âäõ</strong>:
<pre><code>Material ID: mp-149
ÂåñÂ≠¶Âºè: Si
„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„Éó: 1.14 eV
ÂΩ¢Êàê„Ç®„Éç„É´„ÇÆ„Éº: 0.0 eV/atom
ÂØæÁß∞ÊÄß: {'crystal_system': 'cubic', 'symbol': 'Fd-3m'}</code></pre>

<strong>„Ç≥„Éº„Éâ‰æã4: Ë§áÊï∞„Éï„Ç£„Éº„É´„Éâ„ÅÆ‰∏ÄÊã¨ÂèñÂæó</strong>

<pre><code class="language-python">from mp_api.client import MPRester
import pandas as pd

API_KEY = "your_api_key_here"

<h1>Ë§áÊï∞„ÅÆmaterial_id„Åã„Çâ‰∏ÄÊã¨ÂèñÂæó</h1>
material_ids = ["mp-149", "mp-804", "mp-22526"]

with MPRester(API_KEY) as mpr:
    data_list = []
    for mat_id in material_ids:
        doc = mpr.materials.summary.get_data_by_id(mat_id)
        data_list.append({
            "material_id": doc.material_id,
            "formula": doc.formula_pretty,
            "band_gap": doc.band_gap,
            "energy_above_hull": doc.energy_above_hull,
            "formation_energy": doc.formation_energy_per_atom
        })

    df = pd.DataFrame(data_list)
    print(df)</code></pre>

<strong>Âá∫Âäõ</strong>:
<pre><code>  material_id formula  band_gap  energy_above_hull  formation_energy
0      mp-149      Si      1.14               0.00              0.00
1      mp-804     GaN      3.45               0.00             -1.12
2   mp-22526     ZnO      3.44               0.00             -1.95</code></pre>

<h3>2.2.2 È´òÂ∫¶„Å™„Éï„Ç£„É´„Çø„É™„É≥„Ç∞</h3>

<strong>„Ç≥„Éº„Éâ‰æã5: Ë´ñÁêÜÊºîÁÆóÂ≠ê„ÇíÁî®„ÅÑ„ÅüË§áÈõë„Å™„ÇØ„Ç®„É™</strong>

<pre><code class="language-python">from mp_api.client import MPRester
import pandas as pd

API_KEY = "your_api_key_here"

<h1>Ë§áÈõë„Å™Êù°‰ª∂„Åß„Éï„Ç£„É´„Çø„É™„É≥„Ç∞</h1>
with MPRester(API_KEY) as mpr:
    # „Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„Éó 2-3 eV„ÄÅÂÖÉÁ¥†Êï∞2„ÄÅÁ´ãÊñπÊô∂
    docs = mpr.materials.summary.search(
        band_gap=(2.0, 3.0),
        num_elements=2,
        crystal_system="cubic",
        energy_above_hull=(0, 0.05),  # ÂÆâÂÆöÊÄß
        fields=[
            "material_id",
            "formula_pretty",
            "band_gap",
            "energy_above_hull"
        ]
    )

    df = pd.DataFrame([
        {
            "material_id": doc.material_id,
            "formula": doc.formula_pretty,
            "band_gap": doc.band_gap,
            "stability": doc.energy_above_hull
        }
        for doc in docs
    ])

    print(f"Ê§úÁ¥¢ÁµêÊûú: {len(df)}‰ª∂")
    print("\n‰∏ä‰Ωç10‰ª∂:")
    print(df.head(10))
    print(f"\n„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„ÉóÂπ≥Âùá: {df['band_gap'].mean():.2f} eV")</code></pre>

<strong>Âá∫Âäõ</strong>:
<pre><code>Ê§úÁ¥¢ÁµêÊûú: 34‰ª∂

‰∏ä‰Ωç10‰ª∂:
  material_id formula  band_gap  stability
0      mp-561     GaN      3.20       0.00
1     mp-1234     ZnS      2.15       0.02
2     mp-2345     CdS      1.85       0.01
...

„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„ÉóÂπ≥Âùá: 2.47 eV</code></pre>

<strong>„Ç≥„Éº„Éâ‰æã6: ÂÖÉÁ¥†ÊåáÂÆö„Å´„Çà„ÇãÊ§úÁ¥¢</strong>

<pre><code class="language-python">from mp_api.client import MPRester

API_KEY = "your_api_key_here"

<h1>ÁâπÂÆöÂÖÉÁ¥†„ÇíÂê´„ÇÄÊùêÊñô„ÇíÊ§úÁ¥¢</h1>
with MPRester(API_KEY) as mpr:
    # Li„ÇíÂê´„Åø„ÄÅO„ÇÇÂê´„ÇÄÊùêÊñô
    docs = mpr.materials.summary.search(
        elements=["Li", "O"],
        num_elements=2,
        fields=["material_id", "formula_pretty", "band_gap"]
    )

    print(f"Li-OÁ≥ªÊùêÊñô: {len(docs)}‰ª∂")
    for i, doc in enumerate(docs[:5]):
        print(
            f"{i+1}. {doc.material_id}: {doc.formula_pretty}, "
            f"Eg={doc.band_gap} eV"
        )</code></pre>

<strong>Âá∫Âäõ</strong>:
<pre><code>Li-OÁ≥ªÊùêÊñô: 127‰ª∂
1. mp-1960: Li2O, Eg=4.52 eV
2. mp-12193: LiO2, Eg=2.31 eV
3. mp-19017: Li2O2, Eg=3.15 eV
...</code></pre>

---

<h2>2.3 „Éê„ÉÉ„ÉÅ„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ</h2>

Â§ßË¶èÊ®°„Éá„Éº„Çø„ÇíÂäπÁéáÁöÑ„Å´ÂèñÂæó„Åô„Çã„Å´„ÅØ„ÄÅ„Éê„ÉÉ„ÉÅ„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„ÅåÂøÖË¶Å„Åß„Åô„ÄÇAPIÂà∂Èôê„ÇíËÄÉÊÖÆ„Åó„Å™„Åå„Çâ„ÄÅ10,000‰ª∂‰ª•‰∏ä„ÅÆ„Éá„Éº„Çø„ÇíÂèñÂæó„Åô„ÇãÊñπÊ≥ï„ÇíÂ≠¶„Å≥„Åæ„Åô„ÄÇ

<h3>2.3.1 „Éö„Éº„Ç∏„Éç„Éº„Ç∑„Éß„É≥Âá¶ÁêÜ</h3>

<strong>„Ç≥„Éº„Éâ‰æã7: „ÉÅ„É£„É≥„ÇØÂàÜÂâ≤„Å´„Çà„ÇãÂ§ßË¶èÊ®°„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ</strong>

<pre><code class="language-python">from mp_api.client import MPRester
import pandas as pd
import time

API_KEY = "your_api_key_here"

def batch_download(
    criteria,
    chunk_size=1000,
    max_chunks=10
):
    """
    Â§ßË¶èÊ®°„Éá„Éº„Çø„ÅÆ„Éê„ÉÉ„ÉÅ„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ

    Parameters:
    -----------
    criteria : dict
        Ê§úÁ¥¢Êù°‰ª∂
    chunk_size : int
        1Âõû„ÅÇ„Åü„Çä„ÅÆÂèñÂæó‰ª∂Êï∞
    max_chunks : int
        ÊúÄÂ§ß„ÉÅ„É£„É≥„ÇØÊï∞
    """
    all_data = []

    with MPRester(API_KEY) as mpr:
        for chunk_num in range(max_chunks):
            print(f"„ÉÅ„É£„É≥„ÇØ {chunk_num + 1}/{max_chunks} ÂèñÂæó‰∏≠...")

            docs = mpr.materials.summary.search(
                **criteria,
                num_chunks=max_chunks,
                chunk_size=chunk_size,
                fields=[
                    "material_id",
                    "formula_pretty",
                    "band_gap"
                ]
            )

            if not docs:
                print("„Éá„Éº„Çø„Å™„Åó„ÄÅÁµÇ‰∫Ü")
                break

            for doc in docs:
                all_data.append({
                    "material_id": doc.material_id,
                    "formula": doc.formula_pretty,
                    "band_gap": doc.band_gap
                })

            # API„É¨„Éº„ÉàÂà∂ÈôêÂØæÁ≠ñ
            time.sleep(1)

    return pd.DataFrame(all_data)

<h1>‰ΩøÁî®‰æã: „Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„Éó > 2 eV„ÅÆÊùêÊñô„ÇíÂ§ßÈáèÂèñÂæó</h1>
criteria = {"band_gap": (2.0, None)}
df = batch_download(criteria, chunk_size=1000, max_chunks=5)

print(f"\nÁ∑èÂèñÂæó‰ª∂Êï∞: {len(df)}")
print(df.head())
df.to_csv("wide_bandgap_materials.csv", index=False)</code></pre>

<strong>Âá∫Âäõ</strong>:
<pre><code>„ÉÅ„É£„É≥„ÇØ 1/5 ÂèñÂæó‰∏≠...
„ÉÅ„É£„É≥„ÇØ 2/5 ÂèñÂæó‰∏≠...
„ÉÅ„É£„É≥„ÇØ 3/5 ÂèñÂæó‰∏≠...
...

Á∑èÂèñÂæó‰ª∂Êï∞: 4523
  material_id formula  band_gap
0      mp-561     GaN      3.20
1     mp-1234     ZnS      2.15
...</code></pre>

<h3>2.3.2 „Ç®„É©„Éº„Éè„É≥„Éâ„É™„É≥„Ç∞„Å®„É™„Éà„É©„Ç§</h3>

<strong>„Ç≥„Éº„Éâ‰æã8: „É≠„Éê„Çπ„Éà„Å™„Éê„ÉÉ„ÉÅ„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ</strong>

<pre><code class="language-python">from mp_api.client import MPRester
import pandas as pd
import time
from requests.exceptions import RequestException

API_KEY = "your_api_key_here"

def robust_batch_download(
    criteria,
    chunk_size=500,
    max_retries=3
):
    """„Ç®„É©„Éº„Éè„É≥„Éâ„É™„É≥„Ç∞‰ªò„Åç„Éê„ÉÉ„ÉÅ„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ"""
    all_data = []

    with MPRester(API_KEY) as mpr:
        chunk_num = 0
        while True:
            retry_count = 0
            success = False

            while retry_count < max_retries and not success:
                try:
                    docs = mpr.materials.summary.search(
                        **criteria,
                        chunk_size=chunk_size,
                        fields=[
                            "material_id",
                            "formula_pretty",
                            "band_gap"
                        ]
                    )

                    if not docs:
                        return pd.DataFrame(all_data)

                    for doc in docs:
                        all_data.append({
                            "material_id": doc.material_id,
                            "formula": doc.formula_pretty,
                            "band_gap": doc.band_gap
                        })

                    success = True
                    print(f"„ÉÅ„É£„É≥„ÇØ {chunk_num + 1} ÊàêÂäü "
                          f"({len(docs)}‰ª∂)")

                except RequestException as e:
                    retry_count += 1
                    wait_time = 2 ** retry_count
                    print(
                        f"„Ç®„É©„ÉºÁô∫Áîü: {e}, "
                        f"{wait_time}ÁßíÂæå„Å´„É™„Éà„É©„Ç§..."
                    )
                    time.sleep(wait_time)

            if not success:
                print(f"„ÉÅ„É£„É≥„ÇØ {chunk_num + 1} „Çπ„Ç≠„ÉÉ„Éó")

            chunk_num += 1
            time.sleep(0.5)  # „É¨„Éº„ÉàÂà∂ÈôêÂØæÁ≠ñ

    return pd.DataFrame(all_data)

<h1>‰ΩøÁî®‰æã</h1>
criteria = {"elements": ["Li"], "num_elements": 1}
df = robust_batch_download(criteria)
print(f"ÂèñÂæóÂÆå‰∫Ü: {len(df)}‰ª∂")</code></pre>

---

<h2>2.4 „Éá„Éº„ÇøÂèØË¶ñÂåñ</h2>

<h3>2.4.1 „Éê„É≥„ÉâÊßãÈÄ†„ÅÆÂèñÂæó„Å®ÂèØË¶ñÂåñ</h3>

<strong>„Ç≥„Éº„Éâ‰æã9: „Éê„É≥„ÉâÊßãÈÄ†„Éá„Éº„Çø„ÅÆÂèñÂæó</strong>

<pre><code class="language-python">from mp_api.client import MPRester
import matplotlib.pyplot as plt

API_KEY = "your_api_key_here"

<h1>Si„ÅÆ„Éê„É≥„ÉâÊßãÈÄ†„ÇíÂèñÂæó</h1>
with MPRester(API_KEY) as mpr:
    # „Éê„É≥„ÉâÊßãÈÄ†„Éá„Éº„Çø„ÇíÂèñÂæó
    bs_data = mpr.get_bandstructure_by_material_id("mp-149")

    # Âü∫Êú¨ÊÉÖÂ†±
    print(f"ÊùêÊñô: {bs_data.structure.composition}")
    print(f"„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„Éó: {bs_data.get_band_gap()['energy']} eV")
    print(f"Áõ¥Êé•/ÈñìÊé•: {bs_data.get_band_gap()['transition']}")

    # „Éê„É≥„ÉâÊßãÈÄ†„Éó„É≠„ÉÉ„Éà
    plotter = bs_data.get_plotter()
    plotter.get_plot(
        ylim=(-10, 10),
        vbm_cbm_marker=True
    )
    plt.savefig("Si_band_structure.png", dpi=150)
    plt.show()</code></pre>

<strong>Âá∫Âäõ</strong>:
<pre><code>ÊùêÊñô: Si1
„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„Éó: 1.14 eV
Áõ¥Êé•/ÈñìÊé•: indirect</code></pre>

<strong>„Ç≥„Éº„Éâ‰æã10: Áä∂ÊÖãÂØÜÂ∫¶ÔºàDOSÔºâ„ÅÆÂèñÂæó</strong>

<pre><code class="language-python">from mp_api.client import MPRester
import matplotlib.pyplot as plt

API_KEY = "your_api_key_here"

<h1>Áä∂ÊÖãÂØÜÂ∫¶„ÇíÂèñÂæó</h1>
with MPRester(API_KEY) as mpr:
    dos_data = mpr.get_dos_by_material_id("mp-149")

    # DOS„Éó„É≠„ÉÉ„Éà
    plotter = dos_data.get_plotter()
    plotter.get_plot(
        xlim=(-10, 10),
        ylim=(0, 5)
    )
    plt.xlabel("Energy (eV)")
    plt.ylabel("DOS (states/eV)")
    plt.title("Si Density of States")
    plt.savefig("Si_DOS.png", dpi=150)
    plt.show()</code></pre>

<h3>2.4.2 Áä∂ÊÖãÂõ≥„ÅÆÂèñÂæó</h3>

<strong>„Ç≥„Éº„Éâ‰æã11: ‰∫åÂÖÉÁ≥ªÁä∂ÊÖãÂõ≥</strong>

<pre><code class="language-python">from mp_api.client import MPRester
import matplotlib.pyplot as plt

API_KEY = "your_api_key_here"

<h1>Li-OÁ≥ª„ÅÆÁä∂ÊÖãÂõ≥„ÇíÂèñÂæó</h1>
with MPRester(API_KEY) as mpr:
    pd_data = mpr.get_phase_diagram_by_elements(["Li", "O"])

    # Áä∂ÊÖãÂõ≥„Éó„É≠„ÉÉ„Éà
    plotter = pd_data.get_plotter()
    plotter.get_plot(label_stable=True)
    plt.savefig("Li-O_phase_diagram.png", dpi=150)
    plt.show()

    # ÂÆâÂÆöÁõ∏„ÇíË°®Á§∫
    print("ÂÆâÂÆöÁõ∏:")
    for entry in pd_data.stable_entries:
        print(
            f"- {entry.composition.reduced_formula}: "
            f"{pd_data.get_form_energy_per_atom(entry):.3f} "
            f"eV/atom"
        )</code></pre>

---

<h2>2.5 ÂÆüË∑µÁöÑ„Å™„Éá„Éº„ÇøÂèñÂæóÊà¶Áï•</h2>

<h3>2.5.1 „Ç≠„É£„ÉÉ„Ç∑„É•Ê¥ªÁî®</h3>

<strong>„Ç≥„Éº„Éâ‰æã12: „É≠„Éº„Ç´„É´„Ç≠„É£„ÉÉ„Ç∑„É•„Å´„Çà„ÇãÈ´òÈÄüÂåñ</strong>

<pre><code class="language-python">from mp_api.client import MPRester
import pandas as pd
import pickle
import os

API_KEY = "your_api_key_here"
CACHE_FILE = "mp_data_cache.pkl"

def get_data_with_cache(criteria, cache_file=CACHE_FILE):
    """„Ç≠„É£„ÉÉ„Ç∑„É•Ê©üËÉΩ‰ªò„Åç„Éá„Éº„ÇøÂèñÂæó"""

    # „Ç≠„É£„ÉÉ„Ç∑„É•„ÅåÂ≠òÂú®„Åô„Çå„Å∞Ë™≠„ÅøËæº„Åø
    if os.path.exists(cache_file):
        print("„Ç≠„É£„ÉÉ„Ç∑„É•„Åã„Çâ„Éá„Éº„ÇøË™≠„ÅøËæº„Åø...")
        with open(cache_file, 'rb') as f:
            return pickle.load(f)

    # „Ç≠„É£„ÉÉ„Ç∑„É•„Åå„Å™„Åë„Çå„Å∞API„Åã„ÇâÂèñÂæó
    print("API„Åã„Çâ„Éá„Éº„ÇøÂèñÂæó...")
    with MPRester(API_KEY) as mpr:
        docs = mpr.materials.summary.search(
            **criteria,
            fields=["material_id", "formula_pretty", "band_gap"]
        )

        data = pd.DataFrame([
            {
                "material_id": doc.material_id,
                "formula": doc.formula_pretty,
                "band_gap": doc.band_gap
            }
            for doc in docs
        ])

    # „Ç≠„É£„ÉÉ„Ç∑„É•„Å´‰øùÂ≠ò
    with open(cache_file, 'wb') as f:
        pickle.dump(data, f)
    print(f"„Éá„Éº„Çø„Çí„Ç≠„É£„ÉÉ„Ç∑„É•„Å´‰øùÂ≠ò: {cache_file}")

    return data

<h1>‰ΩøÁî®‰æã</h1>
criteria = {"band_gap": (2.0, 3.0), "num_elements": 2}
df1 = get_data_with_cache(criteria)  # APIÂèñÂæó
df2 = get_data_with_cache(criteria)  # „Ç≠„É£„ÉÉ„Ç∑„É•Ë™≠„ÅøËæº„Åø

print(f"„Éá„Éº„Çø‰ª∂Êï∞: {len(df1)}")</code></pre>

<h3>2.5.2 „Éá„Éº„ÇøÂìÅË≥™„ÉÅ„Çß„ÉÉ„ÇØ</h3>

<strong>„Ç≥„Éº„Éâ‰æã13: „Éá„Éº„ÇøÂìÅË≥™„ÅÆÊ§úË®º</strong>

<pre><code class="language-python">from mp_api.client import MPRester
import pandas as pd
import numpy as np

API_KEY = "your_api_key_here"

def quality_check(df):
    """„Éá„Éº„ÇøÂìÅË≥™„ÉÅ„Çß„ÉÉ„ÇØ"""
    print("=== „Éá„Éº„ÇøÂìÅË≥™„É¨„Éù„Éº„Éà ===")

    # Ê¨†ÊêçÂÄ§„ÉÅ„Çß„ÉÉ„ÇØ
    print(f"\nÊ¨†ÊêçÂÄ§:")
    print(df.isnull().sum())

    # Â§ñ„ÇåÂÄ§„ÉÅ„Çß„ÉÉ„ÇØÔºà„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„ÉóÔºâ
    if 'band_gap' in df.columns:
        bg_mean = df['band_gap'].mean()
        bg_std = df['band_gap'].std()
        outliers = df[
            (df['band_gap'] < bg_mean - 3 * bg_std) |
            (df['band_gap'] > bg_mean + 3 * bg_std)
        ]
        print(f"\n„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„ÉóÂ§ñ„ÇåÂÄ§: {len(outliers)}‰ª∂")
        if len(outliers) > 0:
            print(outliers)

    # ÈáçË§á„ÉÅ„Çß„ÉÉ„ÇØ
    duplicates = df.duplicated(subset=['material_id'])
    print(f"\nÈáçË§á„Éá„Éº„Çø: {duplicates.sum()}‰ª∂")

<h1>‰ΩøÁî®‰æã</h1>
with MPRester(API_KEY) as mpr:
    docs = mpr.materials.summary.search(
        elements=["Li", "O"],
        fields=["material_id", "formula_pretty", "band_gap"]
    )

    df = pd.DataFrame([
        {
            "material_id": doc.material_id,
            "formula": doc.formula_pretty,
            "band_gap": doc.band_gap
        }
        for doc in docs
    ])

quality_check(df)</code></pre>

---

<h2>2.6 È´òÂ∫¶„Å™„ÇØ„Ç®„É™ÊäÄË°ì</h2>

<h3>2.6.1 Ë®àÁÆó„Åï„Çå„Åü„Éó„É≠„Éë„ÉÜ„Ç£„ÅÆÂèñÂæó</h3>

<strong>„Ç≥„Éº„Éâ‰æã14: „Ç§„Ç™„É≥‰ºùÂ∞éÂ∫¶„Éá„Éº„Çø</strong>

<pre><code class="language-python">from mp_api.client import MPRester
import pandas as pd

API_KEY = "your_api_key_here"

<h1>„Ç§„Ç™„É≥‰ºùÂ∞é‰Ωì„ÅÆÊ§úÁ¥¢</h1>
with MPRester(API_KEY) as mpr:
    # Li„Ç§„Ç™„É≥‰ºùÂ∞é‰Ωì
    docs = mpr.materials.summary.search(
        elements=["Li"],
        theoretical=True,  # ÁêÜË´ñ‰∫àÊ∏¨„Éá„Éº„Çø„ÇÇÂê´„ÇÄ
        fields=[
            "material_id",
            "formula_pretty",
            "band_gap",
            "formation_energy_per_atom"
        ]
    )

    df = pd.DataFrame([
        {
            "material_id": doc.material_id,
            "formula": doc.formula_pretty,
            "band_gap": doc.band_gap,
            "energy": doc.formation_energy_per_atom
        }
        for doc in docs
    ])

    # ÂÆâÂÆö„Åã„Å§„ÉØ„Ç§„Éâ„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„Éó
    stable = df[df['energy'] < -0.1]
    wide_gap = stable[stable['band_gap'] > 2.0]

    print(f"ÂÆâÂÆö„Å™LiÂê´ÊúâÊùêÊñô: {len(stable)}‰ª∂")
    print(f"„ÉØ„Ç§„Éâ„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„Éó: {len(wide_gap)}‰ª∂")
    print(wide_gap.head(10))</code></pre>

<h3>2.6.2 Ë°®Èù¢„Ç®„Éç„É´„ÇÆ„Éº„Å®Âê∏ÁùÄ„Éá„Éº„Çø</h3>

<strong>„Ç≥„Éº„Éâ‰æã15: Ë°®Èù¢„Ç®„Éç„É´„ÇÆ„Éº„ÅÆÂèñÂæó</strong>

<pre><code class="language-python">from mp_api.client import MPRester

API_KEY = "your_api_key_here"

<h1>Ë°®Èù¢„Ç®„Éç„É´„ÇÆ„Éº„Éá„Éº„Çø„ÇíÂèñÂæó</h1>
with MPRester(API_KEY) as mpr:
    # TiO2„ÅÆË°®Èù¢„Ç®„Éç„É´„ÇÆ„Éº
    surface_data = mpr.get_surface_data("mp-2657")  # TiO2

    print(f"ÊùêÊñô: {surface_data['material_id']}")
    print(f"\nË°®Èù¢„Ç®„Éç„É´„ÇÆ„Éº (J/m¬≤):")
    for surface in surface_data['surfaces']:
        miller = surface['miller_index']
        energy = surface['surface_energy']
        print(f"  {miller}: {energy:.3f} J/m¬≤")</code></pre>

---

<h2>2.7 MPRester„ÅÆÂÆüË∑µ„Éë„Çø„Éº„É≥</h2>

<h3>2.7.1 Ë§áÊï∞Êù°‰ª∂„ÅÆÁµÑ„ÅøÂêà„Çè„Åõ</h3>

<strong>„Ç≥„Éº„Éâ‰æã16: ÈõªÊ±†ÊùêÊñô„ÅÆÊé¢Á¥¢</strong>

<pre><code class="language-python">from mp_api.client import MPRester
import pandas as pd

API_KEY = "your_api_key_here"

def find_battery_cathodes():
    """ÈõªÊ±†Ê≠£Ê•µÊùêÊñô„ÅÆÊé¢Á¥¢"""
    with MPRester(API_KEY) as mpr:
        # Êù°‰ª∂: LiÂê´Êúâ„ÄÅÈÅ∑ÁßªÈáëÂ±ûÂê´Êúâ„ÄÅÂÆâÂÆö
        docs = mpr.materials.summary.search(
            elements=["Li", "Co", "O"],  # Li-Co-OÁ≥ª
            energy_above_hull=(0, 0.05),  # ÂÆâÂÆöÊÄß
            fields=[
                "material_id",
                "formula_pretty",
                "energy_above_hull",
                "formation_energy_per_atom"
            ]
        )

        results = []
        for doc in docs:
            # ÁêÜË´ñÂÆπÈáè„ÇíÊé®ÂÆöÔºàÁ∞°ÊòìÁâàÔºâ
            formula = doc.formula_pretty
            if "Li" in formula and "Co" in formula:
                results.append({
                    "material_id": doc.material_id,
                    "formula": formula,
                    "stability": doc.energy_above_hull,
                    "formation_energy":
                        doc.formation_energy_per_atom
                })

        df = pd.DataFrame(results)
        return df.sort_values('stability')

<h1>ÂÆüË°å</h1>
cathodes = find_battery_cathodes()
print(f"ÂÄôË£úÊ≠£Ê•µÊùêÊñô: {len(cathodes)}‰ª∂")
print(cathodes.head(10))</code></pre>

<h3>2.7.2 „Éá„Éº„Çø„ÅÆ„Éï„Ç£„É´„Çø„É™„É≥„Ç∞„Å®ÈõÜÁ¥Ñ</h3>

<strong>„Ç≥„Éº„Éâ‰æã17: Áµ±Ë®àÂàÜÊûê</strong>

<pre><code class="language-python">from mp_api.client import MPRester
import pandas as pd
import matplotlib.pyplot as plt

API_KEY = "your_api_key_here"

<h1>ÂÖÉÁ¥†„Åî„Å®„ÅÆ„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„ÉóÂàÜÂ∏É</h1>
with MPRester(API_KEY) as mpr:
    # ÈÖ∏ÂåñÁâ©„ÅÆ„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„Éó
    docs = mpr.materials.summary.search(
        elements=["O"],
        num_elements=2,
        fields=["formula_pretty", "band_gap", "elements"]
    )

    data = []
    for doc in docs:
        # O„ÇíÈô§„ÅèÂÖÉÁ¥†„ÇíÁâπÂÆö
        elements = [e for e in doc.elements if e != "O"]
        if elements and doc.band_gap is not None:
            data.append({
                "element": elements[0],
                "band_gap": doc.band_gap
            })

    df = pd.DataFrame(data)

    # ÂÖÉÁ¥†„Åî„Å®„ÅÆÂπ≥Âùá„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„Éó
    avg_bg = df.groupby('element')['band_gap'].agg(
        ['mean', 'std', 'count']
    )
    avg_bg = avg_bg.sort_values('mean', ascending=False)

    print("ÂÖÉÁ¥†ÈÖ∏ÂåñÁâ©„ÅÆÂπ≥Âùá„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„ÉóÔºà‰∏ä‰Ωç10Ôºâ:")
    print(avg_bg.head(10))

    # ÂèØË¶ñÂåñ
    top10 = avg_bg.head(10)
    plt.figure(figsize=(10, 6))
    plt.bar(top10.index, top10['mean'], yerr=top10['std'])
    plt.xlabel("Element")
    plt.ylabel("Average Band Gap (eV)")
    plt.title("Average Band Gap of Binary Oxides")
    plt.xticks(rotation=45)
    plt.tight_layout()
    plt.savefig("oxide_bandgap_analysis.png", dpi=150)
    plt.show()</code></pre>

---

<h2>2.8 API„É¨„Éº„ÉàÂà∂Èôê„Å®„Éô„Çπ„Éà„Éó„É©„ÇØ„ÉÜ„Ç£„Çπ</h2>

<h3>2.8.1 „É¨„Éº„ÉàÂà∂ÈôêÂØæÁ≠ñ</h3>

Materials Project API„Å´„ÅØ‰ª•‰∏ã„ÅÆ„É¨„Éº„ÉàÂà∂Èôê„Åå„ÅÇ„Çä„Åæ„ÅôÔºö
- <strong>ÁÑ°Êñô„Éó„É©„É≥</strong>: 2000„É™„ÇØ„Ç®„Çπ„Éà/Êó•
- <strong>Premium</strong>: 10000„É™„ÇØ„Ç®„Çπ„Éà/Êó•

<strong>„Ç≥„Éº„Éâ‰æã18: „É¨„Éº„ÉàÂà∂ÈôêÂØæÂøú„ÅÆ„É©„ÉÉ„Éë„Éº</strong>

<pre><code class="language-python">from mp_api.client import MPRester
import time
from functools import wraps

API_KEY = "your_api_key_here"

class RateLimitedMPRester:
    """„É¨„Éº„ÉàÂà∂ÈôêÂØæÂøúMPRester"""

    def __init__(self, api_key, delay=0.5):
        self.api_key = api_key
        self.delay = delay
        self.request_count = 0

    def __enter__(self):
        self.mpr = MPRester(self.api_key).__enter__()
        return self

    def __exit__(self, *args):
        print(
            f"\nÁ∑è„É™„ÇØ„Ç®„Çπ„ÉàÊï∞: {self.request_count}"
        )
        return self.mpr.__exit__(*args)

    def search(self, **kwargs):
        """„É¨„Éº„ÉàÂà∂Èôê‰ªò„ÅçÊ§úÁ¥¢"""
        result = self.mpr.materials.summary.search(**kwargs)
        self.request_count += 1
        time.sleep(self.delay)
        return result

<h1>‰ΩøÁî®‰æã</h1>
with RateLimitedMPRester(API_KEY, delay=1.0) as mpr:
    # Ë§áÊï∞ÂõûÊ§úÁ¥¢
    for element in ["Li", "Na", "K"]:
        docs = mpr.search(
            elements=[element],
            num_elements=1,
            fields=["material_id", "formula_pretty"]
        )
        print(f"{element}: {len(docs)}‰ª∂")</code></pre>

---

<h2>2.9 Êú¨Á´†„ÅÆ„Åæ„Å®„ÇÅ</h2>

<h3>Â≠¶„Çì„Å†„Åì„Å®</h3>

1. <strong>pymatgenÂü∫Á§é</strong>
   - Structure„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„ÅÆÊìç‰Ωú
   - ÁµêÊô∂ÊßãÈÄ†„ÅÆÂèØË¶ñÂåñ
   - ÂØæÁß∞ÊÄßËß£Êûê

2. <strong>MPRester API</strong>
   - Âü∫Êú¨ÁöÑ„Å™„ÇØ„Ç®„É™Ôºàmaterial_id„ÄÅformulaÔºâ
   - È´òÂ∫¶„Å™„Éï„Ç£„É´„Çø„É™„É≥„Ç∞ÔºàË´ñÁêÜÊºîÁÆó„ÄÅÁØÑÂõ≤ÊåáÂÆöÔºâ
   - „Éê„ÉÉ„ÉÅ„ÉÄ„Ç¶„É≥„É≠„Éº„ÉâÔºà10,000‰ª∂‰ª•‰∏äÔºâ

3. <strong>„Éá„Éº„ÇøÂèØË¶ñÂåñ</strong>
   - „Éê„É≥„ÉâÊßãÈÄ†„Éó„É≠„ÉÉ„Éà
   - Áä∂ÊÖãÂØÜÂ∫¶ÔºàDOSÔºâ
   - Áä∂ÊÖãÂõ≥

4. <strong>ÂÆüË∑µ„ÉÜ„ÇØ„Éã„ÉÉ„ÇØ</strong>
   - „Ç≠„É£„ÉÉ„Ç∑„É•Ê¥ªÁî®
   - „Ç®„É©„Éº„Éè„É≥„Éâ„É™„É≥„Ç∞
   - „É¨„Éº„ÉàÂà∂ÈôêÂØæÁ≠ñ

<h3>ÈáçË¶Å„Å™„Éù„Ç§„É≥„Éà</h3>

- ‚úÖ pymatgen„ÅØÁµêÊô∂ÊßãÈÄ†Êìç‰Ωú„ÅÆÊ®ôÊ∫ñ„É©„Ç§„Éñ„É©„É™
- ‚úÖ MPRester API„Åß140kÊùêÊñô„Å´„Ç¢„ÇØ„Çª„ÇπÂèØËÉΩ
- ‚úÖ „Éê„ÉÉ„ÉÅ„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„ÅØ chunk_size „ÅßÂà∂Âæ°
- ‚úÖ „Ç≠„É£„ÉÉ„Ç∑„É•„ÅßÈáçË§á„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂâäÊ∏õ
- ‚úÖ „É¨„Éº„ÉàÂà∂Èôê„ÇíËÄÉÊÖÆ„Åó„Åü„Ç≥„Éº„ÉâË®≠Ë®à„ÅåÈáçË¶Å

<h3>Ê¨°„ÅÆÁ´†„Å∏</h3>

Á¨¨3Á´†„Åß„ÅØ„ÄÅË§áÊï∞„Éá„Éº„Çø„Éô„Éº„Çπ„ÅÆÁµ±Âêà„Å®„ÉØ„Éº„ÇØ„Éï„É≠„Éº„ÇíÂ≠¶„Å≥„Åæ„ÅôÔºö
- Materials Project„Å®AFLOW„ÅÆÁµ±Âêà
- „Éá„Éº„Çø„ÇØ„É™„Éº„Éã„É≥„Ç∞
- Ê¨†ÊêçÂÄ§Âá¶ÁêÜ
- Ëá™ÂãïÊõ¥Êñ∞„Éë„Ç§„Éó„É©„Ç§„É≥

<strong>[Á¨¨3Á´†Ôºö„Éá„Éº„Çø„Éô„Éº„ÇπÁµ±Âêà„Å®„ÉØ„Éº„ÇØ„Éï„É≠„Éº ‚Üí](./chapter-3.md)</strong>

---

<h2>ÊºîÁøíÂïèÈ°å</h2>

<h3>ÂïèÈ°å1ÔºàÈõ£ÊòìÂ∫¶ÔºöeasyÔºâ</h3>

pymatgen„Çí‰ΩøÁî®„Åó„Å¶„ÄÅCu„ÅÆFCCÊßãÈÄ†Ôºàface-centered cubicÔºâ„Çí‰ΩúÊàê„Åó„ÄÅ‰ª•‰∏ã„ÅÆÊÉÖÂ†±„ÇíË°®Á§∫„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ

<strong>Ë¶ÅÊ±Ç‰∫ãÈ†Ö</strong>:
1. Ê†ºÂ≠êÂÆöÊï∞: 3.61 √Ö
2. Á©∫ÈñìÁæ§Ë®òÂè∑
3. ÁµêÊô∂Á≥ª
4. ÂØÜÂ∫¶

<details>
<summary>„Éí„É≥„Éà</summary>

<pre><code class="language-python">from pymatgen.core import Structure, Lattice

<h1>FCCÊßãÈÄ†„ÅÆÂ∫ßÊ®ô</h1>
lattice = Lattice.cubic(3.61)
species = ["Cu"] * 4
coords = [[0, 0, 0], [0.5, 0.5, 0], ...]</code></pre>

</details>

<details>
<summary>Ëß£Á≠î‰æã</summary>

<pre><code class="language-python">from pymatgen.core import Structure, Lattice
from pymatgen.symmetry.analyzer import SpacegroupAnalyzer

<h1>Cu FCCÊßãÈÄ†</h1>
lattice = Lattice.cubic(3.61)
species = ["Cu"] * 4
coords = [
    [0, 0, 0],
    [0.5, 0.5, 0],
    [0.5, 0, 0.5],
    [0, 0.5, 0.5]
]

structure = Structure(lattice, species, coords)

<h1>ÂØæÁß∞ÊÄßËß£Êûê</h1>
sga = SpacegroupAnalyzer(structure)

print(f"ÂåñÂ≠¶Âºè: {structure.composition}")
print(f"Ê†ºÂ≠êÂÆöÊï∞: {structure.lattice.abc}")
print(f"Á©∫ÈñìÁæ§: {sga.get_space_group_symbol()}")
print(f"ÁµêÊô∂Á≥ª: {sga.get_crystal_system()}")
print(f"ÂØÜÂ∫¶: {structure.density:.2f} g/cm¬≥")</code></pre>

<strong>Âá∫Âäõ</strong>:
<pre><code>ÂåñÂ≠¶Âºè: Cu4
Ê†ºÂ≠êÂÆöÊï∞: (3.61, 3.61, 3.61)
Á©∫ÈñìÁæ§: Fm-3m
ÁµêÊô∂Á≥ª: cubic
ÂØÜÂ∫¶: 8.96 g/cm¬≥</code></pre>

</details>

---

<h3>ÂïèÈ°å2ÔºàÈõ£ÊòìÂ∫¶ÔºömediumÔºâ</h3>

Materials Project„Åã„Çâ‰ª•‰∏ã„ÅÆÊù°‰ª∂„ÇíÊ∫Ä„Åü„ÅôËß¶Â™íÊùêÊñôÂÄôË£ú„ÇíÊ§úÁ¥¢„Åó„ÄÅCSV‰øùÂ≠ò„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ

<strong>Êù°‰ª∂</strong>:
- ÈÅ∑ÁßªÈáëÂ±ûÔºàTi, V, Cr, Mn, Fe, Co, NiÔºâ„ÇíÂê´„ÇÄ
- ÈÖ∏Á¥†„ÇíÂê´„ÇÄ
- „Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„Éó < 3 eVÔºàÈõªÂ≠ê‰ºùÂ∞éÊÄßÔºâ
- ÂÆâÂÆöÊÄß: energy_above_hull < 0.1 eV/atom

<strong>Ë¶ÅÊ±Ç‰∫ãÈ†Ö</strong>:
1. Ê§úÁ¥¢ÁµêÊûú‰ª∂Êï∞„ÇíË°®Á§∫
2. material_id„ÄÅformula„ÄÅband_gap„ÄÅstability„ÇíCSV‰øùÂ≠ò
3. „Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„Éó„ÅÆÂàÜÂ∏É„ÇíÊ£í„Ç∞„É©„ÉïÂåñ

<details>
<summary>Ëß£Á≠î‰æã</summary>

<pre><code class="language-python">from mp_api.client import MPRester
import pandas as pd
import matplotlib.pyplot as plt

API_KEY = "your_api_key_here"

<h1>ÈÅ∑ÁßªÈáëÂ±û„É™„Çπ„Éà</h1>
transition_metals = ["Ti", "V", "Cr", "Mn", "Fe", "Co", "Ni"]

all_results = []

with MPRester(API_KEY) as mpr:
    for tm in transition_metals:
        docs = mpr.materials.summary.search(
            elements=[tm, "O"],
            band_gap=(None, 3.0),
            energy_above_hull=(0, 0.1),
            fields=[
                "material_id",
                "formula_pretty",
                "band_gap",
                "energy_above_hull"
            ]
        )

        for doc in docs:
            all_results.append({
                "material_id": doc.material_id,
                "formula": doc.formula_pretty,
                "band_gap": doc.band_gap,
                "stability": doc.energy_above_hull,
                "transition_metal": tm
            })

df = pd.DataFrame(all_results)

print(f"Ëß¶Â™íÂÄôË£úÊùêÊñô: {len(df)}‰ª∂")
print(df.head(10))

<h1>CSV‰øùÂ≠ò</h1>
df.to_csv("catalyst_candidates.csv", index=False)

<h1>„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„ÉóÂàÜÂ∏É</h1>
plt.figure(figsize=(10, 6))
plt.hist(df['band_gap'], bins=30, edgecolor='black')
plt.xlabel("Band Gap (eV)")
plt.ylabel("Count")
plt.title("Band Gap Distribution of Catalyst Candidates")
plt.grid(axis='y', alpha=0.3)
plt.savefig("catalyst_bandgap_dist.png", dpi=150)
plt.show()</code></pre>

</details>

---

<h3>ÂïèÈ°å3ÔºàÈõ£ÊòìÂ∫¶ÔºöhardÔºâ</h3>

Materials Project„Åã„Çâ10,000‰ª∂‰ª•‰∏ä„ÅÆ„Éá„Éº„Çø„Çí„Éê„ÉÉ„ÉÅ„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Åó„ÄÅÁµ±Ë®àÂàÜÊûê„ÇíË°å„Å£„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ

<strong>Ë™≤È°å</strong>:
1. „Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„Éó > 0 eV„ÅÆÊùêÊñô„ÇíÂÖ®„Å¶ÂèñÂæó
2. ÂÖÉÁ¥†Êï∞„Åî„Å®„ÅÆ„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„ÉóÂπ≥Âùá„ÇíË®àÁÆó
3. ÁµêÊô∂Á≥ª„Åî„Å®„ÅÆ„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„ÉóÂàÜÂ∏É„ÇíÂèØË¶ñÂåñ
4. ‰∏ä‰Ωç10%„ÅÆ„ÉØ„Ç§„Éâ„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„ÉóÊùêÊñô„Çí„É™„Çπ„ÉàÂåñ

<strong>Âà∂Á¥Ñ</strong>:
- „Ç®„É©„Éº„Éè„É≥„Éâ„É™„É≥„Ç∞ÂÆüË£Ö
- „Ç≠„É£„ÉÉ„Ç∑„É•Ê©üËÉΩÂÆüË£Ö
- „Éó„É≠„Ç∞„É¨„Çπ„Éê„ÉºË°®Á§∫

<details>
<summary>Ëß£Á≠î‰æã</summary>

<pre><code class="language-python">from mp_api.client import MPRester
import pandas as pd
import matplotlib.pyplot as plt
import pickle
import os
from tqdm import tqdm

API_KEY = "your_api_key_here"
CACHE_FILE = "wide_bg_cache.pkl"

def batch_download_with_progress():
    """„Éó„É≠„Ç∞„É¨„Çπ„Éê„Éº‰ªò„Åç„Éê„ÉÉ„ÉÅ„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ"""

    # „Ç≠„É£„ÉÉ„Ç∑„É•„ÉÅ„Çß„ÉÉ„ÇØ
    if os.path.exists(CACHE_FILE):
        print("„Ç≠„É£„ÉÉ„Ç∑„É•„Åã„Çâ„Éá„Éº„ÇøË™≠„ÅøËæº„Åø...")
        with open(CACHE_FILE, 'rb') as f:
            return pickle.load(f)

    all_data = []

    with MPRester(API_KEY) as mpr:
        # Á∑è‰ª∂Êï∞ÂèñÂæó
        total_docs = mpr.materials.summary.search(
            band_gap=(0.1, None),
            fields=["material_id"]
        )
        total = len(total_docs)
        print(f"Á∑è„Éá„Éº„ÇøÊï∞: {total}‰ª∂")

        # „ÉÅ„É£„É≥„ÇØÂàÜÂâ≤„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ
        chunk_size = 1000
        num_chunks = (total // chunk_size) + 1

        for i in tqdm(range(num_chunks), desc="„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ"):
            docs = mpr.materials.summary.search(
                band_gap=(0.1, None),
                num_chunks=num_chunks,
                chunk_size=chunk_size,
                fields=[
                    "material_id",
                    "formula_pretty",
                    "band_gap",
                    "num_elements",
                    "symmetry"
                ]
            )

            for doc in docs:
                all_data.append({
                    "material_id": doc.material_id,
                    "formula": doc.formula_pretty,
                    "band_gap": doc.band_gap,
                    "num_elements": doc.num_elements,
                    "crystal_system":
                        doc.symmetry.get('crystal_system')
                })

    df = pd.DataFrame(all_data)

    # „Ç≠„É£„ÉÉ„Ç∑„É•‰øùÂ≠ò
    with open(CACHE_FILE, 'wb') as f:
        pickle.dump(df, f)

    return df

<h1>„Éá„Éº„ÇøÂèñÂæó</h1>
df = batch_download_with_progress()

print(f"\nÁ∑è„Éá„Éº„ÇøÊï∞: {len(df)}")

<h1>ÂÖÉÁ¥†Êï∞„Åî„Å®„ÅÆÂπ≥Âùá„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„Éó</h1>
avg_by_elements = df.groupby('num_elements')['band_gap'].mean()
print("\nÂÖÉÁ¥†Êï∞„Åî„Å®„ÅÆÂπ≥Âùá„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„Éó:")
print(avg_by_elements)

<h1>ÁµêÊô∂Á≥ª„Åî„Å®„ÅÆÂàÜÂ∏É</h1>
fig, axes = plt.subplots(2, 3, figsize=(15, 10))
crystal_systems = df['crystal_system'].unique()

for i, cs in enumerate(crystal_systems[:6]):
    ax = axes[i // 3, i % 3]
    data = df[df['crystal_system'] == cs]['band_gap']
    ax.hist(data, bins=30, edgecolor='black')
    ax.set_title(f"{cs} (n={len(data)})")
    ax.set_xlabel("Band Gap (eV)")
    ax.set_ylabel("Count")

plt.tight_layout()
plt.savefig("crystal_system_bandgap.png", dpi=150)
plt.show()

<h1>‰∏ä‰Ωç10%„ÅÆ„ÉØ„Ç§„Éâ„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„ÉóÊùêÊñô</h1>
threshold = df['band_gap'].quantile(0.9)
top10 = df[df['band_gap'] >= threshold].sort_values(
    'band_gap', ascending=False
)

print(f"\n„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„Éó‰∏ä‰Ωç10%ÔºàÈñæÂÄ§: {threshold:.2f} eVÔºâ:")
print(top10.head(20))

top10.to_csv("top10_percent_wide_bg.csv", index=False)</code></pre>

<strong>Âá∫Âäõ‰æã</strong>:
<pre><code>„Ç≠„É£„ÉÉ„Ç∑„É•„Åã„Çâ„Éá„Éº„ÇøË™≠„ÅøËæº„Åø...

Á∑è„Éá„Éº„ÇøÊï∞: 12453

ÂÖÉÁ¥†Êï∞„Åî„Å®„ÅÆÂπ≥Âùá„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„Éó:
num_elements
1    3.25
2    2.87
3    2.13
4    1.65
...

„Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„Éó‰∏ä‰Ωç10%ÔºàÈñæÂÄ§: 5.23 eVÔºâ:
   material_id formula  band_gap  num_elements crystal_system
0       mp-123    MgO      7.83             2          cubic
1       mp-456    BN       6.42             2      hexagonal
...</code></pre>

</details>

---

<h2>ÂèÇËÄÉÊñáÁåÆ</h2>

1. Ong, S. P. et al. (2013). "Python Materials Genomics (pymatgen): A robust, open-source python library for materials analysis." *Computational Materials Science*, 68, 314-319.
   DOI: [10.1016/j.commatsci.2012.10.028](https://doi.org/10.1016/j.commatsci.2012.10.028)

2. Materials Project Documentation. "API Documentation." URL: [docs.materialsproject.org](https://docs.materialsproject.org)

3. Jain, A. et al. (2013). "Commentary: The Materials Project." *APL Materials*, 1(1), 011002.
   DOI: [10.1063/1.4812323](https://doi.org/10.1063/1.4812323)

---

<h2>„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥</h2>

<h3>Ââç„ÅÆÁ´†</h3>
<strong>[Á¨¨1Á´†ÔºöÊùêÊñô„Éá„Éº„Çø„Éô„Éº„Çπ„ÅÆÂÖ®Ë≤å ‚Üê](./chapter-1.md)</strong>

<h3>Ê¨°„ÅÆÁ´†</h3>
<strong>[Á¨¨3Á´†Ôºö„Éá„Éº„Çø„Éô„Éº„ÇπÁµ±Âêà„Å®„ÉØ„Éº„ÇØ„Éï„É≠„Éº ‚Üí](./chapter-3.md)</strong>

<h3>„Ç∑„É™„Éº„Ç∫ÁõÆÊ¨°</h3>
<strong>[‚Üê „Ç∑„É™„Éº„Ç∫ÁõÆÊ¨°„Å´Êàª„Çã](./index.md)</strong>

---

<h2>ËëóËÄÖÊÉÖÂ†±</h2>

<strong>‰ΩúÊàêËÄÖ</strong>: AI Terakoya Content Team
<strong>Áõ£‰øÆ</strong>: Dr. Yusuke HashimotoÔºàÊù±ÂåóÂ§ßÂ≠¶Ôºâ
<strong>‰ΩúÊàêÊó•</strong>: 2025-10-17
<strong>„Éê„Éº„Ç∏„Éß„É≥</strong>: 1.0

<strong>„É©„Ç§„Çª„É≥„Çπ</strong>: Creative Commons BY 4.0

---

<strong>Ê¨°„ÅÆÁ´†„ÅßÂ≠¶Áøí„ÇíÁ∂ö„Åë„Åæ„Åó„Çá„ÅÜÔºÅ</strong>
<div class="navigation">
    <a href="chapter-1.html" class="nav-button">‚Üê Á¨¨1Á´†</a>
    <a href="index.html" class="nav-button">„Ç∑„É™„Éº„Ç∫ÁõÆÊ¨°„Å´Êàª„Çã</a>
    <a href="chapter-3.html" class="nav-button">Á¨¨3Á´† ‚Üí</a>
</div>
    </main>

    <footer>
        <p><strong>‰ΩúÊàêËÄÖ</strong>: AI Terakoya Content Team</p>
        <p><strong>Áõ£‰øÆ</strong>: Dr. Yusuke HashimotoÔºàÊù±ÂåóÂ§ßÂ≠¶Ôºâ</p>
        <p><strong>„Éê„Éº„Ç∏„Éß„É≥</strong>: 1.0 | <strong>‰ΩúÊàêÊó•</strong>: 2025-10-17</p>
        <p><strong>„É©„Ç§„Çª„É≥„Çπ</strong>: Creative Commons BY 4.0</p>
        <p>¬© 2025 AI Terakoya. All rights reserved.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const mermaidCodeBlocks = document.querySelectorAll('pre.codehilite code.language-mermaid, pre code.language-mermaid');

            mermaidCodeBlocks.forEach(function(codeBlock) {
                const pre = codeBlock.parentElement;
                const mermaidCode = codeBlock.textContent;

                const mermaidDiv = document.createElement('div');
                mermaidDiv.className = 'mermaid';
                mermaidDiv.textContent = mermaidCode.trim();

                pre.parentNode.replaceChild(mermaidDiv, pre);
            });

            if (typeof mermaid !== 'undefined') {
                mermaid.initialize({
                    startOnLoad: true,
                    theme: 'default'
                });
                mermaid.init(undefined, document.querySelectorAll('.mermaid'));
            }
        });
    </script>
</body>
</html>
