<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬2ç« ï¼šMaterials Projectå®Œå…¨ã‚¬ã‚¤ãƒ‰ - AI Terakoya</title>
    <style>
        :root {
            --color-primary-900: #1a252f;
            --color-primary-700: #2c3e50;
            --color-primary-500: #34495e;
            --color-primary-300: #4a5f7a;
            --color-accent: #7b2cbf;
            --color-accent-light: #9d4edd;
            --color-bg: #ffffff;
            --color-bg-secondary: #f8f9fa;
            --color-text: #2c3e50;
            --color-text-light: #6c757d;
            --color-border: #e9ecef;
            --color-code-bg: #f8f9fa;
            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 3rem;
            --font-base: 1rem;
            --font-sm: 0.875rem;
            --font-lg: 1.125rem;
            --font-xl: 1.5rem;
            --font-2xl: 2rem;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans JP", sans-serif;
            line-height: 1.7;
            color: var(--color-text);
            background: var(--color-bg);
        }

        header {
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
            color: white;
            padding: var(--spacing-xl) var(--spacing-md);
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            max-width: 800px;
            margin: 0 auto;
        }

        header h1 {
            font-size: var(--font-2xl);
            margin-bottom: var(--spacing-sm);
            font-weight: 700;
        }

        .subtitle {
            font-size: var(--font-lg);
            opacity: 0.95;
            margin-bottom: var(--spacing-md);
        }

        .meta {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-md);
            justify-content: center;
            font-size: var(--font-sm);
            opacity: 0.9;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: var(--spacing-xl) var(--spacing-md);
        }

        h2 {
            font-size: var(--font-xl);
            color: var(--color-accent);
            margin: var(--spacing-lg) 0 var(--spacing-md) 0;
            padding-bottom: var(--spacing-xs);
            border-bottom: 2px solid var(--color-accent-light);
        }

        h3 {
            font-size: var(--font-lg);
            color: var(--color-primary-700);
            margin: var(--spacing-md) 0 var(--spacing-sm) 0;
        }

        h4 {
            font-size: var(--font-base);
            color: var(--color-primary-500);
            margin: var(--spacing-sm) 0;
        }

        p {
            margin-bottom: var(--spacing-md);
            line-height: 1.8;
        }

        ul, ol {
            margin: var(--spacing-md) 0;
            padding-left: var(--spacing-lg);
        }

        li {
            margin-bottom: var(--spacing-xs);
        }

        code {
            background: var(--color-code-bg);
            padding: 0.2em 0.4em;
            border-radius: 3px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9em;
            color: var(--color-accent);
        }

        pre {
            background: var(--color-code-bg);
            border-left: 4px solid var(--color-accent);
            padding: var(--spacing-md);
            overflow-x: auto;
            border-radius: 4px;
            margin: var(--spacing-md) 0;
        }

        pre code {
            background: none;
            padding: 0;
            color: var(--color-text);
        }

        .mermaid {
            background: white;
            padding: var(--spacing-md);
            border-radius: 8px;
            margin: var(--spacing-md) 0;
            text-align: center;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: var(--spacing-md) 0;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        th, td {
            padding: var(--spacing-sm);
            text-align: left;
            border-bottom: 1px solid var(--color-border);
        }

        th {
            background: var(--color-accent);
            color: white;
            font-weight: 600;
        }

        tr:hover {
            background: var(--color-bg-secondary);
        }

        details {
            background: var(--color-bg-secondary);
            padding: var(--spacing-md);
            border-radius: 8px;
            margin: var(--spacing-md) 0;
            border: 1px solid var(--color-border);
        }

        summary {
            cursor: pointer;
            font-weight: 600;
            color: var(--color-accent);
            padding: var(--spacing-sm);
            margin: calc(-1 * var(--spacing-md));
            margin-bottom: var(--spacing-md);
            background: white;
            border-radius: 8px 8px 0 0;
        }

        summary:hover {
            background: var(--color-bg-secondary);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            gap: var(--spacing-md);
            margin: var(--spacing-xl) 0;
            padding-top: var(--spacing-lg);
            border-top: 1px solid var(--color-border);
        }

        .btn {
            display: inline-block;
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: 6px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s;
            min-height: 44px;
            display: flex;
            align-items: center;
        }

        .btn-primary {
            background: var(--color-accent);
            color: white;
        }

        .btn-secondary {
            background: var(--color-primary-500);
            color: white;
        }

        @media (hover: hover) and (pointer: fine) {
            .btn-primary:hover {
                background: var(--color-accent-light);
                transform: translateY(-2px);
                box-shadow: 0 4px 8px rgba(123, 44, 191, 0.3);
            }

            .btn-secondary:hover {
                background: var(--color-primary-700);
                transform: translateY(-2px);
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            }
        }

        footer {
            background: var(--color-primary-900);
            color: white;
            padding: var(--spacing-lg);
            text-align: center;
            margin-top: var(--spacing-xl);
        }

        footer a {
            color: var(--color-accent-light);
            text-decoration: none;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: var(--font-xl);
            }

            .subtitle {
                font-size: var(--font-base);
            }

            .meta {
                font-size: 0.8rem;
            }

            .navigation {
                flex-direction: column;
            }
        }
    </style>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>ç¬¬2ç« ï¼šMaterials Projectå®Œå…¨ã‚¬ã‚¤ãƒ‰</h1>
            <p class="subtitle"></p>
            <div class="meta">
                <span class="meta-item">ğŸ“– èª­äº†æ™‚é–“: 30-35åˆ†</span>
                <span class="meta-item">ğŸ“Š é›£æ˜“åº¦: å…¥é–€ã€œåˆç´š</span>
                <span class="meta-item">ğŸ’» ã‚³ãƒ¼ãƒ‰ä¾‹: 18</span>
                <span class="meta-item">ğŸ“ æ¼”ç¿’å•é¡Œ: 3</span>
            </div>
        </div>
    </header>

    <main class="container">
        <p>
<h1>ç¬¬2ç« ï¼šMaterials Projectå®Œå…¨ã‚¬ã‚¤ãƒ‰</h1>
</p>
<p>
<strong>pymatgenã¨MPRester APIã®å®Œå…¨ãƒã‚¹ã‚¿ãƒ¼</strong>
</p>
<p>
<h2>å­¦ç¿’ç›®æ¨™</h2>
</p>
<p>
ã“ã®ç« ã‚’èª­ã‚€ã“ã¨ã§ã€ä»¥ä¸‹ã‚’ç¿’å¾—ã§ãã¾ã™ï¼š
</p>
<p>
<ul><li>âœ… pymatgenã‚’ç”¨ã„ãŸçµæ™¶æ§‹é€ ã®èª­ã¿è¾¼ã¿ãƒ»æ“ä½œãŒã§ãã‚‹</li>
<li>âœ… MPRester APIã§è¤‡é›‘ãªã‚¯ã‚¨ãƒªã‚’æ§‹ç¯‰ã§ãã‚‹</li>
<li>âœ… 10,000ä»¶ä»¥ä¸Šã®ãƒ‡ãƒ¼ã‚¿ã‚’åŠ¹ç‡çš„ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹</li>
<li>âœ… ãƒãƒ³ãƒ‰æ§‹é€ ã€çŠ¶æ…‹å›³ã‚’å–å¾—ã—å¯è¦–åŒ–ã§ãã‚‹</li>
<li>âœ… APIåˆ¶é™ã‚’è€ƒæ…®ã—ãŸå®Ÿè·µçš„ãªã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‘ã‚‹</li>
</p>
<p>
<strong>èª­äº†æ™‚é–“</strong>: 30-35åˆ†
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹</strong>: 18å€‹
<strong>æ¼”ç¿’å•é¡Œ</strong>: 3å•
</p>
<p>
---
</p>
<p>
<h2>2.1 pymatgenåŸºç¤</h2>
</p>
<p>
pymatgen (Python Materials Genomics) ã¯ã€Materials Projectã®å…¬å¼Pythonãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚çµæ™¶æ§‹é€ ã®æ“ä½œã€è¨ˆç®—ãƒ‡ãƒ¼ã‚¿ã®è§£æã€å¯è¦–åŒ–ãªã©ã€ææ–™ç§‘å­¦ã«ç‰¹åŒ–ã—ãŸå¼·åŠ›ãªæ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚
</p>
<p>
<h3>2.1.1 Structureã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ</h3>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹1: Structureã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆã¨åŸºæœ¬æ“ä½œ</strong>
</p>
<p>
<pre><code class="language-python">from pymatgen.core import Structure, Lattice
</p>
<p>
<h1>æ ¼å­ãƒ™ã‚¯ãƒˆãƒ«ã‚’å®šç¾©ï¼ˆSi, diamond structureï¼‰</h1>
lattice = Lattice.cubic(5.43)  # Ã…
</p>
<p>
<h1>åŸå­åº§æ¨™ã‚’å®šç¾©ï¼ˆfractional coordinatesï¼‰</h1>
species = ["Si", "Si"]
coords = [[0, 0, 0], [0.25, 0.25, 0.25]]
</p>
<p>
<h1>Structureã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ</h1>
structure = Structure(lattice, species, coords)
</p>
<p>
<h1>åŸºæœ¬æƒ…å ±ã‚’è¡¨ç¤º</h1>
print(f"åŒ–å­¦å¼: {structure.composition}")
print(f"æ ¼å­å®šæ•°: {structure.lattice.abc}")
print(f"ä½“ç©: {structure.volume:.2f} Å²")
print(f"å¯†åº¦: {structure.density:.2f} g/cmÂ³")
print(f"åŸå­æ•°: {len(structure)}")
</code></pre>
</p>
<p>
<strong>å‡ºåŠ›</strong>:
``<code>
åŒ–å­¦å¼: Si2
æ ¼å­å®šæ•°: (5.43, 5.43, 5.43)
ä½“ç©: 160.10 Å²
å¯†åº¦: 2.33 g/cmÂ³
åŸå­æ•°: 2
</code>`<code>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹2: çµæ™¶æ§‹é€ ã®å¯è¦–åŒ–</strong>
</p>
<p>
<pre><code class="language-python">from pymatgen.core import Structure
from pymatgen.io.cif import CifWriter
</p>
<p>
<h1>Siã®çµæ™¶æ§‹é€ ã‚’ä½œæˆ</h1>
lattice = Lattice.cubic(5.43)
species = ["Si"] * 8
coords = [
    [0, 0, 0], [0.5, 0.5, 0], [0.5, 0, 0.5], [0, 0.5, 0.5],
    [0.25, 0.25, 0.25], [0.75, 0.75, 0.25],
    [0.75, 0.25, 0.75], [0.25, 0.75, 0.75]
]
structure = Structure(lattice, species, coords)
</p>
<p>
<h1>CIFãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜</h1>
cif_writer = CifWriter(structure)
cif_writer.write_file("Si_diamond.cif")
print("CIFãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã—ã¾ã—ãŸ: Si_diamond.cif")
</p>
<p>
<h1>å¯¾ç§°æ€§æƒ…å ±ã‚’å–å¾—</h1>
from pymatgen.symmetry.analyzer import SpacegroupAnalyzer
sga = SpacegroupAnalyzer(structure)
</p>
<p>
print(f"ç©ºé–“ç¾¤: {sga.get_space_group_symbol()}")
print(f"ç©ºé–“ç¾¤ç•ªå·: {sga.get_space_group_number()}")
print(f"çµæ™¶ç³»: {sga.get_crystal_system()}")
</code></pre>
</p>
<p>
<strong>å‡ºåŠ›</strong>:
</code>`<code>
CIFãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã—ã¾ã—ãŸ: Si_diamond.cif
ç©ºé–“ç¾¤: Fd-3m
ç©ºé–“ç¾¤ç•ªå·: 227
çµæ™¶ç³»: cubic
</code>`<code>
</p>
<p>
---
</p>
<p>
<h2>2.2 MPRester APIè©³ç´°</h2>
</p>
<p>
<h3>2.2.1 åŸºæœ¬çš„ãªã‚¯ã‚¨ãƒª</h3>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹3: material_idã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿å–å¾—</strong>
</p>
<p>
<pre><code class="language-python">from mp_api.client import MPRester
</p>
<p>
API_KEY = "your_api_key_here"
</p>
<p>
<h1>å˜ä¸€ææ–™ã®è©³ç´°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—</h1>
with MPRester(API_KEY) as mpr:
    # mp-149ï¼ˆSiï¼‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—
    doc = mpr.materials.summary.get_data_by_id("mp-149")
</p>
<p>
    print(f"Material ID: {doc.material_id}")
    print(f"åŒ–å­¦å¼: {doc.formula_pretty}")
    print(f"ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—: {doc.band_gap} eV")
    print(f"å½¢æˆã‚¨ãƒãƒ«ã‚®ãƒ¼: {doc.formation_energy_per_atom} eV/atom")
    print(f"å¯¾ç§°æ€§: {doc.symmetry}")
</code></pre>
</p>
<p>
<strong>å‡ºåŠ›</strong>:
</code>`<code>
Material ID: mp-149
åŒ–å­¦å¼: Si
ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—: 1.14 eV
å½¢æˆã‚¨ãƒãƒ«ã‚®ãƒ¼: 0.0 eV/atom
å¯¾ç§°æ€§: {'crystal_system': 'cubic', 'symbol': 'Fd-3m'}
</code>`<code>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹4: è¤‡æ•°ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ä¸€æ‹¬å–å¾—</strong>
</p>
<p>
<pre><code class="language-python">from mp_api.client import MPRester
import pandas as pd
</p>
<p>
API_KEY = "your_api_key_here"
</p>
<p>
<h1>è¤‡æ•°ã®material_idã‹ã‚‰ä¸€æ‹¬å–å¾—</h1>
material_ids = ["mp-149", "mp-804", "mp-22526"]
</p>
<p>
with MPRester(API_KEY) as mpr:
    data_list = []
    for mat_id in material_ids:
        doc = mpr.materials.summary.get_data_by_id(mat_id)
        data_list.append({
            "material_id": doc.material_id,
            "formula": doc.formula_pretty,
            "band_gap": doc.band_gap,
            "energy_above_hull": doc.energy_above_hull,
            "formation_energy": doc.formation_energy_per_atom
        })
</p>
<p>
    df = pd.DataFrame(data_list)
    print(df)
</code></pre>
</p>
<p>
<strong>å‡ºåŠ›</strong>:
</code>`<code>
  material_id formula  band_gap  energy_above_hull  formation_energy
0      mp-149      Si      1.14               0.00              0.00
1      mp-804     GaN      3.45               0.00             -1.12
2   mp-22526     ZnO      3.44               0.00             -1.95
</code>`<code>
</p>
<p>
<h3>2.2.2 é«˜åº¦ãªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°</h3>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹5: è«–ç†æ¼”ç®—å­ã‚’ç”¨ã„ãŸè¤‡é›‘ãªã‚¯ã‚¨ãƒª</strong>
</p>
<p>
<pre><code class="language-python">from mp_api.client import MPRester
import pandas as pd
</p>
<p>
API_KEY = "your_api_key_here"
</p>
<p>
<h1>è¤‡é›‘ãªæ¡ä»¶ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°</h1>
with MPRester(API_KEY) as mpr:
    # ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ— 2-3 eVã€å…ƒç´ æ•°2ã€ç«‹æ–¹æ™¶
    docs = mpr.materials.summary.search(
        band_gap=(2.0, 3.0),
        num_elements=2,
        crystal_system="cubic",
        energy_above_hull=(0, 0.05),  # å®‰å®šæ€§
        fields=[
            "material_id",
            "formula_pretty",
            "band_gap",
            "energy_above_hull"
        ]
    )
</p>
<p>
    df = pd.DataFrame([
        {
            "material_id": doc.material_id,
            "formula": doc.formula_pretty,
            "band_gap": doc.band_gap,
            "stability": doc.energy_above_hull
        }
        for doc in docs
    ])
</p>
<p>
    print(f"æ¤œç´¢çµæœ: {len(df)}ä»¶")
    print("\nä¸Šä½10ä»¶:")
    print(df.head(10))
    print(f"\nãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—å¹³å‡: {df['band_gap'].mean():.2f} eV")
</code></pre>
</p>
<p>
<strong>å‡ºåŠ›</strong>:
</code>`<code>
æ¤œç´¢çµæœ: 34ä»¶
</p>
<p>
ä¸Šä½10ä»¶:
  material_id formula  band_gap  stability
0      mp-561     GaN      3.20       0.00
1     mp-1234     ZnS      2.15       0.02
2     mp-2345     CdS      1.85       0.01
...
</p>
<p>
ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—å¹³å‡: 2.47 eV
</code>`<code>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹6: å…ƒç´ æŒ‡å®šã«ã‚ˆã‚‹æ¤œç´¢</strong>
</p>
<p>
<pre><code class="language-python">from mp_api.client import MPRester
</p>
<p>
API_KEY = "your_api_key_here"
</p>
<p>
<h1>ç‰¹å®šå…ƒç´ ã‚’å«ã‚€ææ–™ã‚’æ¤œç´¢</h1>
with MPRester(API_KEY) as mpr:
    # Liã‚’å«ã¿ã€Oã‚‚å«ã‚€ææ–™
    docs = mpr.materials.summary.search(
        elements=["Li", "O"],
        num_elements=2,
        fields=["material_id", "formula_pretty", "band_gap"]
    )
</p>
<p>
    print(f"Li-Oç³»ææ–™: {len(docs)}ä»¶")
    for i, doc in enumerate(docs[:5]):
        print(
            f"{i+1}. {doc.material_id}: {doc.formula_pretty}, "
            f"Eg={doc.band_gap} eV"
        )
</code></pre>
</p>
<p>
<strong>å‡ºåŠ›</strong>:
</code>`<code>
Li-Oç³»ææ–™: 127ä»¶
1. mp-1960: Li2O, Eg=4.52 eV
2. mp-12193: LiO2, Eg=2.31 eV
3. mp-19017: Li2O2, Eg=3.15 eV
...
</code>`<code>
</p>
<p>
---
</p>
<p>
<h2>2.3 ãƒãƒƒãƒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</h2>
</p>
<p>
å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã‚’åŠ¹ç‡çš„ã«å–å¾—ã™ã‚‹ã«ã¯ã€ãƒãƒƒãƒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒå¿…è¦ã§ã™ã€‚APIåˆ¶é™ã‚’è€ƒæ…®ã—ãªãŒã‚‰ã€10,000ä»¶ä»¥ä¸Šã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚
</p>
<p>
<h3>2.3.1 ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†</h3>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹7: ãƒãƒ£ãƒ³ã‚¯åˆ†å‰²ã«ã‚ˆã‚‹å¤§è¦æ¨¡ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</strong>
</p>
<p>
<pre><code class="language-python">from mp_api.client import MPRester
import pandas as pd
import time
</p>
<p>
API_KEY = "your_api_key_here"
</p>
<p>
def batch_download(
    criteria,
    chunk_size=1000,
    max_chunks=10
):
    """
    å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒƒãƒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
</p>
<p>
    Parameters:
    -----------
    criteria : dict
        æ¤œç´¢æ¡ä»¶
    chunk_size : int
        1å›ã‚ãŸã‚Šã®å–å¾—ä»¶æ•°
    max_chunks : int
        æœ€å¤§ãƒãƒ£ãƒ³ã‚¯æ•°
    """
    all_data = []
</p>
<p>
    with MPRester(API_KEY) as mpr:
        for chunk_num in range(max_chunks):
            print(f"ãƒãƒ£ãƒ³ã‚¯ {chunk_num + 1}/{max_chunks} å–å¾—ä¸­...")
</p>
<p>
            docs = mpr.materials.summary.search(
                **criteria,
                num_chunks=max_chunks,
                chunk_size=chunk_size,
                fields=[
                    "material_id",
                    "formula_pretty",
                    "band_gap"
                ]
            )
</p>
<p>
            if not docs:
                print("ãƒ‡ãƒ¼ã‚¿ãªã—ã€çµ‚äº†")
                break
</p>
<p>
            for doc in docs:
                all_data.append({
                    "material_id": doc.material_id,
                    "formula": doc.formula_pretty,
                    "band_gap": doc.band_gap
                })
</p>
<p>
            # APIãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾ç­–
            time.sleep(1)
</p>
<p>
    return pd.DataFrame(all_data)
</p>
<p>
<h1>ä½¿ç”¨ä¾‹: ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ— > 2 eVã®ææ–™ã‚’å¤§é‡å–å¾—</h1>
criteria = {"band_gap": (2.0, None)}
df = batch_download(criteria, chunk_size=1000, max_chunks=5)
</p>
<p>
print(f"\nç·å–å¾—ä»¶æ•°: {len(df)}")
print(df.head())
df.to_csv("wide_bandgap_materials.csv", index=False)
</code></pre>
</p>
<p>
<strong>å‡ºåŠ›</strong>:
</code>`<code>
ãƒãƒ£ãƒ³ã‚¯ 1/5 å–å¾—ä¸­...
ãƒãƒ£ãƒ³ã‚¯ 2/5 å–å¾—ä¸­...
ãƒãƒ£ãƒ³ã‚¯ 3/5 å–å¾—ä¸­...
...
</p>
<p>
ç·å–å¾—ä»¶æ•°: 4523
  material_id formula  band_gap
0      mp-561     GaN      3.20
1     mp-1234     ZnS      2.15
...
</code>`<code>
</p>
<p>
<h3>2.3.2 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒªãƒˆãƒ©ã‚¤</h3>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹8: ãƒ­ãƒã‚¹ãƒˆãªãƒãƒƒãƒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</strong>
</p>
<p>
<pre><code class="language-python">from mp_api.client import MPRester
import pandas as pd
import time
from requests.exceptions import RequestException
</p>
<p>
API_KEY = "your_api_key_here"
</p>
<p>
def robust_batch_download(
    criteria,
    chunk_size=500,
    max_retries=3
):
    """ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ä»˜ããƒãƒƒãƒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰"""
    all_data = []
</p>
<p>
    with MPRester(API_KEY) as mpr:
        chunk_num = 0
        while True:
            retry_count = 0
            success = False
</p>
<p>
            while retry_count < max_retries and not success:
                try:
                    docs = mpr.materials.summary.search(
                        **criteria,
                        chunk_size=chunk_size,
                        fields=[
                            "material_id",
                            "formula_pretty",
                            "band_gap"
                        ]
                    )
</p>
<p>
                    if not docs:
                        return pd.DataFrame(all_data)
</p>
<p>
                    for doc in docs:
                        all_data.append({
                            "material_id": doc.material_id,
                            "formula": doc.formula_pretty,
                            "band_gap": doc.band_gap
                        })
</p>
<p>
                    success = True
                    print(f"ãƒãƒ£ãƒ³ã‚¯ {chunk_num + 1} æˆåŠŸ "
                          f"({len(docs)}ä»¶)")
</p>
<p>
                except RequestException as e:
                    retry_count += 1
                    wait_time = 2 ** retry_count
                    print(
                        f"ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ: {e}, "
                        f"{wait_time}ç§’å¾Œã«ãƒªãƒˆãƒ©ã‚¤..."
                    )
                    time.sleep(wait_time)
</p>
<p>
            if not success:
                print(f"ãƒãƒ£ãƒ³ã‚¯ {chunk_num + 1} ã‚¹ã‚­ãƒƒãƒ—")
</p>
<p>
            chunk_num += 1
            time.sleep(0.5)  # ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾ç­–
</p>
<p>
    return pd.DataFrame(all_data)
</p>
<p>
<h1>ä½¿ç”¨ä¾‹</h1>
criteria = {"elements": ["Li"], "num_elements": 1}
df = robust_batch_download(criteria)
print(f"å–å¾—å®Œäº†: {len(df)}ä»¶")
</code></pre>
</p>
<p>
---
</p>
<p>
<h2>2.4 ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–</h2>
</p>
<p>
<h3>2.4.1 ãƒãƒ³ãƒ‰æ§‹é€ ã®å–å¾—ã¨å¯è¦–åŒ–</h3>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹9: ãƒãƒ³ãƒ‰æ§‹é€ ãƒ‡ãƒ¼ã‚¿ã®å–å¾—</strong>
</p>
<p>
<pre><code class="language-python">from mp_api.client import MPRester
import matplotlib.pyplot as plt
</p>
<p>
API_KEY = "your_api_key_here"
</p>
<p>
<h1>Siã®ãƒãƒ³ãƒ‰æ§‹é€ ã‚’å–å¾—</h1>
with MPRester(API_KEY) as mpr:
    # ãƒãƒ³ãƒ‰æ§‹é€ ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
    bs_data = mpr.get_bandstructure_by_material_id("mp-149")
</p>
<p>
    # åŸºæœ¬æƒ…å ±
    print(f"ææ–™: {bs_data.structure.composition}")
    print(f"ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—: {bs_data.get_band_gap()['energy']} eV")
    print(f"ç›´æ¥/é–“æ¥: {bs_data.get_band_gap()['transition']}")
</p>
<p>
    # ãƒãƒ³ãƒ‰æ§‹é€ ãƒ—ãƒ­ãƒƒãƒˆ
    plotter = bs_data.get_plotter()
    plotter.get_plot(
        ylim=(-10, 10),
        vbm_cbm_marker=True
    )
    plt.savefig("Si_band_structure.png", dpi=150)
    plt.show()
</code></pre>
</p>
<p>
<strong>å‡ºåŠ›</strong>:
</code>`<code>
ææ–™: Si1
ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—: 1.14 eV
ç›´æ¥/é–“æ¥: indirect
</code>`<code>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹10: çŠ¶æ…‹å¯†åº¦ï¼ˆDOSï¼‰ã®å–å¾—</strong>
</p>
<p>
<pre><code class="language-python">from mp_api.client import MPRester
import matplotlib.pyplot as plt
</p>
<p>
API_KEY = "your_api_key_here"
</p>
<p>
<h1>çŠ¶æ…‹å¯†åº¦ã‚’å–å¾—</h1>
with MPRester(API_KEY) as mpr:
    dos_data = mpr.get_dos_by_material_id("mp-149")
</p>
<p>
    # DOSãƒ—ãƒ­ãƒƒãƒˆ
    plotter = dos_data.get_plotter()
    plotter.get_plot(
        xlim=(-10, 10),
        ylim=(0, 5)
    )
    plt.xlabel("Energy (eV)")
    plt.ylabel("DOS (states/eV)")
    plt.title("Si Density of States")
    plt.savefig("Si_DOS.png", dpi=150)
    plt.show()
</code></pre>
</p>
<p>
<h3>2.4.2 çŠ¶æ…‹å›³ã®å–å¾—</h3>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹11: äºŒå…ƒç³»çŠ¶æ…‹å›³</strong>
</p>
<p>
<pre><code class="language-python">from mp_api.client import MPRester
import matplotlib.pyplot as plt
</p>
<p>
API_KEY = "your_api_key_here"
</p>
<p>
<h1>Li-Oç³»ã®çŠ¶æ…‹å›³ã‚’å–å¾—</h1>
with MPRester(API_KEY) as mpr:
    pd_data = mpr.get_phase_diagram_by_elements(["Li", "O"])
</p>
<p>
    # çŠ¶æ…‹å›³ãƒ—ãƒ­ãƒƒãƒˆ
    plotter = pd_data.get_plotter()
    plotter.get_plot(label_stable=True)
    plt.savefig("Li-O_phase_diagram.png", dpi=150)
    plt.show()
</p>
<p>
    # å®‰å®šç›¸ã‚’è¡¨ç¤º
    print("å®‰å®šç›¸:")
    for entry in pd_data.stable_entries:
        print(
            f"- {entry.composition.reduced_formula}: "
            f"{pd_data.get_form_energy_per_atom(entry):.3f} "
            f"eV/atom"
        )
</code></pre>
</p>
<p>
---
</p>
<p>
<h2>2.5 å®Ÿè·µçš„ãªãƒ‡ãƒ¼ã‚¿å–å¾—æˆ¦ç•¥</h2>
</p>
<p>
<h3>2.5.1 ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ´»ç”¨</h3>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹12: ãƒ­ãƒ¼ã‚«ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ã‚ˆã‚‹é«˜é€ŸåŒ–</strong>
</p>
<p>
<pre><code class="language-python">from mp_api.client import MPRester
import pandas as pd
import pickle
import os
</p>
<p>
API_KEY = "your_api_key_here"
CACHE_FILE = "mp_data_cache.pkl"
</p>
<p>
def get_data_with_cache(criteria, cache_file=CACHE_FILE):
    """ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½ä»˜ããƒ‡ãƒ¼ã‚¿å–å¾—"""
</p>
<p>
    # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒå­˜åœ¨ã™ã‚Œã°èª­ã¿è¾¼ã¿
    if os.path.exists(cache_file):
        print("ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿...")
        with open(cache_file, 'rb') as f:
            return pickle.load(f)
</p>
<p>
    # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒãªã‘ã‚Œã°APIã‹ã‚‰å–å¾—
    print("APIã‹ã‚‰ãƒ‡ãƒ¼ã‚¿å–å¾—...")
    with MPRester(API_KEY) as mpr:
        docs = mpr.materials.summary.search(
            **criteria,
            fields=["material_id", "formula_pretty", "band_gap"]
        )
</p>
<p>
        data = pd.DataFrame([
            {
                "material_id": doc.material_id,
                "formula": doc.formula_pretty,
                "band_gap": doc.band_gap
            }
            for doc in docs
        ])
</p>
<p>
    # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ä¿å­˜
    with open(cache_file, 'wb') as f:
        pickle.dump(data, f)
    print(f"ãƒ‡ãƒ¼ã‚¿ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ä¿å­˜: {cache_file}")
</p>
<p>
    return data
</p>
<p>
<h1>ä½¿ç”¨ä¾‹</h1>
criteria = {"band_gap": (2.0, 3.0), "num_elements": 2}
df1 = get_data_with_cache(criteria)  # APIå–å¾—
df2 = get_data_with_cache(criteria)  # ã‚­ãƒ£ãƒƒã‚·ãƒ¥èª­ã¿è¾¼ã¿
</p>
<p>
print(f"ãƒ‡ãƒ¼ã‚¿ä»¶æ•°: {len(df1)}")
</code></pre>
</p>
<p>
<h3>2.5.2 ãƒ‡ãƒ¼ã‚¿å“è³ªãƒã‚§ãƒƒã‚¯</h3>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹13: ãƒ‡ãƒ¼ã‚¿å“è³ªã®æ¤œè¨¼</strong>
</p>
<p>
<pre><code class="language-python">from mp_api.client import MPRester
import pandas as pd
import numpy as np
</p>
<p>
API_KEY = "your_api_key_here"
</p>
<p>
def quality_check(df):
    """ãƒ‡ãƒ¼ã‚¿å“è³ªãƒã‚§ãƒƒã‚¯"""
    print("=== ãƒ‡ãƒ¼ã‚¿å“è³ªãƒ¬ãƒãƒ¼ãƒˆ ===")
</p>
<p>
    # æ¬ æå€¤ãƒã‚§ãƒƒã‚¯
    print(f"\næ¬ æå€¤:")
    print(df.isnull().sum())
</p>
<p>
    # å¤–ã‚Œå€¤ãƒã‚§ãƒƒã‚¯ï¼ˆãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—ï¼‰
    if 'band_gap' in df.columns:
        bg_mean = df['band_gap'].mean()
        bg_std = df['band_gap'].std()
        outliers = df[
            (df['band_gap'] < bg_mean - 3 * bg_std) |
            (df['band_gap'] > bg_mean + 3 * bg_std)
        ]
        print(f"\nãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—å¤–ã‚Œå€¤: {len(outliers)}ä»¶")
        if len(outliers) > 0:
            print(outliers)
</p>
<p>
    # é‡è¤‡ãƒã‚§ãƒƒã‚¯
    duplicates = df.duplicated(subset=['material_id'])
    print(f"\né‡è¤‡ãƒ‡ãƒ¼ã‚¿: {duplicates.sum()}ä»¶")
</p>
<p>
<h1>ä½¿ç”¨ä¾‹</h1>
with MPRester(API_KEY) as mpr:
    docs = mpr.materials.summary.search(
        elements=["Li", "O"],
        fields=["material_id", "formula_pretty", "band_gap"]
    )
</p>
<p>
    df = pd.DataFrame([
        {
            "material_id": doc.material_id,
            "formula": doc.formula_pretty,
            "band_gap": doc.band_gap
        }
        for doc in docs
    ])
</p>
<p>
quality_check(df)
</code></pre>
</p>
<p>
---
</p>
<p>
<h2>2.6 é«˜åº¦ãªã‚¯ã‚¨ãƒªæŠ€è¡“</h2>
</p>
<p>
<h3>2.6.1 è¨ˆç®—ã•ã‚ŒãŸãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å–å¾—</h3>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹14: ã‚¤ã‚ªãƒ³ä¼å°åº¦ãƒ‡ãƒ¼ã‚¿</strong>
</p>
<p>
<pre><code class="language-python">from mp_api.client import MPRester
import pandas as pd
</p>
<p>
API_KEY = "your_api_key_here"
</p>
<p>
<h1>ã‚¤ã‚ªãƒ³ä¼å°ä½“ã®æ¤œç´¢</h1>
with MPRester(API_KEY) as mpr:
    # Liã‚¤ã‚ªãƒ³ä¼å°ä½“
    docs = mpr.materials.summary.search(
        elements=["Li"],
        theoretical=True,  # ç†è«–äºˆæ¸¬ãƒ‡ãƒ¼ã‚¿ã‚‚å«ã‚€
        fields=[
            "material_id",
            "formula_pretty",
            "band_gap",
            "formation_energy_per_atom"
        ]
    )
</p>
<p>
    df = pd.DataFrame([
        {
            "material_id": doc.material_id,
            "formula": doc.formula_pretty,
            "band_gap": doc.band_gap,
            "energy": doc.formation_energy_per_atom
        }
        for doc in docs
    ])
</p>
<p>
    # å®‰å®šã‹ã¤ãƒ¯ã‚¤ãƒ‰ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—
    stable = df[df['energy'] < -0.1]
    wide_gap = stable[stable['band_gap'] > 2.0]
</p>
<p>
    print(f"å®‰å®šãªLiå«æœ‰ææ–™: {len(stable)}ä»¶")
    print(f"ãƒ¯ã‚¤ãƒ‰ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—: {len(wide_gap)}ä»¶")
    print(wide_gap.head(10))
</code></pre>
</p>
<p>
<h3>2.6.2 è¡¨é¢ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¨å¸ç€ãƒ‡ãƒ¼ã‚¿</h3>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹15: è¡¨é¢ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®å–å¾—</strong>
</p>
<p>
<pre><code class="language-python">from mp_api.client import MPRester
</p>
<p>
API_KEY = "your_api_key_here"
</p>
<p>
<h1>è¡¨é¢ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—</h1>
with MPRester(API_KEY) as mpr:
    # TiO2ã®è¡¨é¢ã‚¨ãƒãƒ«ã‚®ãƒ¼
    surface_data = mpr.get_surface_data("mp-2657")  # TiO2
</p>
<p>
    print(f"ææ–™: {surface_data['material_id']}")
    print(f"\nè¡¨é¢ã‚¨ãƒãƒ«ã‚®ãƒ¼ (J/mÂ²):")
    for surface in surface_data['surfaces']:
        miller = surface['miller_index']
        energy = surface['surface_energy']
        print(f"  {miller}: {energy:.3f} J/mÂ²")
</code></pre>
</p>
<p>
---
</p>
<p>
<h2>2.7 MPResterã®å®Ÿè·µãƒ‘ã‚¿ãƒ¼ãƒ³</h2>
</p>
<p>
<h3>2.7.1 è¤‡æ•°æ¡ä»¶ã®çµ„ã¿åˆã‚ã›</h3>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹16: é›»æ± ææ–™ã®æ¢ç´¢</strong>
</p>
<p>
<pre><code class="language-python">from mp_api.client import MPRester
import pandas as pd
</p>
<p>
API_KEY = "your_api_key_here"
</p>
<p>
def find_battery_cathodes():
    """é›»æ± æ­£æ¥µææ–™ã®æ¢ç´¢"""
    with MPRester(API_KEY) as mpr:
        # æ¡ä»¶: Liå«æœ‰ã€é·ç§»é‡‘å±å«æœ‰ã€å®‰å®š
        docs = mpr.materials.summary.search(
            elements=["Li", "Co", "O"],  # Li-Co-Oç³»
            energy_above_hull=(0, 0.05),  # å®‰å®šæ€§
            fields=[
                "material_id",
                "formula_pretty",
                "energy_above_hull",
                "formation_energy_per_atom"
            ]
        )
</p>
<p>
        results = []
        for doc in docs:
            # ç†è«–å®¹é‡ã‚’æ¨å®šï¼ˆç°¡æ˜“ç‰ˆï¼‰
            formula = doc.formula_pretty
            if "Li" in formula and "Co" in formula:
                results.append({
                    "material_id": doc.material_id,
                    "formula": formula,
                    "stability": doc.energy_above_hull,
                    "formation_energy":
                        doc.formation_energy_per_atom
                })
</p>
<p>
        df = pd.DataFrame(results)
        return df.sort_values('stability')
</p>
<p>
<h1>å®Ÿè¡Œ</h1>
cathodes = find_battery_cathodes()
print(f"å€™è£œæ­£æ¥µææ–™: {len(cathodes)}ä»¶")
print(cathodes.head(10))
</code></pre>
</p>
<p>
<h3>2.7.2 ãƒ‡ãƒ¼ã‚¿ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã¨é›†ç´„</h3>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹17: çµ±è¨ˆåˆ†æ</strong>
</p>
<p>
<pre><code class="language-python">from mp_api.client import MPRester
import pandas as pd
import matplotlib.pyplot as plt
</p>
<p>
API_KEY = "your_api_key_here"
</p>
<p>
<h1>å…ƒç´ ã”ã¨ã®ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—åˆ†å¸ƒ</h1>
with MPRester(API_KEY) as mpr:
    # é…¸åŒ–ç‰©ã®ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—
    docs = mpr.materials.summary.search(
        elements=["O"],
        num_elements=2,
        fields=["formula_pretty", "band_gap", "elements"]
    )
</p>
<p>
    data = []
    for doc in docs:
        # Oã‚’é™¤ãå…ƒç´ ã‚’ç‰¹å®š
        elements = [e for e in doc.elements if e != "O"]
        if elements and doc.band_gap is not None:
            data.append({
                "element": elements[0],
                "band_gap": doc.band_gap
            })
</p>
<p>
    df = pd.DataFrame(data)
</p>
<p>
    # å…ƒç´ ã”ã¨ã®å¹³å‡ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—
    avg_bg = df.groupby('element')['band_gap'].agg(
        ['mean', 'std', 'count']
    )
    avg_bg = avg_bg.sort_values('mean', ascending=False)
</p>
<p>
    print("å…ƒç´ é…¸åŒ–ç‰©ã®å¹³å‡ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—ï¼ˆä¸Šä½10ï¼‰:")
    print(avg_bg.head(10))
</p>
<p>
    # å¯è¦–åŒ–
    top10 = avg_bg.head(10)
    plt.figure(figsize=(10, 6))
    plt.bar(top10.index, top10['mean'], yerr=top10['std'])
    plt.xlabel("Element")
    plt.ylabel("Average Band Gap (eV)")
    plt.title("Average Band Gap of Binary Oxides")
    plt.xticks(rotation=45)
    plt.tight_layout()
    plt.savefig("oxide_bandgap_analysis.png", dpi=150)
    plt.show()
</code></pre>
</p>
<p>
---
</p>
<p>
<h2>2.8 APIãƒ¬ãƒ¼ãƒˆåˆ¶é™ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</h2>
</p>
<p>
<h3>2.8.1 ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾ç­–</h3>
</p>
<p>
Materials Project APIã«ã¯ä»¥ä¸‹ã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãŒã‚ã‚Šã¾ã™ï¼š
<li><strong>ç„¡æ–™ãƒ—ãƒ©ãƒ³</strong>: 2000ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/æ—¥</li>
<li><strong>Premium</strong>: 10000ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/æ—¥</li>
</p>
<p>
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹18: ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾å¿œã®ãƒ©ãƒƒãƒ‘ãƒ¼</strong>
</p>
<p>
<pre><code class="language-python">from mp_api.client import MPRester
import time
from functools import wraps
</p>
<p>
API_KEY = "your_api_key_here"
</p>
<p>
class RateLimitedMPRester:
    """ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾å¿œMPRester"""
</p>
<p>
    def __init__(self, api_key, delay=0.5):
        self.api_key = api_key
        self.delay = delay
        self.request_count = 0
</p>
<p>
    def __enter__(self):
        self.mpr = MPRester(self.api_key).__enter__()
        return self
</p>
<p>
    def __exit__(self, *args):
        print(
            f"\nç·ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°: {self.request_count}"
        )
        return self.mpr.__exit__(*args)
</p>
<p>
    def search(self, **kwargs):
        """ãƒ¬ãƒ¼ãƒˆåˆ¶é™ä»˜ãæ¤œç´¢"""
        result = self.mpr.materials.summary.search(**kwargs)
        self.request_count += 1
        time.sleep(self.delay)
        return result
</p>
<p>
<h1>ä½¿ç”¨ä¾‹</h1>
with RateLimitedMPRester(API_KEY, delay=1.0) as mpr:
    # è¤‡æ•°å›æ¤œç´¢
    for element in ["Li", "Na", "K"]:
        docs = mpr.search(
            elements=[element],
            num_elements=1,
            fields=["material_id", "formula_pretty"]
        )
        print(f"{element}: {len(docs)}ä»¶")
</code></pre>
</p>
<p>
---
</p>
<p>
<h2>2.9 æœ¬ç« ã®ã¾ã¨ã‚</h2>
</p>
<p>
<h3>å­¦ã‚“ã ã“ã¨</h3>
</p>
<p>
1. <strong>pymatgenåŸºç¤</strong>
   - Structureã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ“ä½œ
   - çµæ™¶æ§‹é€ ã®å¯è¦–åŒ–
   - å¯¾ç§°æ€§è§£æ
</p>
<p>
2. <strong>MPRester API</strong>
   - åŸºæœ¬çš„ãªã‚¯ã‚¨ãƒªï¼ˆmaterial_idã€formulaï¼‰
   - é«˜åº¦ãªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆè«–ç†æ¼”ç®—ã€ç¯„å›²æŒ‡å®šï¼‰
   - ãƒãƒƒãƒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆ10,000ä»¶ä»¥ä¸Šï¼‰
</p>
<p>
3. <strong>ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–</strong>
   - ãƒãƒ³ãƒ‰æ§‹é€ ãƒ—ãƒ­ãƒƒãƒˆ
   - çŠ¶æ…‹å¯†åº¦ï¼ˆDOSï¼‰
   - çŠ¶æ…‹å›³
</p>
<p>
4. <strong>å®Ÿè·µãƒ†ã‚¯ãƒ‹ãƒƒã‚¯</strong>
   - ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ´»ç”¨
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
   - ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾ç­–
</p>
<p>
<h3>é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ</h3>
</p>
<p>
<li>âœ… pymatgenã¯çµæ™¶æ§‹é€ æ“ä½œã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</li>
<li>âœ… MPRester APIã§140kææ–™ã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½</li>
<li>âœ… ãƒãƒƒãƒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¯ chunk_size ã§åˆ¶å¾¡</li>
<li>âœ… ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§é‡è¤‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‰Šæ¸›</li>
<li>âœ… ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã‚’è€ƒæ…®ã—ãŸã‚³ãƒ¼ãƒ‰è¨­è¨ˆãŒé‡è¦</li>
</p>
<p>
<h3>æ¬¡ã®ç« ã¸</h3>
</p>
<p>
ç¬¬3ç« ã§ã¯ã€è¤‡æ•°ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®çµ±åˆã¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å­¦ã³ã¾ã™ï¼š
<li>Materials Projectã¨AFLOWã®çµ±åˆ</li>
<li>ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°</li>
<li>æ¬ æå€¤å‡¦ç†</li>
<li>è‡ªå‹•æ›´æ–°ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³</li>
</p>
<p>
<strong><a href="./chapter-3.md">ç¬¬3ç« ï¼šãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆã¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ â†’</a></strong>
</p>
<p>
---
</p>
<p>
<h2>æ¼”ç¿’å•é¡Œ</h2>
</p>
<p>
<h3>å•é¡Œ1ï¼ˆé›£æ˜“åº¦ï¼šeasyï¼‰</h3>
</p>
<p>
pymatgenã‚’ä½¿ç”¨ã—ã¦ã€Cuã®FCCæ§‹é€ ï¼ˆface-centered cubicï¼‰ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã®æƒ…å ±ã‚’è¡¨ç¤ºã—ã¦ãã ã•ã„ã€‚
</p>
<p>
<strong>è¦æ±‚äº‹é …</strong>:
1. æ ¼å­å®šæ•°: 3.61 Ã…
2. ç©ºé–“ç¾¤è¨˜å·
3. çµæ™¶ç³»
4. å¯†åº¦
</p>
<p>
<details>
<summary>ãƒ’ãƒ³ãƒˆ</summary>
</p>
<p>
<pre><code class="language-python">from pymatgen.core import Structure, Lattice
</p>
<p>
<h1>FCCæ§‹é€ ã®åº§æ¨™</h1>
lattice = Lattice.cubic(3.61)
species = ["Cu"] * 4
coords = [[0, 0, 0], [0.5, 0.5, 0], ...]
</code></pre>
</p>
<p>
</details>
</p>
<p>
<details>
<summary>è§£ç­”ä¾‹</summary>
</p>
<p>
<pre><code class="language-python">from pymatgen.core import Structure, Lattice
from pymatgen.symmetry.analyzer import SpacegroupAnalyzer
</p>
<p>
<h1>Cu FCCæ§‹é€ </h1>
lattice = Lattice.cubic(3.61)
species = ["Cu"] * 4
coords = [
    [0, 0, 0],
    [0.5, 0.5, 0],
    [0.5, 0, 0.5],
    [0, 0.5, 0.5]
]
</p>
<p>
structure = Structure(lattice, species, coords)
</p>
<p>
<h1>å¯¾ç§°æ€§è§£æ</h1>
sga = SpacegroupAnalyzer(structure)
</p>
<p>
print(f"åŒ–å­¦å¼: {structure.composition}")
print(f"æ ¼å­å®šæ•°: {structure.lattice.abc}")
print(f"ç©ºé–“ç¾¤: {sga.get_space_group_symbol()}")
print(f"çµæ™¶ç³»: {sga.get_crystal_system()}")
print(f"å¯†åº¦: {structure.density:.2f} g/cmÂ³")
</code></pre>
</p>
<p>
<strong>å‡ºåŠ›</strong>:
</code>`<code>
åŒ–å­¦å¼: Cu4
æ ¼å­å®šæ•°: (3.61, 3.61, 3.61)
ç©ºé–“ç¾¤: Fm-3m
çµæ™¶ç³»: cubic
å¯†åº¦: 8.96 g/cmÂ³
</code>`<code>
</p>
<p>
</details>
</p>
<p>
---
</p>
<p>
<h3>å•é¡Œ2ï¼ˆé›£æ˜“åº¦ï¼šmediumï¼‰</h3>
</p>
<p>
Materials Projectã‹ã‚‰ä»¥ä¸‹ã®æ¡ä»¶ã‚’æº€ãŸã™è§¦åª’ææ–™å€™è£œã‚’æ¤œç´¢ã—ã€CSVä¿å­˜ã—ã¦ãã ã•ã„ã€‚
</p>
<p>
<strong>æ¡ä»¶</strong>:
<li>é·ç§»é‡‘å±ï¼ˆTi, V, Cr, Mn, Fe, Co, Niï¼‰ã‚’å«ã‚€</li>
<li>é…¸ç´ ã‚’å«ã‚€</li>
<li>ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ— < 3 eVï¼ˆé›»å­ä¼å°æ€§ï¼‰</li>
<li>å®‰å®šæ€§: energy_above_hull < 0.1 eV/atom</li>
</p>
<p>
<strong>è¦æ±‚äº‹é …</strong>:
1. æ¤œç´¢çµæœä»¶æ•°ã‚’è¡¨ç¤º
2. material_idã€formulaã€band_gapã€stabilityã‚’CSVä¿å­˜
3. ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—ã®åˆ†å¸ƒã‚’æ£’ã‚°ãƒ©ãƒ•åŒ–
</p>
<p>
<details>
<summary>è§£ç­”ä¾‹</summary>
</p>
<p>
<pre><code class="language-python">from mp_api.client import MPRester
import pandas as pd
import matplotlib.pyplot as plt
</p>
<p>
API_KEY = "your_api_key_here"
</p>
<p>
<h1>é·ç§»é‡‘å±ãƒªã‚¹ãƒˆ</h1>
transition_metals = ["Ti", "V", "Cr", "Mn", "Fe", "Co", "Ni"]
</p>
<p>
all_results = []
</p>
<p>
with MPRester(API_KEY) as mpr:
    for tm in transition_metals:
        docs = mpr.materials.summary.search(
            elements=[tm, "O"],
            band_gap=(None, 3.0),
            energy_above_hull=(0, 0.1),
            fields=[
                "material_id",
                "formula_pretty",
                "band_gap",
                "energy_above_hull"
            ]
        )
</p>
<p>
        for doc in docs:
            all_results.append({
                "material_id": doc.material_id,
                "formula": doc.formula_pretty,
                "band_gap": doc.band_gap,
                "stability": doc.energy_above_hull,
                "transition_metal": tm
            })
</p>
<p>
df = pd.DataFrame(all_results)
</p>
<p>
print(f"è§¦åª’å€™è£œææ–™: {len(df)}ä»¶")
print(df.head(10))
</p>
<p>
<h1>CSVä¿å­˜</h1>
df.to_csv("catalyst_candidates.csv", index=False)
</p>
<p>
<h1>ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—åˆ†å¸ƒ</h1>
plt.figure(figsize=(10, 6))
plt.hist(df['band_gap'], bins=30, edgecolor='black')
plt.xlabel("Band Gap (eV)")
plt.ylabel("Count")
plt.title("Band Gap Distribution of Catalyst Candidates")
plt.grid(axis='y', alpha=0.3)
plt.savefig("catalyst_bandgap_dist.png", dpi=150)
plt.show()
</code></pre>
</p>
<p>
</details>
</p>
<p>
---
</p>
<p>
<h3>å•é¡Œ3ï¼ˆé›£æ˜“åº¦ï¼šhardï¼‰</h3>
</p>
<p>
Materials Projectã‹ã‚‰10,000ä»¶ä»¥ä¸Šã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒƒãƒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã€çµ±è¨ˆåˆ†æã‚’è¡Œã£ã¦ãã ã•ã„ã€‚
</p>
<p>
<strong>èª²é¡Œ</strong>:
1. ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ— > 0 eVã®ææ–™ã‚’å…¨ã¦å–å¾—
2. å…ƒç´ æ•°ã”ã¨ã®ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—å¹³å‡ã‚’è¨ˆç®—
3. çµæ™¶ç³»ã”ã¨ã®ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—åˆ†å¸ƒã‚’å¯è¦–åŒ–
4. ä¸Šä½10%ã®ãƒ¯ã‚¤ãƒ‰ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—ææ–™ã‚’ãƒªã‚¹ãƒˆåŒ–
</p>
<p>
<strong>åˆ¶ç´„</strong>:
<li>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Ÿè£…</li>
<li>ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½å®Ÿè£…</li>
<li>ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼è¡¨ç¤º</li></ul>
</p>
<p>
<details>
<summary>è§£ç­”ä¾‹</summary>
</p>
<p>
<pre><code class="language-python">from mp_api.client import MPRester
import pandas as pd
import matplotlib.pyplot as plt
import pickle
import os
from tqdm import tqdm
</p>
<p>
API_KEY = "your_api_key_here"
CACHE_FILE = "wide_bg_cache.pkl"
</p>
<p>
def batch_download_with_progress():
    """ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ä»˜ããƒãƒƒãƒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰"""
</p>
<p>
    # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒã‚§ãƒƒã‚¯
    if os.path.exists(CACHE_FILE):
        print("ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿...")
        with open(CACHE_FILE, 'rb') as f:
            return pickle.load(f)
</p>
<p>
    all_data = []
</p>
<p>
    with MPRester(API_KEY) as mpr:
        # ç·ä»¶æ•°å–å¾—
        total_docs = mpr.materials.summary.search(
            band_gap=(0.1, None),
            fields=["material_id"]
        )
        total = len(total_docs)
        print(f"ç·ãƒ‡ãƒ¼ã‚¿æ•°: {total}ä»¶")
</p>
<p>
        # ãƒãƒ£ãƒ³ã‚¯åˆ†å‰²ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
        chunk_size = 1000
        num_chunks = (total // chunk_size) + 1
</p>
<p>
        for i in tqdm(range(num_chunks), desc="ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰"):
            docs = mpr.materials.summary.search(
                band_gap=(0.1, None),
                num_chunks=num_chunks,
                chunk_size=chunk_size,
                fields=[
                    "material_id",
                    "formula_pretty",
                    "band_gap",
                    "num_elements",
                    "symmetry"
                ]
            )
</p>
<p>
            for doc in docs:
                all_data.append({
                    "material_id": doc.material_id,
                    "formula": doc.formula_pretty,
                    "band_gap": doc.band_gap,
                    "num_elements": doc.num_elements,
                    "crystal_system":
                        doc.symmetry.get('crystal_system')
                })
</p>
<p>
    df = pd.DataFrame(all_data)
</p>
<p>
    # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä¿å­˜
    with open(CACHE_FILE, 'wb') as f:
        pickle.dump(df, f)
</p>
<p>
    return df
</p>
<p>
<h1>ãƒ‡ãƒ¼ã‚¿å–å¾—</h1>
df = batch_download_with_progress()
</p>
<p>
print(f"\nç·ãƒ‡ãƒ¼ã‚¿æ•°: {len(df)}")
</p>
<p>
<h1>å…ƒç´ æ•°ã”ã¨ã®å¹³å‡ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—</h1>
avg_by_elements = df.groupby('num_elements')['band_gap'].mean()
print("\nå…ƒç´ æ•°ã”ã¨ã®å¹³å‡ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—:")
print(avg_by_elements)
</p>
<p>
<h1>çµæ™¶ç³»ã”ã¨ã®åˆ†å¸ƒ</h1>
fig, axes = plt.subplots(2, 3, figsize=(15, 10))
crystal_systems = df['crystal_system'].unique()
</p>
<p>
for i, cs in enumerate(crystal_systems[:6]):
    ax = axes[i // 3, i % 3]
    data = df[df['crystal_system'] == cs]['band_gap']
    ax.hist(data, bins=30, edgecolor='black')
    ax.set_title(f"{cs} (n={len(data)})")
    ax.set_xlabel("Band Gap (eV)")
    ax.set_ylabel("Count")
</p>
<p>
plt.tight_layout()
plt.savefig("crystal_system_bandgap.png", dpi=150)
plt.show()
</p>
<p>
<h1>ä¸Šä½10%ã®ãƒ¯ã‚¤ãƒ‰ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—ææ–™</h1>
threshold = df['band_gap'].quantile(0.9)
top10 = df[df['band_gap'] >= threshold].sort_values(
    'band_gap', ascending=False
)
</p>
<p>
print(f"\nãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—ä¸Šä½10%ï¼ˆé–¾å€¤: {threshold:.2f} eVï¼‰:")
print(top10.head(20))
</p>
<p>
top10.to_csv("top10_percent_wide_bg.csv", index=False)
</code></pre>
</p>
<p>
<strong>å‡ºåŠ›ä¾‹</strong>:
</code>`<code>
ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿...
</p>
<p>
ç·ãƒ‡ãƒ¼ã‚¿æ•°: 12453
</p>
<p>
å…ƒç´ æ•°ã”ã¨ã®å¹³å‡ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—:
num_elements
1    3.25
2    2.87
3    2.13
4    1.65
...
</p>
<p>
ãƒãƒ³ãƒ‰ã‚®ãƒ£ãƒƒãƒ—ä¸Šä½10%ï¼ˆé–¾å€¤: 5.23 eVï¼‰:
   material_id formula  band_gap  num_elements crystal_system
0       mp-123    MgO      7.83             2          cubic
1       mp-456    BN       6.42             2      hexagonal
...
</code>``
</p>
<p>
</details>
</p>
<p>
---
</p>
<p>
<h2>å‚è€ƒæ–‡çŒ®</h2>
</p>
<p>
1. Ong, S. P. et al. (2013). "Python Materials Genomics (pymatgen): A robust, open-source python library for materials analysis." <em>Computational Materials Science</em>, 68, 314-319.
   DOI: <a href="https://doi.org/10.1016/j.commatsci.2012.10.028">10.1016/j.commatsci.2012.10.028</a>
</p>
<p>
2. Materials Project Documentation. "API Documentation." URL: <a href="https://docs.materialsproject.org">docs.materialsproject.org</a>
</p>
<p>
3. Jain, A. et al. (2013). "Commentary: The Materials Project." <em>APL Materials</em>, 1(1), 011002.
   DOI: <a href="https://doi.org/10.1063/1.4812323">10.1063/1.4812323</a>
</p>
<p>
---
</p>
<p>
<h2>ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³</h2>
</p>
<p>
<h3>å‰ã®ç« </h3>
<strong><a href="./chapter-1.md">ç¬¬1ç« ï¼šææ–™ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å…¨è²Œ â†</a></strong>
</p>
<p>
<h3>æ¬¡ã®ç« </h3>
<strong><a href="./chapter-3.md">ç¬¬3ç« ï¼šãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆã¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ â†’</a></strong>
</p>
<p>
<h3>ã‚·ãƒªãƒ¼ã‚ºç›®æ¬¡</h3>
<strong><a href="./index.md">â† ã‚·ãƒªãƒ¼ã‚ºç›®æ¬¡ã«æˆ»ã‚‹</a></strong>
</p>
<p>
---
</p>
<p>
<h2>è‘—è€…æƒ…å ±</h2>
</p>
<p>
<strong>ä½œæˆè€…</strong>: AI Terakoya Content Team
<strong>ç›£ä¿®</strong>: Dr. Yusuke Hashimotoï¼ˆæ±åŒ—å¤§å­¦ï¼‰
<strong>ä½œæˆæ—¥</strong>: 2025-10-17
<strong>ãƒãƒ¼ã‚¸ãƒ§ãƒ³</strong>: 1.0
</p>
<p>
<strong>ãƒ©ã‚¤ã‚»ãƒ³ã‚¹</strong>: Creative Commons BY 4.0
</p>
<p>
---
</p>
<p>
<strong>æ¬¡ã®ç« ã§å­¦ç¿’ã‚’ç¶šã‘ã¾ã—ã‚‡ã†ï¼</strong>

</p>

        <div class="navigation">
            <div>
                <a href="chapter-1.html" class="btn btn-secondary">â† å‰ã¸</a>
                <a href="index.html" class="btn btn-secondary">ç›®æ¬¡ã¸</a>
            </div>
            <div>
                <a href="chapter-3.html" class="btn btn-primary">æ¬¡ã¸ â†’</a>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 AI Terakoya - Tohoku University. All rights reserved.</p>
        <p><a href="https://ai.tohoku.ac.jp">AI Terakoya Home</a></p>
    </footer>
</body>
</html>