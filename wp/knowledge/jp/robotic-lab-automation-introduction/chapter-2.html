<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>chapter-2 - AI Terakoya</title>

    <style>
        :root {
            --color-primary: #2c3e50;
            --color-primary-dark: #1a252f;
            --color-accent: #7b2cbf;
            --color-accent-light: #9d4edd;
            --color-text: #2d3748;
            --color-text-light: #4a5568;
            --color-bg: #ffffff;
            --color-bg-alt: #f7fafc;
            --color-border: #e2e8f0;
            --color-code-bg: #f8f9fa;
            --color-link: #3182ce;
            --color-link-hover: #2c5aa0;

            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 3rem;

            --font-body: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            --font-mono: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;

            --border-radius: 8px;
            --box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            line-height: 1.7;
            color: var(--color-text);
            background-color: var(--color-bg);
            font-size: 16px;
        }

        header {
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
            color: white;
            padding: var(--spacing-xl) var(--spacing-md);
            margin-bottom: var(--spacing-xl);
            box-shadow: var(--box-shadow);
        }

        .header-content {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: var(--spacing-sm);
            line-height: 1.2;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.95;
            font-weight: 400;
            margin-bottom: var(--spacing-md);
        }

        .meta {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-md);
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 var(--spacing-md) var(--spacing-xl);
        }

        h2 {
            font-size: 1.75rem;
            color: var(--color-primary);
            margin-top: var(--spacing-xl);
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-xs);
            border-bottom: 3px solid var(--color-accent);
        }

        h3 {
            font-size: 1.4rem;
            color: var(--color-primary);
            margin-top: var(--spacing-lg);
            margin-bottom: var(--spacing-sm);
        }

        h4 {
            font-size: 1.1rem;
            color: var(--color-primary-dark);
            margin-top: var(--spacing-md);
            margin-bottom: var(--spacing-sm);
        }

        p {
            margin-bottom: var(--spacing-md);
            color: var(--color-text);
        }

        a {
            color: var(--color-link);
            text-decoration: none;
            transition: color 0.2s;
        }

        a:hover {
            color: var(--color-link-hover);
            text-decoration: underline;
        }

        ul, ol {
            margin-left: var(--spacing-lg);
            margin-bottom: var(--spacing-md);
        }

        li {
            margin-bottom: var(--spacing-xs);
            color: var(--color-text);
        }

        pre {
            background-color: var(--color-code-bg);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            padding: var(--spacing-md);
            overflow-x: auto;
            margin-bottom: var(--spacing-md);
            font-family: var(--font-mono);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        code {
            font-family: var(--font-mono);
            font-size: 0.9em;
            background-color: var(--color-code-bg);
            padding: 0.2em 0.4em;
            border-radius: 3px;
        }

        pre code {
            background-color: transparent;
            padding: 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: var(--spacing-md);
            font-size: 0.95rem;
        }

        th, td {
            border: 1px solid var(--color-border);
            padding: var(--spacing-sm);
            text-align: left;
        }

        th {
            background-color: var(--color-bg-alt);
            font-weight: 600;
            color: var(--color-primary);
        }

        blockquote {
            border-left: 4px solid var(--color-accent);
            padding-left: var(--spacing-md);
            margin: var(--spacing-md) 0;
            color: var(--color-text-light);
            font-style: italic;
            background-color: var(--color-bg-alt);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        .mermaid {
            text-align: center;
            margin: var(--spacing-lg) 0;
            background-color: var(--color-bg-alt);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        details {
            background-color: var(--color-bg-alt);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        summary {
            cursor: pointer;
            font-weight: 600;
            color: var(--color-primary);
            user-select: none;
            padding: var(--spacing-xs);
            margin: calc(-1 * var(--spacing-md));
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        summary:hover {
            background-color: rgba(123, 44, 191, 0.1);
        }

        details[open] summary {
            margin-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--color-border);
        }

        .learning-objectives {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: var(--spacing-lg);
            border-radius: var(--border-radius);
            border-left: 4px solid var(--color-accent);
            margin-bottom: var(--spacing-xl);
        }

        .learning-objectives h2 {
            margin-top: 0;
            border-bottom: none;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            gap: var(--spacing-md);
            margin: var(--spacing-xl) 0;
            padding-top: var(--spacing-lg);
            border-top: 2px solid var(--color-border);
        }

        .nav-button {
            flex: 1;
            padding: var(--spacing-md);
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
            color: white;
            border-radius: var(--border-radius);
            text-align: center;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: var(--box-shadow);
        }

        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            text-decoration: none;
        }

        footer {
            margin-top: var(--spacing-xl);
            padding: var(--spacing-lg) var(--spacing-md);
            background-color: var(--color-bg-alt);
            border-top: 1px solid var(--color-border);
            text-align: center;
            font-size: 0.9rem;
            color: var(--color-text-light);
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.5rem;
            }

            h2 {
                font-size: 1.4rem;
            }

            h3 {
                font-size: 1.2rem;
            }

            .meta {
                font-size: 0.85rem;
            }

            .navigation {
                flex-direction: column;
            }

            table {
                font-size: 0.85rem;
            }

            th, td {
                padding: var(--spacing-xs);
            }
        }
    </style>

    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>chapter-2</h1>
            
            <div class="meta">
                
            </div>
        </div>
    </header>

    <main class="container">
        <h1>ç¬¬2ç« : ãƒ­ãƒœãƒ†ã‚£ã‚¯ã‚¹å®Ÿé¨“ã®åŸºç¤</h1>

<strong>å­¦ç¿’æ™‚é–“: 25-30åˆ†</strong>

<p>---</p>

<h2>å°å…¥</h2>

<p>å®Ÿé¨“è‡ªå‹•åŒ–ã®å¿ƒè‡“éƒ¨ã¯ã€ãƒ­ãƒœãƒƒãƒˆã‚¢ãƒ¼ãƒ ã€æ¶²ä½“ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã€ã‚»ãƒ³ã‚µãƒ¼ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚æœ¬ç« ã§ã¯ã€ã“ã‚Œã‚‰ã®åŸºç¤æŠ€è¡“ã‚’Pythonãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’é€šã˜ã¦å®Ÿè·µçš„ã«å­¦ã³ã¾ã™ã€‚</p>

<p>OpenTrons OT-2æ¶²ä½“ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ­ãƒœãƒƒãƒˆã‚’ä¸­å¿ƒã«ã€å®Ÿéš›ã«å‹•ãã‚³ãƒ¼ãƒ‰ä¾‹ã‚’é€šã˜ã¦ã€è©¦è–¬ã®åˆ†æ³¨ã€ãƒ—ãƒ¬ãƒ¼ãƒˆã®ç§»å‹•ã€ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ãªã©ã€è‡ªå‹•åŒ–å®Ÿé¨“ã®åŸºæœ¬æ“ä½œã‚’ç¿’å¾—ã—ã¾ã™ã€‚</p>

<p>---</p>

<h2>å­¦ç¿’ç›®æ¨™</h2>

<p>æœ¬ç« ã‚’å­¦ç¿’ã™ã‚‹ã“ã¨ã§ã€ä»¥ä¸‹ã‚’ç¿’å¾—ã§ãã¾ã™ï¼š</p>

<ol>
<li><strong>ãƒ­ãƒœãƒƒãƒˆã‚¢ãƒ¼ãƒ åˆ¶å¾¡</strong>: é€†é‹å‹•å­¦ã€çµŒè·¯è¨ˆç”»ã®åŸºç¤ã¨Pythonå®Ÿè£…</li>
<li><strong>æ¶²ä½“ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</strong>: OpenTrons OT-2ã§ã®ç²¾å¯†ãƒ”ãƒšãƒƒãƒ†ã‚£ãƒ³ã‚°</li>
<li><strong>å›ºä½“ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</strong>: ç²‰æœ«è¨ˆé‡ã€éŒ å‰¤æˆå½¢ã®è‡ªå‹•åŒ–æ‰‹æ³•</li>
<li><strong>ã‚»ãƒ³ã‚µãƒ¼çµ±åˆ</strong>: ã‚«ãƒ¡ãƒ©ã€åˆ†å…‰è¨ˆã€XRDã¨ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹</li>
<li><strong>å®‰å…¨è¨­è¨ˆ</strong>: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã€ç·Šæ€¥åœæ­¢ã€ç•°å¸¸æ¤œçŸ¥</li>
<li><strong>ãƒ©ãƒœã‚¦ã‚§ã‚¢æ¨™æº–åŒ–</strong>: ãƒã‚¤ã‚¯ãƒ­ãƒ—ãƒ¬ãƒ¼ãƒˆã€ãƒã‚¤ã‚¢ãƒ«ã€ã‚­ãƒ¥ãƒ™ãƒƒãƒˆã®çµ±ä¸€è¦æ ¼</li>
</ol>

<p>---</p>

<h2>2.1 ãƒ­ãƒœãƒƒãƒˆã‚¢ãƒ¼ãƒ åˆ¶å¾¡ã®åŸºç¤</h2>

<h3>2.1.1 é †é‹å‹•å­¦ã¨é€†é‹å‹•å­¦</h3>

<p>ãƒ­ãƒœãƒƒãƒˆã‚¢ãƒ¼ãƒ ã®åˆ¶å¾¡ã«ã¯2ã¤ã®é‹å‹•å­¦å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚</p>

<strong>é †é‹å‹•å­¦ï¼ˆForward Kinematicsï¼‰</strong>:
<p>é–¢ç¯€è§’åº¦ $\theta_1, \theta_2, ..., \theta_n$ ã‹ã‚‰ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ•ã‚§ã‚¯ã‚¿ã®ä½ç½®ãƒ»å§¿å‹¢ $(x, y, z, roll, pitch, yaw)$ ã‚’è¨ˆç®—</p>

<strong>é€†é‹å‹•å­¦ï¼ˆInverse Kinematics, IKï¼‰</strong>:
<p>ç›®æ¨™ä½ç½®ãƒ»å§¿å‹¢ã‹ã‚‰ãã‚Œã‚’å®Ÿç¾ã™ã‚‹é–¢ç¯€è§’åº¦ã‚’è¨ˆç®—ï¼ˆå®Ÿé¨“ã§ã¯é€šå¸¸ã“ã¡ã‚‰ã‚’ä½¿ç”¨ï¼‰</p>

<pre><code class="language-python">import numpy as np
<p>import matplotlib.pyplot as plt</p>
<p>from mpl_toolkits.mplot3d import Axes3D</p>

<p>class SimpleRobotArm:</p>
<p>"""</p>
<p>2ãƒªãƒ³ã‚¯2Då¹³é¢ãƒ­ãƒœãƒƒãƒˆã‚¢ãƒ¼ãƒ ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</p>
<p>ææ–™ç§‘å­¦å®Ÿé¨“ã§ã®è©¦è–¬ãƒœãƒˆãƒ«ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã€ã‚µãƒ³ãƒ—ãƒ«ç§»å‹•ãªã©ã‚’æƒ³å®š</p>
<p>"""</p>

<p>def __init__(self, link1_length=0.3, link2_length=0.25):</p>
<p>"""</p>
<p>Args:</p>
<p>link1_length: ç¬¬1ãƒªãƒ³ã‚¯ã®é•·ã•ï¼ˆãƒ¡ãƒ¼ãƒˆãƒ«ï¼‰</p>
<p>link2_length: ç¬¬2ãƒªãƒ³ã‚¯ã®é•·ã•ï¼ˆãƒ¡ãƒ¼ãƒˆãƒ«ï¼‰</p>
<p>"""</p>
<p>self.L1 = link1_length</p>
<p>self.L2 = link2_length</p>

<p>def forward_kinematics(self, theta1, theta2):</p>
<p>"""</p>
<p>é †é‹å‹•å­¦: é–¢ç¯€è§’åº¦ã‹ã‚‰ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ•ã‚§ã‚¯ã‚¿ä½ç½®ã‚’è¨ˆç®—</p>

<p>Args:</p>
<p>theta1: ç¬¬1é–¢ç¯€ã®è§’åº¦ï¼ˆåº¦ï¼‰</p>
<p>theta2: ç¬¬2é–¢ç¯€ã®è§’åº¦ï¼ˆåº¦ï¼‰</p>

<p>Returns:</p>
<p>(x, y): ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ•ã‚§ã‚¯ã‚¿ã®ä½ç½®</p>
<p>"""</p>
<p># åº¦ã‚’ãƒ©ã‚¸ã‚¢ãƒ³ã«å¤‰æ›</p>
<p>th1 = np.radians(theta1)</p>
<p>th2 = np.radians(theta2)</p>

<p># ç¬¬1ãƒªãƒ³ã‚¯ã®å…ˆç«¯ä½ç½®</p>
<p>x1 = self.L1 * np.cos(th1)</p>
<p>y1 = self.L1 * np.sin(th1)</p>

<p># ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ•ã‚§ã‚¯ã‚¿ã®ä½ç½®</p>
<p>x = x1 + self.L2 * np.cos(th1 + th2)</p>
<p>y = y1 + self.L2 * np.sin(th1 + th2)</p>

<p>return x, y</p>

<p>def inverse_kinematics(self, target_x, target_y):</p>
<p>"""</p>
<p>é€†é‹å‹•å­¦: ç›®æ¨™ä½ç½®ã‹ã‚‰é–¢ç¯€è§’åº¦ã‚’è¨ˆç®—</p>

<p>Args:</p>
<p>target_x: ç›®æ¨™Xåº§æ¨™</p>
<p>target_y: ç›®æ¨™Yåº§æ¨™</p>

<p>Returns:</p>
<p>(theta1, theta2): é–¢ç¯€è§’åº¦ï¼ˆåº¦ï¼‰ã¾ãŸã¯ Noneï¼ˆåˆ°é”ä¸èƒ½ï¼‰</p>
<p>"""</p>
<p># åˆ°é”å¯èƒ½æ€§ãƒã‚§ãƒƒã‚¯</p>
<p>distance = np.sqrt(target_x<strong>2 + target_y</strong>2)</p>
<p>if distance > (self.L1 + self.L2) or distance < abs(self.L1 - self.L2):</p>
<p>print(f"è­¦å‘Š: ç›®æ¨™ä½ç½® ({target_x:.2f}, {target_y:.2f}) ã¯åˆ°é”ä¸èƒ½")</p>
<p>return None</p>

<p># ä½™å¼¦å®šç†ã«ã‚ˆã‚‹ç¬¬2é–¢ç¯€è§’åº¦ã®è¨ˆç®—</p>
<p>cos_theta2 = (target_x<strong>2 + target_y</strong>2 - self.L1<strong>2 - self.L2</strong>2) / (2 <em> self.L1 </em> self.L2)</p>
<p># æ•°å€¤èª¤å·®å¯¾ç­–</p>
<p>cos_theta2 = np.clip(cos_theta2, -1.0, 1.0)</p>

<p># Elbow-upã®è§£ã‚’é¸æŠï¼ˆå®Ÿé¨“ã§ä¸€èˆ¬çš„ï¼‰</p>
<p>theta2_rad = np.arccos(cos_theta2)</p>

<p># ç¬¬1é–¢ç¯€è§’åº¦ã®è¨ˆç®—</p>
<p>k1 = self.L1 + self.L2 * np.cos(theta2_rad)</p>
<p>k2 = self.L2 * np.sin(theta2_rad)</p>
<p>theta1_rad = np.arctan2(target_y, target_x) - np.arctan2(k2, k1)</p>

<p># ãƒ©ã‚¸ã‚¢ãƒ³ã‹ã‚‰åº¦ã«å¤‰æ›</p>
<p>theta1 = np.degrees(theta1_rad)</p>
<p>theta2 = np.degrees(theta2_rad)</p>

<p>return theta1, theta2</p>

<p>def plot_arm(self, theta1, theta2, target_point=None):</p>
<p>"""ã‚¢ãƒ¼ãƒ ã®ç¾åœ¨ä½ç½®ã‚’å¯è¦–åŒ–"""</p>
<p>th1 = np.radians(theta1)</p>
<p>th2 = np.radians(theta2)</p>

<p># å„é–¢ç¯€ã®ä½ç½®</p>
<p>x0, y0 = 0, 0  # ãƒ™ãƒ¼ã‚¹</p>
<p>x1 = self.L1 * np.cos(th1)</p>
<p>y1 = self.L1 * np.sin(th1)</p>
<p>x2 = x1 + self.L2 * np.cos(th1 + th2)</p>
<p>y2 = y1 + self.L2 * np.sin(th1 + th2)</p>

<p>plt.figure(figsize=(8, 8))</p>
<p>plt.plot([x0, x1, x2], [y0, y1, y2], 'o-', linewidth=3, markersize=10, label='ãƒ­ãƒœãƒƒãƒˆã‚¢ãƒ¼ãƒ ')</p>
<p>plt.plot(x0, y0, 'ro', markersize=15, label='ãƒ™ãƒ¼ã‚¹')</p>
<p>plt.plot(x2, y2, 'go', markersize=12, label='ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ•ã‚§ã‚¯ã‚¿')</p>

<p>if target_point:</p>
<p>plt.plot(target_point[0], target_point[1], 'r*', markersize=20, label='ç›®æ¨™ä½ç½®')</p>

<p># åˆ°é”ç¯„å›²ã®å††</p>
<p>theta = np.linspace(0, 2*np.pi, 100)</p>
<p>r_max = self.L1 + self.L2</p>
<p>r_min = abs(self.L1 - self.L2)</p>
<p>plt.plot(r_max <em> np.cos(theta), r_max </em> np.sin(theta), 'k--', alpha=0.3, label='æœ€å¤§åˆ°é”ç¯„å›²')</p>
<p>plt.plot(r_min <em> np.cos(theta), r_min </em> np.sin(theta), 'k--', alpha=0.3)</p>

<p>plt.axis('equal')</p>
<p>plt.grid(True, alpha=0.3)</p>
<p>plt.xlabel('X ä½ç½® (m)', fontsize=12)</p>
<p>plt.ylabel('Y ä½ç½® (m)', fontsize=12)</p>
<p>plt.title('2ãƒªãƒ³ã‚¯ãƒ­ãƒœãƒƒãƒˆã‚¢ãƒ¼ãƒ ', fontsize=14, fontweight='bold')</p>
<p>plt.legend()</p>
<p>plt.tight_layout()</p>


<h1>ä½¿ç”¨ä¾‹</h1>
<p>robot = SimpleRobotArm(link1_length=0.3, link2_length=0.25)</p>

<h1>é€†é‹å‹•å­¦ã®ä½¿ç”¨ä¾‹: è©¦è–¬ãƒœãƒˆãƒ« (0.4, 0.2) ã«ã‚¢ã‚¯ã‚»ã‚¹</h1>
<p>target_x, target_y = 0.4, 0.2</p>
<p>angles = robot.inverse_kinematics(target_x, target_y)</p>

<p>if angles:</p>
<p>theta1, theta2 = angles</p>
<p>print(f"ç›®æ¨™ä½ç½®: ({target_x}, {target_y})")</p>
<p>print(f"å¿…è¦ãªé–¢ç¯€è§’åº¦: Î¸1 = {theta1:.2f}Â°, Î¸2 = {theta2:.2f}Â°")</p>

<p># æ¤œè¨¼: é †é‹å‹•å­¦ã§ä½ç½®ã‚’ç¢ºèª</p>
<p>x_check, y_check = robot.forward_kinematics(theta1, theta2)</p>
<p>error = np.sqrt((x_check - target_x)<strong>2 + (y_check - target_y)</strong>2)</p>
<p>print(f"æ¤œè¨¼: å®Ÿéš›ã®ä½ç½® ({x_check:.4f}, {y_check:.4f}), èª¤å·® {error:.6f}m")</p>

<p># å¯è¦–åŒ–</p>
<p>robot.plot_arm(theta1, theta2, target_point=(target_x, target_y))</p>
<p>plt.savefig('robot_arm_ik.png', dpi=300, bbox_inches='tight')</p>
<p>plt.show()</p>
</code></pre>

<strong>ã‚³ãƒ¼ãƒ‰è§£èª¬</strong>:
<ol>
<li><strong>é †é‹å‹•å­¦</strong>: ä¸‰è§’é–¢æ•°ã§å„ãƒªãƒ³ã‚¯ã®ä½ç½®ã‚’è¨ˆç®—</li>
<li><strong>é€†é‹å‹•å­¦</strong>: ä½™å¼¦å®šç†ã¨ã‚¢ãƒ¼ã‚¯ã‚¿ãƒ³ã‚¸ã‚§ãƒ³ãƒˆã§é–¢ç¯€è§’åº¦ã‚’é€†ç®—</li>
<li><strong>åˆ°é”å¯èƒ½æ€§</strong>: ç›®æ¨™è·é›¢ãŒ $|L_1 - L_2| \leq d \leq L_1 + L_2$ ã®ç¯„å›²ã«ã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯</li>
<li><strong>Elbow-up/down</strong>: åŒã˜ç›®æ¨™ä½ç½®ã«2ã¤ã®è§£ãŒã‚ã‚‹å ´åˆã€å®Ÿé¨“ã§ã¯é€šå¸¸elbow-upã‚’é¸æŠ</li>
</ol>

<p>---</p>

<h3>2.1.2 è»Œé“è¨ˆç”»ï¼ˆPath Planningï¼‰</h3>

<p>è©¦è–¬ãƒœãƒˆãƒ«ã‹ã‚‰åå¿œå®¹å™¨ã¸ã®ç§»å‹•ãªã©ã€ã‚¹ãƒ ãƒ¼ã‚ºã§å®‰å…¨ãªè»Œé“ã‚’è¨ˆç”»ã—ã¾ã™ã€‚</p>

<pre><code class="language-python">def linear_trajectory(start_pos, end_pos, num_points=50):
<p>"""</p>
<p>2ç‚¹é–“ã®ç›´ç·šè»Œé“ã‚’ç”Ÿæˆ</p>

<p>Args:</p>
<p>start_pos: é–‹å§‹ä½ç½® (x, y)</p>
<p>end_pos: çµ‚äº†ä½ç½® (x, y)</p>
<p>num_points: è»Œé“ä¸Šã®ç‚¹æ•°</p>

<p>Returns:</p>
<p>è»Œé“ä¸Šã®ç‚¹ã®ãƒªã‚¹ãƒˆ [(x1, y1), (x2, y2), ...]</p>
<p>"""</p>
<p>x_traj = np.linspace(start_pos[0], end_pos[0], num_points)</p>
<p>y_traj = np.linspace(start_pos[1], end_pos[1], num_points)</p>

<p>trajectory = list(zip(x_traj, y_traj))</p>
<p>return trajectory</p>

<p>def execute_trajectory(robot, trajectory, plot=True):</p>
<p>"""</p>
<p>è»Œé“ã‚’å®Ÿè¡Œï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰</p>

<p>Args:</p>
<p>robot: RobotArmã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹</p>
<p>trajectory: ç›®æ¨™ä½ç½®ã®ãƒªã‚¹ãƒˆ</p>
<p>plot: è»Œé“ã‚’å¯è¦–åŒ–ã™ã‚‹ã‹</p>
<p>"""</p>
<p>joint_angles = []</p>
<p>successful_points = []</p>

<p>for i, (x, y) in enumerate(trajectory):</p>
<p>angles = robot.inverse_kinematics(x, y)</p>
<p>if angles:</p>
<p>joint_angles.append(angles)</p>
<p>successful_points.append((x, y))</p>
<p>else:</p>
<p>print(f"è­¦å‘Š: ç‚¹ {i} ({x:.3f}, {y:.3f}) ã¯åˆ°é”ä¸èƒ½")</p>

<p>if plot and successful_points:</p>
<p>plt.figure(figsize=(10, 8))</p>

<p># åˆ°é”ç¯„å›²</p>
<p>theta = np.linspace(0, 2*np.pi, 100)</p>
<p>r_max = robot.L1 + robot.L2</p>
<p>plt.plot(r_max <em> np.cos(theta), r_max </em> np.sin(theta), 'k--', alpha=0.2, label='æœ€å¤§åˆ°é”ç¯„å›²')</p>

<p># è»Œé“</p>
<p>traj_x, traj_y = zip(*successful_points)</p>
<p>plt.plot(traj_x, traj_y, 'b-', linewidth=2, alpha=0.6, label='è¨ˆç”»è»Œé“')</p>
<p>plt.plot(traj_x[0], traj_y[0], 'go', markersize=15, label='é–‹å§‹ä½ç½®')</p>
<p>plt.plot(traj_x[-1], traj_y[-1], 'ro', markersize=15, label='çµ‚äº†ä½ç½®')</p>

<p># ã„ãã¤ã‹ã®ä¸­é–“å§¿å‹¢ã‚’è¡¨ç¤º</p>
<p>for i in range(0, len(joint_angles), len(joint_angles)//5):</p>
<p>theta1, theta2 = joint_angles[i]</p>
<p>th1 = np.radians(theta1)</p>
<p>th2 = np.radians(theta2)</p>

<p>x1 = robot.L1 * np.cos(th1)</p>
<p>y1 = robot.L1 * np.sin(th1)</p>
<p>x2 = x1 + robot.L2 * np.cos(th1 + th2)</p>
<p>y2 = y1 + robot.L2 * np.sin(th1 + th2)</p>

<p>plt.plot([0, x1, x2], [0, y1, y2], 'gray', alpha=0.3, linewidth=1)</p>

<p>plt.axis('equal')</p>
<p>plt.grid(True, alpha=0.3)</p>
<p>plt.xlabel('X ä½ç½® (m)', fontsize=12)</p>
<p>plt.ylabel('Y ä½ç½® (m)', fontsize=12)</p>
<p>plt.title('ãƒ­ãƒœãƒƒãƒˆã‚¢ãƒ¼ãƒ ã®è»Œé“è¨ˆç”»', fontsize=14, fontweight='bold')</p>
<p>plt.legend()</p>
<p>plt.tight_layout()</p>
<p>plt.savefig('trajectory_planning.png', dpi=300, bbox_inches='tight')</p>
<p>plt.show()</p>

<p>return joint_angles</p>


<h1>ä½¿ç”¨ä¾‹: è©¦è–¬ãƒœãƒˆãƒ« (0.35, 0.15) ã‹ã‚‰åå¿œå®¹å™¨ (0.25, 0.35) ã¸ã®ç§»å‹•</h1>
<p>robot = SimpleRobotArm()</p>
<p>start = (0.35, 0.15)</p>
<p>end = (0.25, 0.35)</p>

<p>trajectory = linear_trajectory(start, end, num_points=30)</p>
<p>print(f"è»Œé“ç”Ÿæˆ: {len(trajectory)}ç‚¹")</p>

<p>joint_angles = execute_trajectory(robot, trajectory, plot=True)</p>
<p>print(f"å®Ÿè¡ŒæˆåŠŸ: {len(joint_angles)}/{len(trajectory)}ç‚¹")</p>
</code></pre>

<p>---</p>

<h2>2.2 æ¶²ä½“ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°: OpenTrons OT-2</h2>

<h3>2.2.1 OpenTrons OT-2ã®æ¦‚è¦</h3>

<p>OpenTrons OT-2ã¯ã€ç ”ç©¶å®¤ã§åºƒãä½¿ã‚ã‚Œã‚‹ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®æ¶²ä½“ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ­ãƒœãƒƒãƒˆã§ã™ã€‚</p>

<strong>ä¸»ãªä»•æ§˜</strong>:
<ul>
<li><strong>ç²¾åº¦</strong>: Â±1 ÂµLï¼ˆ1-20 ÂµLï¼‰ã€Â±2%ï¼ˆ20-300 ÂµLï¼‰</li>
<li><strong>å®¹é‡</strong>: 1-1000 ÂµLï¼ˆãƒ”ãƒšãƒƒãƒˆäº¤æ›ã§å¯¾å¿œï¼‰</li>
<li><strong>ãƒ‡ãƒƒã‚­ã‚µã‚¤ã‚º</strong>: 11ã‚¹ãƒ­ãƒƒãƒˆï¼ˆãƒã‚¤ã‚¯ãƒ­ãƒ—ãƒ¬ãƒ¼ãƒˆã€ãƒãƒ¥ãƒ¼ãƒ–ãƒ©ãƒƒã‚¯ã€è©¦è–¬ãƒœãƒˆãƒ«ï¼‰</li>
<li><strong>ä¾¡æ ¼</strong>: ç´„$10,000ï¼ˆå­¦è¡“å‰²å¼•ã‚ã‚Šï¼‰</li>
<li><strong>ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°</strong>: Python APIï¼ˆç›´æ„Ÿçš„ã§å­¦ç¿’å®¹æ˜“ï¼‰</li>
</ul>

<h3>2.2.2 åŸºæœ¬çš„ãªãƒ”ãƒšãƒƒãƒ†ã‚£ãƒ³ã‚°</h3>

<pre><code class="language-python">from opentrons import protocol_api

<h1>OT-2ãƒ—ãƒ­ãƒˆã‚³ãƒ«: 96ã‚¦ã‚§ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒˆã¸ã®è©¦è–¬åˆ†æ³¨</h1>
<p>metadata = {</p>
<p>'protocolName': 'åŸºæœ¬çš„ãªãƒ”ãƒšãƒƒãƒ†ã‚£ãƒ³ã‚°',</p>
<p>'author': 'Materials Lab',</p>
<p>'description': 'è©¦è–¬ã‚’96ã‚¦ã‚§ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒˆã«åˆ†æ³¨',</p>
<p>'apiLevel': '2.13'</p>
<p>}</p>

<p>def run(protocol: protocol_api.ProtocolContext):</p>
<p>"""</p>
<p>åŸºæœ¬çš„ãªãƒ”ãƒšãƒƒãƒ†ã‚£ãƒ³ã‚°ãƒ—ãƒ­ãƒˆã‚³ãƒ«</p>

<p>Args:</p>
<p>protocol: OpenTrons ProtocolContext</p>
<p>"""</p>
<p># ãƒ‡ãƒƒã‚­ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®è¨­å®š</p>
<p># ã‚¹ãƒ­ãƒƒãƒˆ1: 96ã‚¦ã‚§ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆåå¿œç”¨ï¼‰</p>
<p>plate = protocol.load_labware('corning_96_wellplate_360ul_flat', location='1')</p>

<p># ã‚¹ãƒ­ãƒƒãƒˆ2: ãƒãƒ¥ãƒ¼ãƒ–ãƒ©ãƒƒã‚¯ï¼ˆè©¦è–¬ãƒœãƒˆãƒ«ï¼‰</p>
<p>tuberack = protocol.load_labware('opentrons_24_tuberack_eppendorf_1.5ml_safelock_snapcap', location='2')</p>

<p># ã‚¹ãƒ­ãƒƒãƒˆ3: ãƒ”ãƒšãƒƒãƒˆãƒãƒƒãƒ—ãƒ©ãƒƒã‚¯</p>
<p>tiprack = protocol.load_labware('opentrons_96_tiprack_300ul', location='3')</p>

<p># ãƒ”ãƒšãƒƒãƒˆã®è£…ç€ï¼ˆP300 Single-Channelï¼‰</p>
<p>pipette = protocol.load_instrument('p300_single_gen2', mount='left', tip_racks=[tiprack])</p>

<p># ãƒ”ãƒšãƒƒãƒ†ã‚£ãƒ³ã‚°æ“ä½œ</p>
<p># è©¦è–¬Aï¼ˆãƒãƒ¥ãƒ¼ãƒ–A1ï¼‰ã‚’å„ã‚¦ã‚§ãƒ«ã«50 ÂµLåˆ†æ³¨</p>
<p>reagent_a = tuberack.wells_by_name()['A1']</p>

<p>for well in plate.wells():</p>
<p>pipette.pick_up_tip()  # æ–°ã—ã„ãƒãƒƒãƒ—ã‚’å–ã‚‹</p>
<p>pipette.aspirate(50, reagent_a)  # è©¦è–¬ã‚’å¸å¼•ï¼ˆ50 ÂµLï¼‰</p>
<p>pipette.dispense(50, well)  # ã‚¦ã‚§ãƒ«ã«åˆ†æ³¨</p>
<p>pipette.blow_out(well.top())  # ä½™å‰°æ¶²ã‚’æ’å‡º</p>
<p>pipette.drop_tip()  # ãƒãƒƒãƒ—ã‚’å»ƒæ£„</p>

<p>protocol.comment("ãƒ—ãƒ­ãƒˆã‚³ãƒ«å®Œäº†: 96ã‚¦ã‚§ãƒ«ã™ã¹ã¦ã«è©¦è–¬Aã‚’åˆ†æ³¨ã—ã¾ã—ãŸ")</p>


<h1>ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå®Ÿæ©Ÿãªã—ã§å‹•ä½œç¢ºèªï¼‰</h1>
<h1>ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å®Ÿè¡Œ: opentrons_simulate basic_pipetting.py</h1>
</code></pre>

<strong>ã‚³ãƒ¼ãƒ‰è§£èª¬</strong>:
<ol>
<li><strong>Labwareèª­ã¿è¾¼ã¿</strong>: ãƒ—ãƒ¬ãƒ¼ãƒˆã€ãƒãƒ¥ãƒ¼ãƒ–ãƒ©ãƒƒã‚¯ã€ãƒãƒƒãƒ—ãƒ©ãƒƒã‚¯ã‚’ãƒ‡ãƒƒã‚­ã«é…ç½®</li>
<li><strong>Pipetteè£…ç€</strong>: ã‚·ãƒ³ã‚°ãƒ«ãƒãƒ£ãƒ³ãƒãƒ«300 ÂµLãƒ”ãƒšãƒƒãƒˆ</li>
<li><strong>ãƒ”ãƒšãƒƒãƒ†ã‚£ãƒ³ã‚°ãƒ«ãƒ¼ãƒ—</strong>: å„ã‚¦ã‚§ãƒ«ã«è©¦è–¬ã‚’åˆ†æ³¨</li>
<li><strong>ã‚¯ãƒ­ã‚¹ã‚³ãƒ³ã‚¿ãƒŸãƒãƒ¼ã‚·ãƒ§ãƒ³é˜²æ­¢</strong>: æ¯å›æ–°ã—ã„ãƒãƒƒãƒ—ã‚’ä½¿ç”¨</li>
</ol>

<p>---</p>

<h3>2.2.3 ãƒãƒ«ãƒãƒãƒ£ãƒ³ãƒãƒ«ãƒ”ãƒšãƒƒãƒ†ã‚£ãƒ³ã‚°</h3>

<p>96ã‚¦ã‚§ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒˆå…¨ä½“ã¸ã®é«˜é€Ÿåˆ†æ³¨ã«ã¯ã€8ãƒãƒ£ãƒ³ãƒãƒ«ãƒ”ãƒšãƒƒãƒˆã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p>

<pre><code class="language-python">def run(protocol: protocol_api.ProtocolContext):
<p>"""</p>
<p>ãƒãƒ«ãƒãƒãƒ£ãƒ³ãƒãƒ«ãƒ”ãƒšãƒƒãƒ†ã‚£ãƒ³ã‚°ï¼ˆ8åˆ—åŒæ™‚åˆ†æ³¨ï¼‰</p>
<p>"""</p>
<p># ãƒ‡ãƒƒã‚­ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ</p>
<p>source_plate = protocol.load_labware('nest_12_reservoir_15ml', location='1')  # è©¦è–¬ãƒªã‚¶ãƒ¼ãƒãƒ¼</p>
<p>dest_plate = protocol.load_labware('corning_96_wellplate_360ul_flat', location='2')</p>
<p>tiprack = protocol.load_labware('opentrons_96_tiprack_300ul', location='3')</p>

<p># 8ãƒãƒ£ãƒ³ãƒãƒ«ãƒ”ãƒšãƒƒãƒˆ</p>
<p>p300_multi = protocol.load_instrument('p300_multi_gen2', mount='left', tip_racks=[tiprack])</p>

<p># è©¦è–¬ãƒªã‚¶ãƒ¼ãƒãƒ¼ã‹ã‚‰96ã‚¦ã‚§ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒˆã¸</p>
<p># 8ãƒãƒ£ãƒ³ãƒãƒ«ãƒ”ãƒšãƒƒãƒˆã¯ç¸¦1åˆ—ï¼ˆ8ã‚¦ã‚§ãƒ«ï¼‰ã‚’åŒæ™‚å‡¦ç†</p>
<p>p300_multi.pick_up_tip()</p>

<p># 12åˆ—ã‚’é †æ¬¡å‡¦ç†ï¼ˆ96ã‚¦ã‚§ãƒ« = 12åˆ— Ã— 8è¡Œï¼‰</p>
<p>for col in dest_plate.columns():</p>
<p>p300_multi.aspirate(100, source_plate['A1'])  # ãƒªã‚¶ãƒ¼ãƒãƒ¼ã‹ã‚‰å¸å¼•</p>
<p>p300_multi.dispense(100, col[0])  # åˆ—ã®æœ€åˆã®ã‚¦ã‚§ãƒ«ï¼ˆA1, A2, ..., A12ï¼‰</p>
<p>p300_multi.blow_out()</p>

<p>p300_multi.drop_tip()</p>
<p>protocol.comment("96ã‚¦ã‚§ãƒ«å…¨ã¦ã«100 ÂµLåˆ†æ³¨å®Œäº†")</p>


<h1>åŠ¹ç‡æ¯”è¼ƒ</h1>
<p>print("96ã‚¦ã‚§ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒˆã¸ã®åˆ†æ³¨æ™‚é–“:")</p>
<p>print("  ã‚·ãƒ³ã‚°ãƒ«ãƒãƒ£ãƒ³ãƒãƒ«: 96ã‚¦ã‚§ãƒ« Ã— 20ç§’ = 32åˆ†")</p>
<p>print("  ãƒãƒ«ãƒãƒãƒ£ãƒ³ãƒãƒ«: 12åˆ— Ã— 20ç§’ = 4åˆ†")</p>
<p>print("  åŠ¹ç‡åŒ–: 8å€é«˜é€Ÿ")</p>
</code></pre>

<p>---</p>

<h3>2.2.4 æ®µéšå¸Œé‡ˆï¼ˆSerial Dilutionï¼‰</h3>

<p>è§¦åª’ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ãªã©ã§é‡è¦ãªæ®µéšå¸Œé‡ˆã‚’è‡ªå‹•åŒ–ã—ã¾ã™ã€‚</p>

<pre><code class="language-python">def run(protocol: protocol_api.ProtocolContext):
<p>"""</p>
<p>æ®µéšå¸Œé‡ˆãƒ—ãƒ­ãƒˆã‚³ãƒ«ï¼ˆ10å€å¸Œé‡ˆç³»åˆ—ï¼‰</p>
<p>æ¿ƒåº¦: 10^0, 10^-1, 10^-2, ..., 10^-7 M</p>
<p>"""</p>
<p>plate = protocol.load_labware('corning_96_wellplate_360ul_flat', location='1')</p>
<p>tiprack = protocol.load_labware('opentrons_96_tiprack_300ul', location='2')</p>
<p>reservoir = protocol.load_labware('nest_12_reservoir_15ml', location='3')</p>

<p>pipette = protocol.load_instrument('p300_single_gen2', mount='left', tip_racks=[tiprack])</p>

<p># å¸Œé‡ˆç³»åˆ—ã‚’ä½œæˆï¼ˆAåˆ—: 10^0 â†’ 10^-7ï¼‰</p>
<p># ã‚¦ã‚§ãƒ«A1: åŸæ¶²ã€A2-A8: å¸Œé‡ˆæ¶²</p>

<p># 1. å„ã‚¦ã‚§ãƒ«ã«æº¶åª’ã‚’åˆ†æ³¨ï¼ˆA2-A8ï¼‰</p>
<p>solvent = reservoir['A1']</p>
<p>for well in plate.columns()[0][1:8]:  # A2ã‹ã‚‰A8</p>
<p>pipette.pick_up_tip()</p>
<p>pipette.transfer(180, solvent, well, new_tip='never')</p>
<p>pipette.drop_tip()</p>

<p># 2. åŸæ¶²ã‚’ A1 ã«åˆ†æ³¨</p>
<p>stock_solution = reservoir['A2']</p>
<p>pipette.transfer(200, stock_solution, plate['A1'], new_tip='once')</p>

<p># 3. æ®µéšå¸Œé‡ˆã®å®Ÿè¡Œ</p>
<p># A1 â†’ A2 â†’ A3 â†’ ... â†’ A8</p>
<p>pipette.pick_up_tip()</p>
<p>for i in range(7):</p>
<p>source_well = plate.columns()[0][i]  # A1, A2, ..., A7</p>
<p>dest_well = plate.columns()[0][i+1]  # A2, A3, ..., A8</p>

<p># 20 ÂµLã‚’æ¬¡ã®ã‚¦ã‚§ãƒ«ã«ç§»ã™</p>
<p>pipette.aspirate(20, source_well)</p>
<p>pipette.dispense(20, dest_well)</p>
<p>pipette.mix(3, 100, dest_well)  # 3å›æ··åˆï¼ˆ100 ÂµLï¼‰</p>

<p>pipette.drop_tip()</p>
<p>protocol.comment("æ®µéšå¸Œé‡ˆå®Œäº†: 10^0 â†’ 10^-7 M")</p>


<h1>æ®µéšå¸Œé‡ˆã®æ¿ƒåº¦è¨ˆç®—</h1>
<p>import pandas as pd</p>

<p>dilution_factor = 10  # 10å€å¸Œé‡ˆ</p>
<p>num_dilutions = 8</p>
<p>initial_concentration = 1.0  # M</p>

<p>concentrations = [initial_concentration / (dilution_factor <em></em> i) for i in range(num_dilutions)]</p>
<p>wells = [f'A{i+1}' for i in range(num_dilutions)]</p>

<p>df_dilution = pd.DataFrame({</p>
<p>'ã‚¦ã‚§ãƒ«': wells,</p>
<p>'æ¿ƒåº¦ (M)': concentrations,</p>
<p>'å¯¾æ•°æ¿ƒåº¦': [f'10^{int(np.log10(c))}' if c >= 1e-10 else '0' for c in concentrations]</p>
<p>})</p>

<p>print("æ®µéšå¸Œé‡ˆç³»åˆ—:")</p>
<p>print(df_dilution.to_string(index=False))</p>
</code></pre>

<p>---</p>

<h2>2.3 å›ºä½“ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</h2>

<h3>2.3.1 ç²‰æœ«è¨ˆé‡ã®è‡ªå‹•åŒ–</h3>

<p>å›ºä½“è©¦è–¬ã®è‡ªå‹•è¨ˆé‡ã«ã¯ã€ç²¾å¯†å¤©ç§¤ã¨ãƒ­ãƒœãƒƒãƒˆã‚¢ãƒ¼ãƒ ã®é€£æºãŒå¿…è¦ã§ã™ã€‚</p>

<pre><code class="language-python">class PowderDispenserSimulator:
<p>"""</p>
<p>ç²‰æœ«åˆ†æ³¨ã‚·ã‚¹ãƒ†ãƒ ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</p>
<p>å®Ÿéš›ã®è£…ç½®: Mettler Toledo Balance + Robot Arm</p>
<p>"""</p>

<p>def __init__(self, accuracy=0.001):</p>
<p>"""</p>
<p>Args:</p>
<p>accuracy: è¨ˆé‡ç²¾åº¦ï¼ˆã‚°ãƒ©ãƒ ï¼‰</p>
<p>"""</p>
<p>self.accuracy = accuracy</p>
<p>self.dispensed_amounts = []</p>

<p>def dispense_powder(self, target_mass, powder_name='è©¦è–¬A'):</p>
<p>"""</p>
<p>ç²‰æœ«ã‚’ç›®æ¨™è³ªé‡ã¾ã§åˆ†æ³¨</p>

<p>Args:</p>
<p>target_mass: ç›®æ¨™è³ªé‡ï¼ˆã‚°ãƒ©ãƒ ï¼‰</p>
<p>powder_name: ç²‰æœ«ã®åå‰</p>

<p>Returns:</p>
<p>actual_mass: å®Ÿéš›ã«åˆ†æ³¨ã•ã‚ŒãŸè³ªé‡</p>
<p>"""</p>
<p># ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³: æ­£è¦åˆ†å¸ƒã§ã°ã‚‰ã¤ãã‚’æ¨¡æ“¬</p>
<p>actual_mass = np.random.normal(target_mass, self.accuracy)</p>
<p>self.dispensed_amounts.append(actual_mass)</p>

<p>error = actual_mass - target_mass</p>
<p>print(f"{powder_name} åˆ†æ³¨: ç›®æ¨™ {target_mass:.3f}g, å®Ÿæ¸¬ {actual_mass:.3f}g (èª¤å·®: {error:+.4f}g)")</p>

<p>return actual_mass</p>

<p>def multi_component_dispensing(self, composition_dict):</p>
<p>"""</p>
<p>å¤šæˆåˆ†ç²‰æœ«ã®è‡ªå‹•é…åˆ</p>

<p>Args:</p>
<p>composition_dict: {æˆåˆ†å: è³ªé‡(g)}</p>

<p>Returns:</p>
<p>actual_composition: å®Ÿéš›ã®çµ„æˆ</p>
<p>"""</p>
<p>print("å¤šæˆåˆ†é…åˆé–‹å§‹:")</p>
<p>actual_composition = {}</p>

<p>for component, target_mass in composition_dict.items():</p>
<p>actual_mass = self.dispense_powder(target_mass, component)</p>
<p>actual_composition[component] = actual_mass</p>

<p>total_mass = sum(actual_composition.values())</p>
<p>print(f"\nåˆè¨ˆè³ªé‡: {total_mass:.3f}g")</p>

<p># çµ„æˆæ¯”ï¼ˆé‡é‡%ï¼‰</p>
<p>print("\nå®Ÿéš›ã®çµ„æˆæ¯”ï¼ˆwt%ï¼‰:")</p>
<p>for component, mass in actual_composition.items():</p>
<p>percentage = (mass / total_mass) * 100</p>
<p>print(f"  {component}: {percentage:.2f}%")</p>

<p>return actual_composition</p>


<h1>ä½¿ç”¨ä¾‹: ä¸‰å…ƒç³»è§¦åª’ (NiO, CoO, MnO2) ã®é…åˆ</h1>
<p>dispenser = PowderDispenserSimulator(accuracy=0.002)</p>

<h1>ç›®æ¨™çµ„æˆ: Ni:Co:Mn = 60:20:20 (wt%)</h1>
<p>total_mass = 1.0  # åˆè¨ˆ1.0g</p>
<p>composition = {</p>
<p>'NiO': 0.6,</p>
<p>'CoO': 0.2,</p>
<p>'MnO2': 0.2</p>
<p>}</p>

<p>actual_comp = dispenser.multi_component_dispensing(composition)</p>

<h1>ç²¾åº¦è©•ä¾¡</h1>
<p>print("\nç²¾åº¦è©•ä¾¡:")</p>
<p>for component, target_mass in composition.items():</p>
<p>actual_mass = actual_comp[component]</p>
<p>error_percent = abs((actual_mass - target_mass) / target_mass) * 100</p>
<p>print(f"  {component}: èª¤å·® {error_percent:.2f}%")</p>
</code></pre>

<p>---</p>

<h3>2.3.2 å›ºä½“è©¦æ–™ã®ç§»é€</h3>

<pre><code class="language-python">def solid_sample_transfer_protocol():
<p>"""</p>
<p>å›ºä½“è©¦æ–™ã®è‡ªå‹•ç§»é€ãƒ—ãƒ­ãƒˆã‚³ãƒ«ï¼ˆç–‘ä¼¼ã‚³ãƒ¼ãƒ‰ï¼‰</p>
<p>å®Ÿéš›ã®å®Ÿè£…ã¯ãƒ­ãƒœãƒƒãƒˆã‚¢ãƒ¼ãƒ ã®APIã«ä¾å­˜</p>
<p>"""</p>
<p>protocol_steps = [</p>
<p>"1. ãƒ­ãƒœãƒƒãƒˆã‚¢ãƒ¼ãƒ ãŒã‚µãƒ³ãƒ—ãƒ«ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’æŠŠæŒ",</p>
<p>"2. XRDæ¸¬å®šä½ç½®ã«ç§»å‹•",</p>
<p>"3. ã‚µãƒ³ãƒ—ãƒ«ã‚’XRDã‚¹ãƒ†ãƒ¼ã‚¸ã«é…ç½®",</p>
<p>"4. XRDæ¸¬å®šé–‹å§‹ï¼ˆå¤–éƒ¨ãƒˆãƒªã‚¬ãƒ¼ï¼‰",</p>
<p>"5. æ¸¬å®šå®Œäº†ã‚’å¾…æ©Ÿ",</p>
<p>"6. ã‚µãƒ³ãƒ—ãƒ«ã‚’å›å",</p>
<p>"7. æ¬¡ã®ã‚µãƒ³ãƒ—ãƒ«ä½ç½®ã«ç§»å‹•",</p>
<p>"8. ã‚¹ãƒ†ãƒƒãƒ—1-7ã‚’ç¹°ã‚Šè¿”ã—"</p>
<p>]</p>

<p>for step in protocol_steps:</p>
<p>print(step)</p>

<p># ç–‘ä¼¼ã‚³ãƒ¼ãƒ‰: å®Ÿéš›ã®ãƒ­ãƒœãƒƒãƒˆåˆ¶å¾¡</p>
<p>"""</p>
<p># Universal Robots UR5eã®ä¾‹</p>
<p>import urx</p>

<p>robot = urx.Robot("192.168.1.100")  # ãƒ­ãƒœãƒƒãƒˆã®IPã‚¢ãƒ‰ãƒ¬ã‚¹</p>

<p># ã‚µãƒ³ãƒ—ãƒ«ä½ç½®ï¼ˆXYZåº§æ¨™ã€ãƒŸãƒªãƒ¡ãƒ¼ãƒˆãƒ«ï¼‰</p>
<p>sample_position = [300, 200, 100, 0, 0, 0]  # X, Y, Z, RX, RY, RZ</p>
<p>xrd_position = [500, 200, 150, 0, 0, 0]</p>

<p># ç§»å‹•</p>
<p>robot.movel(sample_position, acc=0.1, vel=0.1)  # ç·šå½¢ç§»å‹•</p>
<p># ã‚°ãƒªãƒƒãƒ‘ãƒ¼ã§ã‚µãƒ³ãƒ—ãƒ«æŠŠæŒ</p>
<p>robot.set_digital_out(0, True)  # ãƒ‡ã‚¸ã‚¿ãƒ«å‡ºåŠ›ã§ã‚°ãƒªãƒƒãƒ‘ãƒ¼åˆ¶å¾¡</p>

<p>robot.movel(xrd_position, acc=0.1, vel=0.1)</p>
<p># ã‚µãƒ³ãƒ—ãƒ«ã‚’é…ç½®</p>
<p>robot.set_digital_out(0, False)</p>

<p>robot.close()</p>
<p>"""</p>

<p>solid_sample_transfer_protocol()</p>
</code></pre>

<p>---</p>

<h2>2.4 ã‚»ãƒ³ã‚µãƒ¼çµ±åˆ</h2>

<h3>2.4.1 åˆ†å…‰è¨ˆã¨ã®é€£æº</h3>

<p>UV-Visåˆ†å…‰è¨ˆã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«åå¿œã‚’ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚</p>

<pre><code class="language-python">import time

<p>class SpectrometerSimulator:</p>
<p>"""</p>
<p>UV-Visåˆ†å…‰è¨ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</p>
<p>å®Ÿéš›ã®è£…ç½®: Ocean Optics USB4000, Agilent Cary 60</p>
<p>"""</p>

<p>def __init__(self, wavelength_range=(200, 800), resolution=1):</p>
<p>"""</p>
<p>Args:</p>
<p>wavelength_range: æ³¢é•·ç¯„å›²ï¼ˆnmï¼‰</p>
<p>resolution: æ³¢é•·åˆ†è§£èƒ½ï¼ˆnmï¼‰</p>
<p>"""</p>
<p>self.wavelengths = np.arange(wavelength_range[0], wavelength_range[1], resolution)</p>

<p>def measure_absorbance(self, sample_id, concentration=0.1):</p>
<p>"""</p>
<p>å¸å…‰åº¦æ¸¬å®šï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰</p>

<p>Args:</p>
<p>sample_id: ã‚µãƒ³ãƒ—ãƒ«ID</p>
<p>concentration: æ¿ƒåº¦ï¼ˆMï¼‰</p>

<p>Returns:</p>
<p>wavelengths, absorbance: æ³¢é•·ã¨å¸å…‰åº¦ã®é…åˆ—</p>
<p>"""</p>
<p># Beer-Lambertå‰‡: A = Îµ <em> c </em> l</p>
<p># ãƒ”ãƒ¼ã‚¯æ³¢é•·: 450 nmï¼ˆä»®æƒ³çš„ãªåŒ–åˆç‰©ï¼‰</p>
<p>peak_wavelength = 450</p>
<p>peak_absorbance = concentration * 10  # Îµcl = 10 (ä»®å®š)</p>

<p># ã‚¬ã‚¦ã‚¹å‹å¸åã‚¹ãƒšã‚¯ãƒˆãƒ«</p>
<p>absorbance = peak_absorbance <em> np.exp(-((self.wavelengths - peak_wavelength) / 50)</em>*2)</p>

<p># ãƒã‚¤ã‚ºè¿½åŠ </p>
<p>noise = np.random.normal(0, 0.01, len(self.wavelengths))</p>
<p>absorbance += noise</p>

<p>print(f"ã‚µãƒ³ãƒ—ãƒ« {sample_id} æ¸¬å®šå®Œäº†: ãƒ”ãƒ¼ã‚¯æ³¢é•· {peak_wavelength}nm, å¸å…‰åº¦ {peak_absorbance:.3f}")</p>

<p>return self.wavelengths, absorbance</p>

<p>def kinetic_measurement(self, duration=60, interval=5):</p>
<p>"""</p>
<p>åå¿œé€Ÿåº¦è«–æ¸¬å®šï¼ˆæ™‚é–“å¤‰åŒ–ã‚’è¿½è·¡ï¼‰</p>

<p>Args:</p>
<p>duration: æ¸¬å®šæ™‚é–“ï¼ˆç§’ï¼‰</p>
<p>interval: æ¸¬å®šé–“éš”ï¼ˆç§’ï¼‰</p>

<p>Returns:</p>
<p>times, absorbance_at_450nm: æ™‚é–“ã¨450nmã§ã®å¸å…‰åº¦</p>
<p>"""</p>
<p>times = np.arange(0, duration, interval)</p>
<p>absorbance_450 = []</p>

<p>print("åå¿œé€Ÿåº¦è«–æ¸¬å®šé–‹å§‹...")</p>
<p>for t in times:</p>
<p># ä¸€æ¬¡åå¿œã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³: [A] = [A]0 * exp(-kt)</p>
<p>k = 0.02  # s^-1</p>
<p>concentration = 0.1 <em> np.exp(-k </em> t)</p>

<p>_, abs_spectrum = self.measure_absorbance(f't={t}s', concentration)</p>
<p># 450nmã§ã®å¸å…‰åº¦ã‚’æŠ½å‡º</p>
<p>idx_450 = np.argmin(np.abs(self.wavelengths - 450))</p>
<p>absorbance_450.append(abs_spectrum[idx_450])</p>

<p>time.sleep(0.1)  # å®Ÿéš›ã®æ¸¬å®šã§ã¯å®Ÿæ™‚é–“ã§å¾…æ©Ÿ</p>

<p>return times, np.array(absorbance_450)</p>


<h1>ä½¿ç”¨ä¾‹</h1>
<p>spectrometer = SpectrometerSimulator()</p>

<h1>ã‚¹ãƒšã‚¯ãƒˆãƒ«æ¸¬å®š</h1>
<p>wavelengths, absorbance = spectrometer.measure_absorbance('Sample_001', concentration=0.15)</p>

<p>plt.figure(figsize=(10, 6))</p>
<p>plt.plot(wavelengths, absorbance, linewidth=2)</p>
<p>plt.xlabel('æ³¢é•· (nm)', fontsize=12)</p>
<p>plt.ylabel('å¸å…‰åº¦', fontsize=12)</p>
<p>plt.title('UV-Viså¸åã‚¹ãƒšã‚¯ãƒˆãƒ«', fontsize=14, fontweight='bold')</p>
<p>plt.grid(alpha=0.3)</p>
<p>plt.tight_layout()</p>
<p>plt.savefig('uv_vis_spectrum.png', dpi=300, bbox_inches='tight')</p>
<p>plt.show()</p>

<h1>åå¿œé€Ÿåº¦è«–æ¸¬å®š</h1>
<p>times, abs_450 = spectrometer.kinetic_measurement(duration=100, interval=10)</p>

<p>plt.figure(figsize=(10, 6))</p>
<p>plt.plot(times, abs_450, 'o-', linewidth=2, markersize=8)</p>
<p>plt.xlabel('æ™‚é–“ (s)', fontsize=12)</p>
<p>plt.ylabel('å¸å…‰åº¦ (450 nm)', fontsize=12)</p>
<p>plt.title('åå¿œé€Ÿåº¦è«–æ¸¬å®š', fontsize=14, fontweight='bold')</p>
<p>plt.grid(alpha=0.3)</p>
<p>plt.tight_layout()</p>
<p>plt.savefig('kinetic_measurement.png', dpi=300, bbox_inches='tight')</p>
<p>plt.show()</p>

<h1>ä¸€æ¬¡åå¿œé€Ÿåº¦å®šæ•°ã®ãƒ•ã‚£ãƒƒãƒ†ã‚£ãƒ³ã‚°</h1>
<p>from scipy.optimize import curve_fit</p>

<p>def first_order_kinetics(t, A0, k):</p>
<p>return A0 <em> np.exp(-k </em> t)</p>

<p>params, covariance = curve_fit(first_order_kinetics, times, abs_450, p0=[1.5, 0.02])</p>
<p>A0_fit, k_fit = params</p>

<p>print(f"\nä¸€æ¬¡åå¿œãƒ•ã‚£ãƒƒãƒ†ã‚£ãƒ³ã‚°:")</p>
<p>print(f"  åˆæœŸå¸å…‰åº¦ A0 = {A0_fit:.3f}")</p>
<p>print(f"  é€Ÿåº¦å®šæ•° k = {k_fit:.4f} s^-1")</p>
<p>print(f"  åŠæ¸›æœŸ t1/2 = {np.log(2)/k_fit:.1f} s")</p>
</code></pre>

<p>---</p>

<h3>2.4.2 ã‚«ãƒ¡ãƒ©ã«ã‚ˆã‚‹ç”»åƒè§£æ</h3>

<p>çµæ™¶æˆé•·ã€æ²ˆæ®¿å½¢æˆã€è‰²å¤‰åŒ–ãªã©ã‚’ã‚«ãƒ¡ãƒ©ã§è‡ªå‹•è¨˜éŒ²ãƒ»è§£æã—ã¾ã™ã€‚</p>

<pre><code class="language-python">from PIL import Image, ImageDraw, ImageFont
<p>import cv2</p>

<p>class LabCameraSimulator:</p>
<p>"""</p>
<p>å®Ÿé¨“ç”¨ã‚«ãƒ¡ãƒ©ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</p>
<p>å®Ÿéš›ã®è£…ç½®: Basler ace, FLIR Blackfly</p>
<p>"""</p>

<p>def __init__(self, resolution=(1920, 1080)):</p>
<p>self.resolution = resolution</p>

<p>def capture_wellplate(self, plate_id='Plate_001'):</p>
<p>"""</p>
<p>96ã‚¦ã‚§ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒˆã®ç”»åƒå–å¾—ï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰</p>

<p>Returns:</p>
<p>image: PIL Image</p>
<p>"""</p>
<p># ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³: 96ã‚¦ã‚§ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã‚°ãƒªãƒƒãƒ‰ç”»åƒã‚’ç”Ÿæˆ</p>
<p>img = Image.new('RGB', self.resolution, color='white')</p>
<p>draw = ImageDraw.Draw(img)</p>

<p># 8è¡Œ Ã— 12åˆ—ã®ã‚¦ã‚§ãƒ«</p>
<p>well_diameter = 50</p>
<p>spacing = 70</p>
<p>offset_x, offset_y = 200, 100</p>

<p>for row in range(8):</p>
<p>for col in range(12):</p>
<p>center_x = offset_x + col * spacing</p>
<p>center_y = offset_y + row * spacing</p>

<p># ã‚¦ã‚§ãƒ«ã®è‰²ï¼ˆæ¿ƒåº¦ã«å¿œã˜ã¦å¤‰åŒ–ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆï¼‰</p>
<p>intensity = int(255 * (1 - (row + col) / 20))  # å¾ã€…ã«æ¿ƒããªã‚‹</p>
<p>color = (intensity, intensity, 255)</p>

<p># ã‚¦ã‚§ãƒ«ã‚’æç”»</p>
<p>draw.ellipse([center_x - well_diameter//2, center_y - well_diameter//2,</p>
<p>center_x + well_diameter//2, center_y + well_diameter//2],</p>
<p>fill=color, outline='black')</p>

<p>print(f"ãƒ—ãƒ¬ãƒ¼ãƒˆ {plate_id} ã®ç”»åƒå–å¾—å®Œäº†")</p>
<p>return img</p>

<p>def analyze_well_color(self, image, well_position):</p>
<p>"""</p>
<p>ç‰¹å®šã‚¦ã‚§ãƒ«ã®è‰²ã‚’è§£æ</p>

<p>Args:</p>
<p>image: PIL Image</p>
<p>well_position: (row, col) ã‚¦ã‚§ãƒ«ä½ç½®</p>

<p>Returns:</p>
<p>rgb_mean: RGBå¹³å‡å€¤</p>
<p>"""</p>
<p>row, col = well_position</p>
<p>well_diameter = 50</p>
<p>spacing = 70</p>
<p>offset_x, offset_y = 200, 100</p>

<p>center_x = offset_x + col * spacing</p>
<p>center_y = offset_y + row * spacing</p>

<p># ã‚¦ã‚§ãƒ«é ˜åŸŸã‚’åˆ‡ã‚Šå‡ºã—</p>
<p>crop_box = (center_x - well_diameter//2, center_y - well_diameter//2,</p>
<p>center_x + well_diameter//2, center_y + well_diameter//2)</p>
<p>well_img = image.crop(crop_box)</p>

<p># RGBå¹³å‡å€¤ã‚’è¨ˆç®—</p>
<p>well_array = np.array(well_img)</p>
<p>rgb_mean = well_array.mean(axis=(0, 1))</p>

<p>return rgb_mean</p>


<h1>ä½¿ç”¨ä¾‹</h1>
<p>camera = LabCameraSimulator()</p>
<p>plate_image = camera.capture_wellplate('Plate_001')</p>
<p>plate_image.save('wellplate_image.png')</p>

<h1>ã‚¦ã‚§ãƒ«A1ã®è‰²è§£æ</h1>
<p>rgb = camera.analyze_well_color(plate_image, well_position=(0, 0))</p>
<p>print(f"ã‚¦ã‚§ãƒ«A1ã®RGBå€¤: R={rgb[0]:.1f}, G={rgb[1]:.1f}, B={rgb[2]:.1f}")</p>

<h1>å…¨ã‚¦ã‚§ãƒ«ã®è‰²è§£æ</h1>
<p>print("\nå…¨ã‚¦ã‚§ãƒ«ã®é’è‰²æˆåˆ†ï¼ˆBå€¤ï¼‰ãƒãƒƒãƒ—:")</p>
<p>blue_values = np.zeros((8, 12))</p>
<p>for row in range(8):</p>
<p>for col in range(12):</p>
<p>rgb = camera.analyze_well_color(plate_image, (row, col))</p>
<p>blue_values[row, col] = rgb[2]</p>

<p>plt.figure(figsize=(12, 6))</p>
<p>plt.imshow(blue_values, cmap='Blues', interpolation='nearest')</p>
<p>plt.colorbar(label='é’è‰²æˆåˆ† (Bå€¤)')</p>
<p>plt.xlabel('åˆ—', fontsize=12)</p>
<p>plt.ylabel('è¡Œ', fontsize=12)</p>
<p>plt.title('96ã‚¦ã‚§ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒˆã®è‰²åˆ†å¸ƒ', fontsize=14, fontweight='bold')</p>
<p>plt.xticks(range(12), [f'{i+1}' for i in range(12)])</p>
<p>plt.yticks(range(8), ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H'])</p>
<p>plt.tight_layout()</p>
<p>plt.savefig('wellplate_color_map.png', dpi=300, bbox_inches='tight')</p>
<p>plt.show()</p>
</code></pre>

<p>---</p>

<h2>2.5 å®‰å…¨æ€§ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</h2>

<h3>2.5.1 ç·Šæ€¥åœæ­¢æ©Ÿèƒ½</h3>

<pre><code class="language-python">class SafetyController:
<p>"""</p>
<p>å®Ÿé¨“è‡ªå‹•åŒ–ã‚·ã‚¹ãƒ†ãƒ ã®å®‰å…¨åˆ¶å¾¡</p>
<p>"""</p>

<p>def __init__(self):</p>
<p>self.emergency_stop = False</p>
<p>self.error_log = []</p>

<p>def check_safety(self, temperature, pressure, liquid_level):</p>
<p>"""</p>
<p>å®‰å…¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ãƒã‚§ãƒƒã‚¯</p>

<p>Args:</p>
<p>temperature: æ¸©åº¦ï¼ˆâ„ƒï¼‰</p>
<p>pressure: åœ§åŠ›ï¼ˆbarï¼‰</p>
<p>liquid_level: æ¶²é¢ãƒ¬ãƒ™ãƒ«ï¼ˆ%ï¼‰</p>

<p>Returns:</p>
<p>is_safe: å®‰å…¨ã‹ã©ã†ã‹</p>
<p>"""</p>
<p>is_safe = True</p>
<p>warnings = []</p>

<p># æ¸©åº¦ãƒã‚§ãƒƒã‚¯</p>
<p>if temperature > 100:</p>
<p>warnings.append(f"è­¦å‘Š: æ¸©åº¦ãŒé«˜ã™ãã¾ã™ ({temperature}â„ƒ)")</p>
<p>is_safe = False</p>

<p># åœ§åŠ›ãƒã‚§ãƒƒã‚¯</p>
<p>if pressure > 5:</p>
<p>warnings.append(f"è­¦å‘Š: åœ§åŠ›ãŒé«˜ã™ãã¾ã™ ({pressure} bar)")</p>
<p>is_safe = False</p>

<p># æ¶²é¢ãƒ¬ãƒ™ãƒ«ãƒã‚§ãƒƒã‚¯</p>
<p>if liquid_level < 10:</p>
<p>warnings.append(f"è­¦å‘Š: æ¶²é¢ãŒä½ã™ãã¾ã™ ({liquid_level}%)")</p>
<p>is_safe = False</p>

<p>if not is_safe:</p>
<p>for warning in warnings:</p>
<p>print(warning)</p>
<p>self.error_log.append({'time': time.strftime('%Y-%m-%d %H:%M:%S'), 'message': warning})</p>

<p>return is_safe</p>

<p>def emergency_stop_sequence(self):</p>
<p>"""ç·Šæ€¥åœæ­¢ã‚·ãƒ¼ã‚±ãƒ³ã‚¹"""</p>
<p>print("\nğŸš¨ ç·Šæ€¥åœæ­¢ã‚’å®Ÿè¡Œã—ã¾ã™ ğŸš¨")</p>
<p>self.emergency_stop = True</p>

<p># åœæ­¢ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</p>
<p>actions = [</p>
<p>"1. ã™ã¹ã¦ã®ãƒ­ãƒœãƒƒãƒˆå‹•ä½œã‚’åœæ­¢",</p>
<p>"2. ãƒ’ãƒ¼ã‚¿ãƒ¼ã‚’åœæ­¢",</p>
<p>"3. å†·å´æ°´ã‚’å¾ªç’°",</p>
<p>"4. ãƒãƒ«ãƒ–ã‚’å®‰å…¨ä½ç½®ã«ç§»å‹•",</p>
<p>"5. ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã«é€šçŸ¥",</p>
<p>"6. ãƒ­ã‚°ã‚’è¨˜éŒ²"</p>
<p>]</p>

<p>for action in actions:</p>
<p>print(action)</p>
<p>time.sleep(0.5)</p>

<p>print("\nç·Šæ€¥åœæ­¢å®Œäº†ã€‚ã‚·ã‚¹ãƒ†ãƒ ã¯å®‰å…¨çŠ¶æ…‹ã§ã™ã€‚")</p>

<p>def print_error_log(self):</p>
<p>"""ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’è¡¨ç¤º"""</p>
<p>print("\n=== ã‚¨ãƒ©ãƒ¼ãƒ­ã‚° ===")</p>
<p>for error in self.error_log:</p>
<p>print(f"[{error['time']}] {error['message']}")</p>


<h1>ä½¿ç”¨ä¾‹</h1>
<p>safety = SafetyController()</p>

<h1>æ­£å¸¸ãªçŠ¶æ…‹</h1>
<p>print("=== æ­£å¸¸é‹è»¢ ===")</p>
<p>is_safe = safety.check_safety(temperature=80, pressure=2.0, liquid_level=50)</p>
<p>print(f"å®‰å…¨çŠ¶æ…‹: {is_safe}\n")</p>

<h1>ç•°å¸¸ãªçŠ¶æ…‹</h1>
<p>print("=== ç•°å¸¸æ¤œçŸ¥ ===")</p>
<p>is_safe = safety.check_safety(temperature=120, pressure=6.5, liquid_level=5)</p>
<p>print(f"å®‰å…¨çŠ¶æ…‹: {is_safe}")</p>

<p>if not is_safe:</p>
<p>safety.emergency_stop_sequence()</p>

<p>safety.print_error_log()</p>
</code></pre>

<p>---</p>

<h3>2.5.2 ã‚¨ãƒ©ãƒ¼ãƒªã‚«ãƒãƒªãƒ¼</h3>

<pre><code class="language-python">def robust_pipetting_with_retry(pipette, source, dest, volume, max_retries=3):
<p>"""</p>
<p>ã‚¨ãƒ©ãƒ¼ãƒªã‚«ãƒãƒªãƒ¼ä»˜ããƒ”ãƒšãƒƒãƒ†ã‚£ãƒ³ã‚°</p>

<p>Args:</p>
<p>pipette: OT-2 pipette</p>
<p>source: å¸å¼•å…ƒ</p>
<p>dest: åˆ†æ³¨å…ˆ</p>
<p>volume: å®¹é‡ï¼ˆÂµLï¼‰</p>
<p>max_retries: æœ€å¤§ãƒªãƒˆãƒ©ã‚¤å›æ•°</p>

<p>Returns:</p>
<p>success: æˆåŠŸã—ãŸã‹ã©ã†ã‹</p>
<p>"""</p>
<p>for attempt in range(max_retries):</p>
<p>try:</p>
<p>pipette.pick_up_tip()</p>
<p>pipette.aspirate(volume, source)</p>
<p>pipette.dispense(volume, dest)</p>
<p>pipette.drop_tip()</p>

<p>print(f"ãƒ”ãƒšãƒƒãƒ†ã‚£ãƒ³ã‚°æˆåŠŸ: {volume} ÂµL ({attempt+1}å›ç›®)")</p>
<p>return True</p>

<p>except Exception as e:</p>
<p>print(f"ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ ({attempt+1}å›ç›®): {e}")</p>

<p># ãƒªã‚«ãƒãƒªãƒ¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</p>
<p>if pipette.has_tip:</p>
<p>pipette.drop_tip()</p>

<p>if attempt < max_retries - 1:</p>
<p>print("ãƒªãƒˆãƒ©ã‚¤ã—ã¾ã™...")</p>
<p>time.sleep(1)</p>
<p>else:</p>
<p>print("æœ€å¤§ãƒªãƒˆãƒ©ã‚¤å›æ•°ã«é”ã—ã¾ã—ãŸã€‚æ“ä½œã‚’ä¸­æ­¢ã—ã¾ã™ã€‚")</p>
<p>return False</p>

<p>return False</p>


<h1>ç–‘ä¼¼ã‚³ãƒ¼ãƒ‰ã§ã®ä½¿ç”¨ä¾‹</h1>
<p>print("ã‚¨ãƒ©ãƒ¼ãƒªã‚«ãƒãƒªãƒ¼ä»˜ããƒ”ãƒšãƒƒãƒ†ã‚£ãƒ³ã‚°ã®ãƒ‡ãƒ¢:\n")</p>

<p>class MockPipette:</p>
<p>def __init__(self, fail_probability=0.3):</p>
<p>self.has_tip = False</p>
<p>self.fail_probability = fail_probability</p>

<p>def pick_up_tip(self):</p>
<p>if np.random.random() < self.fail_probability:</p>
<p>raise Exception("ãƒãƒƒãƒ—å–å¾—å¤±æ•—")</p>
<p>self.has_tip = True</p>

<p>def aspirate(self, volume, source):</p>
<p>if np.random.random() < self.fail_probability:</p>
<p>raise Exception("å¸å¼•å¤±æ•—")</p>

<p>def dispense(self, volume, dest):</p>
<p>if np.random.random() < self.fail_probability:</p>
<p>raise Exception("åˆ†æ³¨å¤±æ•—")</p>

<p>def drop_tip(self):</p>
<p>self.has_tip = False</p>

<p>mock_pipette = MockPipette(fail_probability=0.4)  # 40%ã®ç¢ºç‡ã§å¤±æ•—</p>
<p>success = robust_pipetting_with_retry(mock_pipette, 'A1', 'B1', 100, max_retries=5)</p>
<p>print(f"\næœ€çµ‚çµæœ: {'æˆåŠŸ' if success else 'å¤±æ•—'}")</p>
</code></pre>

<p>---</p>

<h2>2.6 ãƒ©ãƒœã‚¦ã‚§ã‚¢ã®æ¨™æº–åŒ–</h2>

<h3>2.6.1 SBSï¼ˆSociety for Biomolecular Screeningï¼‰è¦æ ¼</h3>

<p>96ã‚¦ã‚§ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒˆã€384ã‚¦ã‚§ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒˆãªã©ã€ãƒ©ãƒœã‚¦ã‚§ã‚¢ã®å¯¸æ³•ã¯å›½éš›è¦æ ¼ã§æ¨™æº–åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>

<pre><code class="language-python">class SBS_Labware:
<p>"""</p>
<p>SBSè¦æ ¼ã®ãƒ©ãƒœã‚¦ã‚§ã‚¢ä»•æ§˜</p>
<p>"""</p>

<p>@staticmethod</p>
<p>def plate_96_well():</p>
<p>"""96ã‚¦ã‚§ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä»•æ§˜"""</p>
<p>specs = {</p>
<p>'åç§°': '96ã‚¦ã‚§ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒˆ',</p>
<p>'ãƒ•ãƒƒãƒˆãƒ—ãƒªãƒ³ãƒˆ': '127.76 mm Ã— 85.48 mm (SBSè¦æ ¼)',</p>
<p>'ã‚¦ã‚§ãƒ«é…ç½®': '8è¡Œ Ã— 12åˆ—',</p>
<p>'ã‚¦ã‚§ãƒ«é–“éš”': '9.0 mm (ä¸­å¿ƒé–“)',</p>
<p>'ã‚¦ã‚§ãƒ«å®¹é‡': 'é€šå¸¸ 300-360 ÂµL',</p>
<p>'ã‚¦ã‚§ãƒ«å½¢çŠ¶': 'ãƒ•ãƒ©ãƒƒãƒˆã€Uå­—å‹ã€Vå­—å‹',</p>
<p>'ç”¨é€”': 'ä¸€èˆ¬çš„ãªã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ã€ã‚¢ãƒƒã‚»ã‚¤'</p>
<p>}</p>
<p>return specs</p>

<p>@staticmethod</p>
<p>def plate_384_well():</p>
<p>"""384ã‚¦ã‚§ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä»•æ§˜"""</p>
<p>specs = {</p>
<p>'åç§°': '384ã‚¦ã‚§ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒˆ',</p>
<p>'ãƒ•ãƒƒãƒˆãƒ—ãƒªãƒ³ãƒˆ': '127.76 mm Ã— 85.48 mm (96ã‚¦ã‚§ãƒ«ã¨åŒã˜)',</p>
<p>'ã‚¦ã‚§ãƒ«é…ç½®': '16è¡Œ Ã— 24åˆ—',</p>
<p>'ã‚¦ã‚§ãƒ«é–“éš”': '4.5 mm (ä¸­å¿ƒé–“ã€96ã‚¦ã‚§ãƒ«ã®åŠåˆ†)',</p>
<p>'ã‚¦ã‚§ãƒ«å®¹é‡': 'é€šå¸¸ 50-100 ÂµL',</p>
<p>'ç”¨é€”': 'é«˜å¯†åº¦ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ã€å‰µè–¬'</p>
<p>}</p>
<p>return specs</p>

<p>@staticmethod</p>
<p>def plot_wellplate_layout(n_wells=96):</p>
<p>"""ã‚¦ã‚§ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒˆã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’å¯è¦–åŒ–"""</p>
<p>if n_wells == 96:</p>
<p>rows, cols = 8, 12</p>
<p>well_spacing = 9.0  # mm</p>
<p>elif n_wells == 384:</p>
<p>rows, cols = 16, 24</p>
<p>well_spacing = 4.5  # mm</p>
<p>else:</p>
<p>raise ValueError("96ã¾ãŸã¯384ã‚¦ã‚§ãƒ«ã®ã¿ã‚µãƒãƒ¼ãƒˆ")</p>

<p>fig, ax = plt.subplots(figsize=(12, 6))</p>

<p># ã‚¦ã‚§ãƒ«ã‚’æç”»</p>
<p>for row in range(rows):</p>
<p>for col in range(cols):</p>
<p>x = col * well_spacing</p>
<p>y = row * well_spacing</p>
<p>circle = plt.Circle((x, y), radius=well_spacing*0.4, color='lightblue', ec='black')</p>
<p>ax.add_patch(circle)</p>

<p># ã‚¦ã‚§ãƒ«åã‚’è¡¨ç¤ºï¼ˆ96ã‚¦ã‚§ãƒ«ã®ã¿ã€è¦‹ã‚„ã™ã•ã®ãŸã‚ï¼‰</p>
<p>if n_wells == 96:</p>
<p>well_name = f"{chr(65+row)}{col+1}"</p>
<p>ax.text(x, y, well_name, ha='center', va='center', fontsize=8)</p>

<p>ax.set_xlim(-well_spacing, cols * well_spacing)</p>
<p>ax.set_ylim(-well_spacing, rows * well_spacing)</p>
<p>ax.set_aspect('equal')</p>
<p>ax.invert_yaxis()  # Yè»¸ã‚’åè»¢ï¼ˆAè¡ŒãŒä¸Šï¼‰</p>
<p>ax.set_xlabel('X æ–¹å‘ (mm)', fontsize=12)</p>
<p>ax.set_ylabel('Y æ–¹å‘ (mm)', fontsize=12)</p>
<p>ax.set_title(f'{n_wells}ã‚¦ã‚§ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒˆ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ (SBSè¦æ ¼)', fontsize=14, fontweight='bold')</p>
<p>ax.grid(alpha=0.3)</p>
<p>plt.tight_layout()</p>
<p>plt.savefig(f'{n_wells}_wellplate_layout.png', dpi=300, bbox_inches='tight')</p>
<p>plt.show()</p>


<h1>ä»•æ§˜ã®è¡¨ç¤º</h1>
<p>labware = SBS_Labware()</p>

<p>print("=== 96ã‚¦ã‚§ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒˆ ===")</p>
<p>for key, value in labware.plate_96_well().items():</p>
<p>print(f"{key}: {value}")</p>

<p>print("\n=== 384ã‚¦ã‚§ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒˆ ===")</p>
<p>for key, value in labware.plate_384_well().items():</p>
<p>print(f"{key}: {value}")</p>

<h1>ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®å¯è¦–åŒ–</h1>
<p>labware.plot_wellplate_layout(n_wells=96)</p>
</code></pre>

<p>---</p>

<h2>2.7 æ¼”ç¿’å•é¡Œ</h2>

<h3>æ¼”ç¿’1: ãƒ­ãƒœãƒƒãƒˆã‚¢ãƒ¼ãƒ ã®è»Œé“æœ€é©åŒ–ï¼ˆé›£æ˜“åº¦: Mediumï¼‰</h3>

<p>2ã¤ã®è©¦è–¬ãƒœãƒˆãƒ«ï¼ˆä½ç½®A: (0.35, 0.15)ã€ä½ç½®B: (0.25, 0.35)ï¼‰ã¨åå¿œå®¹å™¨ï¼ˆä½ç½®C: (0.4, 0.3)ï¼‰ãŒã‚ã‚‹å ´åˆã€æœ€çŸ­æ™‚é–“ã§ A â†’ B â†’ C ã®é †ã«è¨ªå•ã™ã‚‹è»Œé“ã‚’è¨ˆç”»ã—ã¦ãã ã•ã„ã€‚</p>

<details>
<summary>ãƒ’ãƒ³ãƒˆ</summary>

<p>ç›´ç·šè»Œé“ã®ç§»å‹•æ™‚é–“ã¯è·é›¢ã«æ¯”ä¾‹ã—ã¾ã™ã€‚Aâ†’Bâ†’C ã¨ Aâ†’Câ†’B ã®2ã¤ã®ãƒ«ãƒ¼ãƒˆã‚’æ¯”è¼ƒã—ã€ç·ç§»å‹•è·é›¢ãŒçŸ­ã„æ–¹ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</p>

</details>

<details>
<summary>è§£ç­”ä¾‹</summary>

<pre><code class="language-python">def calculate_path_length(points):
<p>"""çµŒè·¯ã®ç·è·é›¢ã‚’è¨ˆç®—"""</p>
<p>total_distance = 0</p>
<p>for i in range(len(points) - 1):</p>
<p>dx = points[i+1][0] - points[i][0]</p>
<p>dy = points[i+1][1] - points[i][1]</p>
<p>distance = np.sqrt(dx<strong>2 + dy</strong>2)</p>
<p>total_distance += distance</p>
<p>return total_distance</p>

<h1>è©¦è–¬ãƒœãƒˆãƒ«ã¨åå¿œå®¹å™¨ã®ä½ç½®</h1>
<p>A = (0.35, 0.15)  # è©¦è–¬A</p>
<p>B = (0.25, 0.35)  # è©¦è–¬B</p>
<p>C = (0.4, 0.3)    # åå¿œå®¹å™¨</p>

<h1>ãƒ«ãƒ¼ãƒˆ1: A â†’ B â†’ C</h1>
<p>route1 = [A, B, C]</p>
<p>distance1 = calculate_path_length(route1)</p>

<h1>ãƒ«ãƒ¼ãƒˆ2: A â†’ C â†’ B</h1>
<p>route2 = [A, C, B]</p>
<p>distance2 = calculate_path_length(route2)</p>

<p>print("ãƒ«ãƒ¼ãƒˆæ¯”è¼ƒ:")</p>
<p>print(f"  A â†’ B â†’ C: {distance1:.3f} m")</p>
<p>print(f"  A â†’ C â†’ B: {distance2:.3f} m")</p>

<p>if distance1 < distance2:</p>
<p>print(f"\næœ€é©ãƒ«ãƒ¼ãƒˆ: A â†’ B â†’ Cï¼ˆ{distance1:.3f} mï¼‰")</p>
<p>optimal_route = route1</p>
<p>else:</p>
<p>print(f"\næœ€é©ãƒ«ãƒ¼ãƒˆ: A â†’ C â†’ Bï¼ˆ{distance2:.3f} mï¼‰")</p>
<p>optimal_route = route2</p>

<h1>å¯è¦–åŒ–</h1>
<p>robot = SimpleRobotArm()</p>
<p>fig, ax = plt.subplots(figsize=(10, 8))</p>

<h1>åˆ°é”ç¯„å›²</h1>
<p>theta = np.linspace(0, 2*np.pi, 100)</p>
<p>r_max = robot.L1 + robot.L2</p>
<p>ax.plot(r_max <em> np.cos(theta), r_max </em> np.sin(theta), 'k--', alpha=0.2, label='æœ€å¤§åˆ°é”ç¯„å›²')</p>

<h1>ä½ç½®ã‚’ãƒ—ãƒ­ãƒƒãƒˆ</h1>
<p>for point, label in zip([A, B, C], ['è©¦è–¬A', 'è©¦è–¬B', 'åå¿œå®¹å™¨']):</p>
<p>ax.plot(point[0], point[1], 'o', markersize=15, label=label)</p>

<h1>æœ€é©ãƒ«ãƒ¼ãƒˆã‚’æç”»</h1>
<p>route_x, route_y = zip(*optimal_route)</p>
<p>ax.plot(route_x, route_y, 'r-', linewidth=2, alpha=0.6, label='æœ€é©çµŒè·¯')</p>

<p>ax.axis('equal')</p>
<p>ax.grid(alpha=0.3)</p>
<p>ax.set_xlabel('X ä½ç½® (m)', fontsize=12)</p>
<p>ax.set_ylabel('Y ä½ç½® (m)', fontsize=12)</p>
<p>ax.set_title('çµŒè·¯æœ€é©åŒ–', fontsize=14, fontweight='bold')</p>
<p>ax.legend()</p>
<p>plt.tight_layout()</p>
<p>plt.savefig('path_optimization.png', dpi=300, bbox_inches='tight')</p>
<p>plt.show()</p>
</code></pre>

</details>

<p>---</p>

<h3>æ¼”ç¿’2: 96ã‚¦ã‚§ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒˆã¸ã®è¤‡æ•°è©¦è–¬åˆ†æ³¨ï¼ˆé›£æ˜“åº¦: Mediumï¼‰</h3>

<p>96ã‚¦ã‚§ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒˆã«3ç¨®é¡ã®è©¦è–¬ï¼ˆAã€Bã€Cï¼‰ã‚’ä»¥ä¸‹ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§åˆ†æ³¨ã™ã‚‹OpenTronsãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</p>

<ul>
<li>è©¦è–¬A: åˆ—1-4ï¼ˆã‚¦ã‚§ãƒ«A1-H4ï¼‰ã«50 ÂµL</li>
<li>è©¦è–¬B: åˆ—5-8ï¼ˆã‚¦ã‚§ãƒ«A5-H8ï¼‰ã«50 ÂµL</li>
<li>è©¦è–¬C: åˆ—9-12ï¼ˆã‚¦ã‚§ãƒ«A9-H12ï¼‰ã«50 ÂµL</li>
</ul>

<details>
<summary>ãƒ’ãƒ³ãƒˆ</summary>

<p>8ãƒãƒ£ãƒ³ãƒãƒ«ãƒ”ãƒšãƒƒãƒˆã‚’ä½¿ç”¨ã™ã‚Œã°ã€å„åˆ—ã‚’1å›ã®ãƒ”ãƒšãƒƒãƒ†ã‚£ãƒ³ã‚°ã§å‡¦ç†ã§ãã¾ã™ã€‚<code>plate.columns()[0:4]</code>ã§åˆ—1-4ã‚’é¸æŠã§ãã¾ã™ã€‚</p>

</details>

<details>
<summary>è§£ç­”ä¾‹</summary>

<pre><code class="language-python">from opentrons import protocol_api

<p>metadata = {</p>
<p>'protocolName': '96ã‚¦ã‚§ãƒ« 3è©¦è–¬åˆ†æ³¨',</p>
<p>'author': 'Materials Lab',</p>
<p>'description': '3ç¨®é¡ã®è©¦è–¬ã‚’åˆ—ã”ã¨ã«åˆ†æ³¨',</p>
<p>'apiLevel': '2.13'</p>
<p>}</p>

<p>def run(protocol: protocol_api.ProtocolContext):</p>
<p># ãƒ‡ãƒƒã‚­ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ</p>
<p>plate = protocol.load_labware('corning_96_wellplate_360ul_flat', location='1')</p>
<p>reservoir = protocol.load_labware('nest_12_reservoir_15ml', location='2')</p>
<p>tiprack = protocol.load_labware('opentrons_96_tiprack_300ul', location='3')</p>

<p># 8ãƒãƒ£ãƒ³ãƒãƒ«ãƒ”ãƒšãƒƒãƒˆ</p>
<p>pipette = protocol.load_instrument('p300_multi_gen2', mount='left', tip_racks=[tiprack])</p>

<p># è©¦è–¬ã®ä½ç½®</p>
<p>reagent_a = reservoir['A1']</p>
<p>reagent_b = reservoir['A2']</p>
<p>reagent_c = reservoir['A3']</p>

<p># è©¦è–¬Aã‚’åˆ—1-4ã«åˆ†æ³¨</p>
<p>pipette.pick_up_tip()</p>
<p>for col in plate.columns()[0:4]:  # åˆ—1-4</p>
<p>pipette.aspirate(50, reagent_a)</p>
<p>pipette.dispense(50, col[0])  # åˆ—ã®å…ˆé ­ã‚¦ã‚§ãƒ«ï¼ˆA1, A2, A3, A4ï¼‰</p>
<p>pipette.blow_out()</p>
<p>pipette.drop_tip()</p>

<p>protocol.comment("è©¦è–¬A åˆ†æ³¨å®Œäº†")</p>

<p># è©¦è–¬Bã‚’åˆ—5-8ã«åˆ†æ³¨</p>
<p>pipette.pick_up_tip()</p>
<p>for col in plate.columns()[4:8]:  # åˆ—5-8</p>
<p>pipette.aspirate(50, reagent_b)</p>
<p>pipette.dispense(50, col[0])</p>
<p>pipette.blow_out()</p>
<p>pipette.drop_tip()</p>

<p>protocol.comment("è©¦è–¬B åˆ†æ³¨å®Œäº†")</p>

<p># è©¦è–¬Cã‚’åˆ—9-12ã«åˆ†æ³¨</p>
<p>pipette.pick_up_tip()</p>
<p>for col in plate.columns()[8:12]:  # åˆ—9-12</p>
<p>pipette.aspirate(50, reagent_c)</p>
<p>pipette.dispense(50, col[0])</p>
<p>pipette.blow_out()</p>
<p>pipette.drop_tip()</p>

<p>protocol.comment("è©¦è–¬C åˆ†æ³¨å®Œäº†")</p>
<p>protocol.comment("ãƒ—ãƒ­ãƒˆã‚³ãƒ«å®Œäº†: 96ã‚¦ã‚§ãƒ«å…¨ã¦ã«è©¦è–¬ã‚’åˆ†æ³¨ã—ã¾ã—ãŸ")</p>

<h1>ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ</h1>
<p>print("ãƒ—ãƒ­ãƒˆã‚³ãƒ«ä½œæˆå®Œäº†")</p>
<p>print("å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰: opentrons_simulate three_reagent_protocol.py")</p>
</code></pre>

</details>

<p>---</p>

<h3>æ¼”ç¿’3: ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ç•°å¸¸æ¤œçŸ¥ï¼ˆé›£æ˜“åº¦: Hardï¼‰</h3>

<p>UV-Visåˆ†å…‰è¨ˆã§åå¿œã‚’ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ä¸­ã€ç•°å¸¸ãªå¸å…‰åº¦å¤‰åŒ–ï¼ˆæ€¥æ¿€ãªå¢—åŠ ã¾ãŸã¯æ¸›å°‘ï¼‰ã‚’æ¤œçŸ¥ã—ã€ç·Šæ€¥åœæ­¢ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚</p>

<strong>æ¡ä»¶</strong>:
<ul>
<li>æ¸¬å®šé–“éš”: 10ç§’</li>
<li>ç•°å¸¸åˆ¤å®š: å‰å›æ¸¬å®šå€¤ã‹ã‚‰20%ä»¥ä¸Šå¤‰åŒ–ã—ãŸå ´åˆ</li>
<li>ç•°å¸¸ãŒ2å›é€£ç¶šã—ãŸå ´åˆã«ç·Šæ€¥åœæ­¢</li>
</ul>

<details>
<summary>ãƒ’ãƒ³ãƒˆ</summary>

<p>å„æ¸¬å®šã§å‰å›å€¤ã¨æ¯”è¼ƒã—ã€å¤‰åŒ–ç‡ã‚’è¨ˆç®—ã—ã¾ã™ã€‚ç•°å¸¸ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’å°å…¥ã—ã€2å›é€£ç¶šã§ç•°å¸¸ãŒæ¤œçŸ¥ã•ã‚ŒãŸã‚‰ç·Šæ€¥åœæ­¢ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p>

</details>

<details>
<summary>è§£ç­”ä¾‹</summary>

<pre><code class="language-python">class ReactionMonitor:
<p>"""</p>
<p>åå¿œãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã¨ç•°å¸¸æ¤œçŸ¥</p>
<p>"""</p>

<p>def __init__(self, anomaly_threshold=0.2, consecutive_anomalies=2):</p>
<p>"""</p>
<p>Args:</p>
<p>anomaly_threshold: ç•°å¸¸åˆ¤å®šã®é–¾å€¤ï¼ˆå¤‰åŒ–ç‡ï¼‰</p>
<p>consecutive_anomalies: ç·Šæ€¥åœæ­¢ã¾ã§ã®é€£ç¶šç•°å¸¸å›æ•°</p>
<p>"""</p>
<p>self.threshold = anomaly_threshold</p>
<p>self.consecutive_threshold = consecutive_anomalies</p>
<p>self.anomaly_count = 0</p>
<p>self.previous_value = None</p>
<p>self.measurements = []</p>

<p>def check_anomaly(self, current_value):</p>
<p>"""</p>
<p>ç•°å¸¸æ¤œçŸ¥</p>

<p>Args:</p>
<p>current_value: ç¾åœ¨ã®æ¸¬å®šå€¤</p>

<p>Returns:</p>
<p>is_anomaly: ç•°å¸¸ã‹ã©ã†ã‹</p>
<p>"""</p>
<p>if self.previous_value is None:</p>
<p>self.previous_value = current_value</p>
<p>return False</p>

<p># å¤‰åŒ–ç‡ã‚’è¨ˆç®—</p>
<p>change_rate = abs((current_value - self.previous_value) / self.previous_value)</p>

<p>is_anomaly = change_rate > self.threshold</p>

<p>if is_anomaly:</p>
<p>self.anomaly_count += 1</p>
<p>print(f"âš ï¸ ç•°å¸¸æ¤œçŸ¥: å¤‰åŒ–ç‡ {change_rate<em>100:.1f}% (é–¾å€¤: {self.threshold</em>100:.1f}%)")</p>
<p>print(f"   å‰å›å€¤: {self.previous_value:.3f}, ç¾åœ¨å€¤: {current_value:.3f}")</p>
<p>print(f"   é€£ç¶šç•°å¸¸å›æ•°: {self.anomaly_count}/{self.consecutive_threshold}")</p>
<p>else:</p>
<p>self.anomaly_count = 0  # æ­£å¸¸ãªã‚‰ç•°å¸¸ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’ãƒªã‚»ãƒƒãƒˆ</p>

<p>self.previous_value = current_value</p>
<p>return is_anomaly</p>

<p>def should_emergency_stop(self):</p>
<p>"""ç·Šæ€¥åœæ­¢ãŒå¿…è¦ã‹åˆ¤å®š"""</p>
<p>return self.anomaly_count >= self.consecutive_threshold</p>


<h1>ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h1>
<p>print("=== åå¿œãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°é–‹å§‹ ===\n")</p>
<p>monitor = ReactionMonitor(anomaly_threshold=0.2, consecutive_anomalies=2)</p>
<p>safety = SafetyController()</p>

<h1>æ¸¬å®šãƒ‡ãƒ¼ã‚¿ï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰</h1>
<h1>æ­£å¸¸ â†’ æ­£å¸¸ â†’ ç•°å¸¸1 â†’ ç•°å¸¸2ï¼ˆç·Šæ€¥åœæ­¢ï¼‰</h1>
<p>simulated_absorbance = [1.0, 1.05, 1.08, 1.40, 1.75]</p>

<p>for i, absorbance in enumerate(simulated_absorbance):</p>
<p>print(f"--- æ¸¬å®š {i+1} ---")</p>
<p>print(f"å¸å…‰åº¦: {absorbance:.3f}")</p>

<p>monitor.measurements.append(absorbance)</p>
<p>is_anomaly = monitor.check_anomaly(absorbance)</p>

<p>if monitor.should_emergency_stop():</p>
<p>print("\nğŸš¨ é€£ç¶šç•°å¸¸æ¤œçŸ¥ï¼ ç·Šæ€¥åœæ­¢ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚")</p>
<p>safety.emergency_stop_sequence()</p>
<p>break</p>

<p>print()</p>

<h1>æ¸¬å®šãƒ‡ãƒ¼ã‚¿ã®ãƒ—ãƒ­ãƒƒãƒˆ</h1>
<p>plt.figure(figsize=(10, 6))</p>
<p>plt.plot(range(1, len(monitor.measurements) + 1), monitor.measurements, 'o-', linewidth=2, markersize=10)</p>
<p>plt.axhline(y=monitor.measurements[0] * (1 + monitor.threshold), color='red', linestyle='--', label='ä¸Šé™é–¾å€¤')</p>
<p>plt.axhline(y=monitor.measurements[0] * (1 - monitor.threshold), color='red', linestyle='--', label='ä¸‹é™é–¾å€¤')</p>
<p>plt.xlabel('æ¸¬å®šå›æ•°', fontsize=12)</p>
<p>plt.ylabel('å¸å…‰åº¦', fontsize=12)</p>
<p>plt.title('åå¿œãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã¨ç•°å¸¸æ¤œçŸ¥', fontsize=14, fontweight='bold')</p>
<p>plt.legend()</p>
<p>plt.grid(alpha=0.3)</p>
<p>plt.tight_layout()</p>
<p>plt.savefig('anomaly_detection.png', dpi=300, bbox_inches='tight')</p>
<p>plt.show()</p>
</code></pre>

</details>

<p>---</p>

<h2>æœ¬ç« ã®ã¾ã¨ã‚</h2>

<p>æœ¬ç« ã§ã¯ã€ãƒ­ãƒœãƒ†ã‚£ã‚¯ã‚¹å®Ÿé¨“ã®åŸºç¤æŠ€è¡“ã‚’å®Ÿè·µçš„ã«å­¦ã³ã¾ã—ãŸã€‚</p>

<h3>ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆ</h3>

<ol>
<li><strong>ãƒ­ãƒœãƒƒãƒˆã‚¢ãƒ¼ãƒ åˆ¶å¾¡</strong>:</li>
</ol>
<p>- é †é‹å‹•å­¦: é–¢ç¯€è§’åº¦â†’ä½ç½®</p>
<p>- é€†é‹å‹•å­¦: ç›®æ¨™ä½ç½®â†’é–¢ç¯€è§’åº¦ï¼ˆå®Ÿé¨“ã§ä½¿ç”¨ï¼‰</p>
<p>- è»Œé“è¨ˆç”»: ã‚¹ãƒ ãƒ¼ã‚ºã§å®‰å…¨ãªçµŒè·¯ç”Ÿæˆ</p>

<ol>
<li><strong>æ¶²ä½“ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆOpenTrons OT-2ï¼‰</strong>:</li>
</ol>
<p>- åŸºæœ¬ãƒ”ãƒšãƒƒãƒ†ã‚£ãƒ³ã‚°: ç²¾åº¦Â±1 ÂµL</p>
<p>- ãƒãƒ«ãƒãƒãƒ£ãƒ³ãƒãƒ«: 8å€é«˜é€ŸåŒ–</p>
<p>- æ®µéšå¸Œé‡ˆ: 10^-7 Mã¾ã§ã®è‡ªå‹•å¸Œé‡ˆç³»åˆ—</p>

<ol>
<li><strong>å›ºä½“ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</strong>:</li>
</ol>
<p>- ç²‰æœ«è¨ˆé‡: Â±0.001 gã®ç²¾åº¦</p>
<p>- å¤šæˆåˆ†é…åˆ: è‡ªå‹•åŒ–ã«ã‚ˆã‚‹å†ç¾æ€§å‘ä¸Š</p>

<ol>
<li><strong>ã‚»ãƒ³ã‚µãƒ¼çµ±åˆ</strong>:</li>
</ol>
<p>- UV-Visåˆ†å…‰è¨ˆ: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åå¿œãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°</p>
<p>- ã‚«ãƒ¡ãƒ©: ç”»åƒè§£æã«ã‚ˆã‚‹å®šé‡è©•ä¾¡</p>

<ol>
<li><strong>å®‰å…¨è¨­è¨ˆ</strong>:</li>
</ol>
<p>- ç·Šæ€¥åœæ­¢: ç•°å¸¸æ¤œçŸ¥æ™‚ã®è‡ªå‹•åœæ­¢</p>
<p>- ã‚¨ãƒ©ãƒ¼ãƒªã‚«ãƒãƒªãƒ¼: ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½</p>
<p>- ãƒ­ã‚°è¨˜éŒ²: ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£ç¢ºä¿</p>

<ol>
<li><strong>ãƒ©ãƒœã‚¦ã‚§ã‚¢æ¨™æº–åŒ–</strong>:</li>
</ol>
<p>- SBSè¦æ ¼: 96/384ã‚¦ã‚§ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒˆã®å›½éš›æ¨™æº–</p>
<p>- äº’æ›æ€§: ç•°ãªã‚‹ãƒ¡ãƒ¼ã‚«ãƒ¼é–“ã§ã‚‚ä½¿ç”¨å¯èƒ½</p>

<h3>æ¬¡ç« äºˆå‘Š</h3>

<p>ç¬¬3ç« ã§ã¯ã€ãƒ™ã‚¤ã‚ºæœ€é©åŒ–ã¨ãƒ­ãƒœãƒƒãƒˆå®Ÿé¨“ã‚’çµ±åˆã—ãŸã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ«ãƒ¼ãƒ—æœ€é©åŒ–ã‚’å­¦ã³ã¾ã™ã€‚å®Ÿé¨“â†’æ¸¬å®šâ†’è§£æâ†’äºˆæ¸¬â†’æ¬¡å®Ÿé¨“ã®è‡ªå‹•ã‚µã‚¤ã‚¯ãƒ«ã‚’å®Ÿè£…ã—ã€ææ–™æ¢ç´¢ã‚’åŠ‡çš„ã«åŠ é€Ÿã—ã¾ã™ã€‚</p>

<p>---</p>

<h2>å‚è€ƒæ–‡çŒ®</h2>

<ol>
<li>OpenTrons. "OT-2 Robot Documentation." https://docs.opentrons.com/</li>
<li>Lynch, K. M., & Park, F. C. (2017). <em>Modern Robotics: Mechanics, Planning, and Control</em>. Cambridge University Press.</li>
<li>Granda, J. M. et al. (2018). "Controlling an organic synthesis robot with machine learning to search for new reactivity." <em>Nature</em>, 559, 377-381.</li>
<li>SBS (Society for Laboratory Automation and Screening). "ANSI/SLAS Microplate Standards." https://www.slas.org/education/ansi-slas-microplate-standards/</li>
</ol>

<p>---</p>

<strong>æ¬¡ã®ç« ã¸</strong>: <a href="chapter-3.html">ç¬¬3ç« : ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ«ãƒ¼ãƒ—æœ€é©åŒ–</a>

<a href="index.html">ç›®æ¬¡ã«æˆ»ã‚‹</a>


        <div class="navigation">
            <a href="index.html" class="nav-button">â† ã‚·ãƒªãƒ¼ã‚ºç›®æ¬¡ã«æˆ»ã‚‹</a>
<a href="chapter-2.html" class="nav-button">æ¬¡ç« : ç¬¬2ç«  â†’</a>
        </div>
    </main>

    <footer>
        <p><strong>ä½œæˆè€…</strong>: AI Terakoya Content Team</p>
        <p><strong>ç›£ä¿®</strong>: Dr. Yusuke Hashimotoï¼ˆæ±åŒ—å¤§å­¦ï¼‰</p>
        <p><strong>ãƒãƒ¼ã‚¸ãƒ§ãƒ³</strong>: 1.0 | <strong>ä½œæˆæ—¥</strong>: 2025-10-17</p>
        <p><strong>ãƒ©ã‚¤ã‚»ãƒ³ã‚¹</strong>: Creative Commons BY 4.0</p>
        <p>Â© 2025 AI Terakoya. All rights reserved.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const mermaidCodeBlocks = document.querySelectorAll('pre.codehilite code.language-mermaid, pre code.language-mermaid');

            mermaidCodeBlocks.forEach(function(codeBlock) {
                const pre = codeBlock.parentElement;
                const mermaidCode = codeBlock.textContent;

                const mermaidDiv = document.createElement('div');
                mermaidDiv.className = 'mermaid';
                mermaidDiv.textContent = mermaidCode.trim();

                pre.parentNode.replaceChild(mermaidDiv, pre);
            });

            if (typeof mermaid !== 'undefined') {
                mermaid.initialize({
                    startOnLoad: true,
                    theme: 'default'
                });
                mermaid.init(undefined, document.querySelectorAll('.mermaid'));
            }
        });
    </script>
</body>
</html>
